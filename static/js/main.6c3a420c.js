/*! For license information please see main.6c3a420c.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(a,t,i,"",function(e){return e})):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=N(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,u=s+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},j={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:j,ReactCurrentOwner:x};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=x.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,j(k);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,y(I),I=-1),p=!0;var s=f;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof b)x=function(){b(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){v(A,0)};function j(e){S=e,E||(E=!0,x())}function O(e,n){I=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,j(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(I),I=-1):g=!0,O(w,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,j(k))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case k:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Y(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,xe=null,Ee=null;function Se(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Ie(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var je=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){je=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){je=!1}function De(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,De.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,xt,Et,St,It=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,jt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void St(e.priority,function(){xt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Rt.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<jt.length;n++)(r=jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)Mt(n),null===n.blockedOn&&jt.shift()}var $t=_.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Wt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Kt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),_n=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var In=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(In),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),jn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Mn=u&&(!On||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){Ie(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Qn(e){if(K(_i(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Yn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Yn=Zn}else Yn=!1;Xn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Ir=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var jr=0;jr<Rr.length;jr++){var Or=Rr[jr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Ir,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Re(function(){var r=s,i=we(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Ir:case Tr:case Cr:l=vn;break;case Nr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:_i(l),f=null==c?o:_i(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==d&&Gr(a,d,c,u,!0)}if("select"===(l=(o=r?_i(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(qn(o))if(Xn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?_i(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(a,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Yt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Wr(r,b)).length&&(b=new _n(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Yt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,s))&&a.unshift(Hr(n,l,o)):i||null!=(l=Pe(n,s))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Yr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var ki=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=ki[xi],ki[xi]=null,xi--)}function Ii(e,t){xi++,ki[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ji(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(s(168));Ii(Ci,t),Ii(Ni,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ii(Ci,e)):Si(Ni),Ii(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var $i=[],qi=0,Hi=null,Wi=0,Ki=[],Gi=0,Qi=null,Ji=1,Xi="";function Yi(e,t){$i[qi++]=Wi,$i[qi++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Ki[Gi++]=Ji,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Qi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Yi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=$i[--qi],$i[qi]=null,Wi=$i[--qi],$i[qi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Xi=Ki[--Gi],Ki[Gi]=null,Ji=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw fs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var gs=_.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&bs(s)===t.type)?((r=i(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case k:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Mc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&Yi(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Yi(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),is&&Yi(i,m),c}function g(i,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),is&&Yi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return is&&Yi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),is&&Yi(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===x){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&bs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=vs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===x?((s=Mc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=vs(r,s,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(a,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(D(a))return g(r,s,a,l);ys(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Uc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=_s(!0),ks=_s(!1),xs=Ei(null),Es=null,Ss=null,Is=null;function Ts(){Is=Ss=Es=null}function Cs(e){var t=xs.current;Si(xs),e._currentValue=t}function Ns(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Es=e,Is=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Es)throw Error(s(308));Ss=e,Es.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ps=null;function js(e){null===Ps?Ps=[e]:Ps.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,js(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,js(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $s(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ws=Ei(Hs),Ks=Ei(Hs),Gs=Ei(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Js(e,t){switch(Ii(Gs,t),Ii(Ks,e),Ii(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ws),Ii(Ws,t)}function Xs(){Si(Ws),Si(Ks),Si(Gs)}function Ys(e){Qs(Gs.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(Ii(Ks,e),Ii(Ws,n))}function Zs(e){Ks.current===e&&(Si(Ws),Si(Ks))}var ea=Ei(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var sa=_.ReactCurrentDispatcher,aa=_.ReactCurrentBatchConfig,oa=0,la=null,ca=null,ua=null,da=!1,ha=!1,fa=0,pa=0;function ma(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function va(e,t,n,r,i,a){if(oa=a,la=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?eo:to,e=n(r,i),ha){a=0;do{if(ha=!1,fa=0,25<=a)throw Error(s(301));a+=1,ua=ca=null,t.updateQueue=null,sa.current=no,e=n(r,i)}while(ha)}if(sa.current=Za,t=null!==ca&&null!==ca.next,oa=0,ua=ca=la=null,da=!1,t)throw Error(s(300));return e}function ya(){var e=0!==fa;return fa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?la.memoizedState=ua=e:ua=ua.next=e,ua}function _a(){if(null===ca){var e=la.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===ua?la.memoizedState:ua.next;if(null!==t)ua=t,ca=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===ua?la.memoizedState=ua=e:ua=ua.next=e}return ua}function wa(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=_a(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ca,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((oa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,la.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,la.lanes|=a,Fl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=_a(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function Sa(e,t){var n=la,r=_a(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Ma(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Pa(9,Ta.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(s(349));0!==(30&oa)||Ia(n,t,i)}return i}function Ia(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ta(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&Aa(e)}function Ca(e,t,n){return n(function(){Na(t)&&Aa(e)})}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Aa(e){var t=Ds(e,1);null!==t&&ic(t,e,1,-1)}function Ra(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,la,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return _a().memoizedState}function Oa(e,t,n,r){var i=ba();la.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=_a();r=void 0===r?null:r;var s=void 0;if(null!==ca){var a=ca.memoizedState;if(s=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Pa(t,n,s,r))}la.flags|=e,i.memoizedState=Pa(1|t,n,s,r)}function La(e,t){return Oa(8390656,8,e,t)}function Ma(e,t){return Da(2048,8,e,t)}function Fa(e,t){return Da(4,2,e,t)}function Ua(e,t){return Da(4,4,e,t)}function Va(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Va.bind(null,t,e),n)}function Ba(){}function $a(e,t){var n=_a();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=_a();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&oa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),la.lanes|=n,Fl|=n,e.baseState=!0),t)}function Wa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{bt=n,aa.transition=r}}function Ka(){return _a().memoizedState}function Ga(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ja(e))Xa(t,n);else if(null!==(n=Os(e,t,n,r))){ic(n,e,r,nc()),Ya(n,t,r)}}function Qa(e,t,n){var r=rc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ja(e))Xa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,js(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(ic(n,e,r,i=nc()),Ya(n,t,r))}}function Ja(e){var t=e.alternate;return e===la||null!==t&&t===la}function Xa(e,t){ha=da=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Rs,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},eo={readContext:Rs,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Va.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,la,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Ra,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Wa.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=la,i=ba();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rl)throw Error(s(349));0!==(30&oa)||Ia(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,La(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ta.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Rl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:Rs,useCallback:$a,useContext:Rs,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Ua,useMemo:qa,useReducer:ka,useRef:ja,useState:function(){return ka(wa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(_a(),ca.memoizedState,e)},useTransition:function(){return[ka(wa)[0],_a().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1},no={readContext:Rs,useCallback:$a,useContext:Rs,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Ua,useMemo:qa,useReducer:xa,useRef:ja,useState:function(){return xa(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=_a();return null===ca?t.memoizedState=e:Ha(t,ca.memoizedState,e)},useTransition:function(){return[xa(wa)[0],_a().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function io(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(ic(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(ic(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(ic(t,e,r,n),zs(t,e,r))}};function ao(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oo(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=Pi(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function co(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=Pi(t)?Ai:Ci.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(io(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&so.enqueueReplaceState(i,i.state,null),$s(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var po="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),fo(0,t)},n}function go(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){fo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _o=_.ReactCurrentOwner,wo=!1;function ko(e,t,n,r){t.child=null===e?ks(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=va(e,t,n,r,s,i),n=ya(),null===e||wo?(is&&n&&es(t),t.flags|=1,ko(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function Eo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wo(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return Co(e,t,n,r,i)}function Io(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Dl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Dl,Ol),Ol|=r;return ko(e,t,i,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,i){var s=Pi(n)?Ai:Ci.current;return s=Ri(t,s),As(t,i),n=va(e,t,n,r,s,i),r=ya(),null===e||wo?(is&&r&&es(t),t.flags|=1,ko(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function No(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(As(t,i),null===t.stateNode)Ho(e,t),oo(t,n,r),co(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&lo(t,a,r,c),Ls=!1;var h=t.memoizedState;a.state=h,$s(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ni.current||Ls?("function"===typeof u&&(io(t,n,u,r),l=t.memoizedState),(o=Ls||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ro(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Ri(t,l=Pi(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&lo(t,a,r,l),Ls=!1,h=t.memoizedState,a.state=h,$s(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ni.current||Ls?("function"===typeof f&&(io(t,n,f,r),p=t.memoizedState),(c=Ls||ao(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,n,r,s,i)}function Ao(e,t,n,r,i,s){To(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Wo(e,t,s);r=t.stateNode,_o.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):ko(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Js(e,t.containerInfo)}function Po(e,t,n,r,i){return ps(),ms(i),t.flags|=256,ko(e,t,n,r),t.child}var jo,Oo,Do,Lo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,i=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ii(ea,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,i,0,null),e=Mc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Mo,e):Vo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=ho(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(a=Mc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=ho(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Rl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),ic(r,e,i,-1))}return vc(),zo(e,t,o,r=ho(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Ji,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Ji=e.id,Xi=e.overflow,Qi=t),t=Vo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Dc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&ms(r),ws(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ns(e.return,t,n)}function $o(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ko(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$o(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$o(t,!0,n,null,s);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Pi(t.type)&&ji(),Go(t),null;case 3:return r=t.stateNode,Xs(),Si(Ni),Si(Ci),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(lc(ss),ss=null))),Oo(e,t),Go(t),null;case 5:Zs(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Qs(Ws.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,jo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Go(t),null;case 13:if(Si(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==ss&&(lc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ll&&(Ll=3):vc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Xs(),Oo(e,t),null===e&&Br(t.stateNode.containerInfo),Go(t),null;case 10:return Cs(t.type._context),Go(t),null;case 19:if(Si(ea),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ko(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ko(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>ql&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Go(t),null}else 2*Xe()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Ii(ea,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Jo(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&ji(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Si(Ni),Si(Ci),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Si(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ea),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Do=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Yo=!1,Zo="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var rl=!1;function il(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&nl(t,n,s)}i=i.next}while(i!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var hl=null,fl=!1;function pl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Yo||tl(n,t);case 6:var r=hl,i=fl;hl=null,pl(e,t,n),fl=i,null!==(hl=r)&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=fl,hl=n.stateNode.containerInfo,fl=!0,pl(e,t,n),hl=r,fl=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&nl(n,t,a),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Yo&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ic(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,pl(e,t,n),Yo=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));ml(a,o,i),hl=null,fl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ic(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),bl(e),4&r){try{il(3,e,e.return),sl(3,e)}catch(g){Ic(e,e.return,g)}try{il(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:vl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(vl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":Y(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Ic(e,e.return,g)}}break;case 6:if(vl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ic(e,e.return,g)}}break;case 3:if(vl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:vl(t,e),bl(e);break;case 13:vl(t,e),bl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||($l=Xe())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,vl(t,e),Yo=u):vl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(el=e,d=e.child;null!==d;){for(h=el=d;null!==el;){switch(p=(f=el).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:tl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,el=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ic(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),dl(e,cl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,cl(e),a);break;default:throw Error(s(161))}}catch(ia){Ic(e,e.return,ia)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){el=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var i=el,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Xo;var c=Yo;if(Xo=a,(Yo=l)&&!c)for(el=i;null!==el;)l=(a=el).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,el=l):El(i);for(;null!==s;)el=s,wl(s,t,n),s=s.sibling;el=i,Xo=o,Yo=c}kl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,el=s):kl(e)}}function kl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&al(t)}catch(f){Ic(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function xl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function El(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(ia){Ic(t,n,ia)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(ia){Ic(t,i,ia)}}var s=t.return;try{al(t)}catch(ia){Ic(t,s,ia)}break;case 5:var a=t.return;try{al(t)}catch(ia){Ic(t,a,ia)}}}catch(ia){Ic(t,t.return,ia)}if(t===e){el=null;break}var o=t.sibling;if(null!==o){o.return=t.return,el=o;break}el=t.return}}var Sl,Il=Math.ceil,Tl=_.ReactCurrentDispatcher,Cl=_.ReactCurrentOwner,Nl=_.ReactCurrentBatchConfig,Al=0,Rl=null,Pl=null,jl=0,Ol=0,Dl=Ei(0),Ll=0,Ml=null,Fl=0,Ul=0,Vl=0,zl=null,Bl=null,$l=0,ql=1/0,Hl=null,Wl=!1,Kl=null,Gl=null,Ql=!1,Jl=null,Xl=0,Yl=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&Al)?Xe():-1!==ec?ec:ec=Xe()}function rc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==jl?jl&-jl:null!==gs.transition?(0===tc&&(tc=mt()),tc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ic(e,t,n,r){if(50<Yl)throw Yl=0,Zl=null,Error(s(185));vt(e,n,r),0!==(2&Al)&&e===Rl||(e===Rl&&(0===(2&Al)&&(Ul|=n),4===Ll&&cc(e,jl)),sc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Xe()+500,Ui&&Bi()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Rl?jl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(uc.bind(null,e)):zi(uc.bind(null,e)),ai(function(){0===(6&Al)&&Bi()}),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(ec=-1,tc=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Rl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Al;Al|=2;var a=gc();for(Rl===e&&jl===t||(Hl=null,ql=Xe()+500,pc(e,t));;)try{_c();break}catch(l){mc(e,l)}Ts(),Tl.current=a,Al=i,null!==Pl?t=0:(Rl=null,jl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,pc(e,0),cc(e,r),sc(e,Xe()),n;if(6===t)cc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ml,pc(e,0),cc(e,r),sc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Bl,Hl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=$l+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bl,Hl),t);break}xc(e,Bl,Hl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bl,Hl),r);break}xc(e,Bl,Hl);break;default:throw Error(s(329))}}}return sc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&lc(t)),e}function lc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function cc(e,t){for(t&=~Vl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Al))throw Error(s(327));Ec();var t=ht(e,0);if(0===(1&t))return sc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,pc(e,0),cc(e,t),sc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,Hl),sc(e,Xe()),null}function dc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Xe()+500,Ui&&Bi())}}function hc(e){null!==Jl&&0===Jl.tag&&0===(6&Al)&&Ec();var t=Al;Al|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(Al=t))&&Bi()}}function fc(){Ol=Dl.current,Si(Dl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:Xs(),Si(Ni),Si(Ci),ra();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:Si(ea);break;case 10:Cs(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Rl=e,Pl=e=Dc(e.current,null),jl=Ol=t,Ll=0,Ml=null,Vl=Ul=Fl=0,Bl=zl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function mc(e,t){for(;;){var n=Pl;try{if(Ts(),sa.current=Za,da){for(var r=la.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}da=!1}if(oa=0,ua=ca=la=null,ha=!1,fa=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,bo(p,o,l,0,t),1&p.mode&&vo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){vo(a,u,t),vc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=yo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),bo(v,o,l,0,t),ms(uo(c,l));break e}}a=c=uo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,mo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,go(a,l,t));break e}}a=a.return}while(null!==a)}kc(n)}catch(_){t=_,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function gc(){var e=Tl.current;return Tl.current=Za,null===e?Za:e}function vc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Rl||0===(268435455&Fl)&&0===(268435455&Ul)||cc(Rl,jl)}function yc(e,t){var n=Al;Al|=2;var r=gc();for(Rl===e&&jl===t||(Hl=null,pc(e,t));;)try{bc();break}catch(i){mc(e,i)}if(Ts(),Al=n,Tl.current=r,null!==Pl)throw Error(s(261));return Rl=null,jl=0,Ll}function bc(){for(;null!==Pl;)wc(Pl)}function _c(){for(;null!==Pl&&!Qe();)wc(Pl)}function wc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?kc(e):Pl=t,Cl.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ll=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ll&&(Ll=5)}function xc(e,t,n){var r=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Jl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Rl&&(Pl=Rl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Rc(tt,function(){return Ec(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var o=bt;bt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(hs){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ro(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(hs){Ic(t,t.return,hs)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}m=rl,rl=!1}(e,n),yl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Je(),Al=l,bt=o,Nl.transition=a}else e.current=n;if(Ql&&(Ql=!1,Jl=e,Xl=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&Xl)&&0!==e.tag&&Ec(),a=e.pendingLanes,0!==(1&a)?e===Zl?Yl++:(Yl=0,Zl=e):Yl=0,Bi()}(e,t,n,r)}finally{Nl.transition=i,bt=r}return null}function Ec(){if(null!==Jl){var e=_t(Xl),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Xl=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,el=e.current;null!==el;){var a=el,o=a.child;if(0!==(16&el.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var d=el;switch(d.tag){case 0:case 11:case 15:il(8,d,a)}var h=d.child;if(null!==h)h.return=d,el=h;else for(;null!==el;){var f=(d=el).sibling,p=d.return;if(ol(d),d===u){el=null;break}if(null!==f){f.return=p,el=f;break}el=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}el=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,el=o;else e:for(;null!==el;){if(0!==(2048&(a=el).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,el=y;break e}el=a.return}}var b=e.current;for(el=b;null!==el;){var _=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==_)_.return=o,el=_;else e:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(k){Ic(l,l.return,k)}if(l===o){el=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,el=w;break e}el=l.return}}if(Al=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function Sc(e,t,n){e=Vs(e,t=mo(0,t=uo(n,t),1),1),t=nc(),null!==e&&(vt(e,1,t),sc(e,t))}function Ic(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Vs(t,e=go(t,e=uo(n,e),1),1),e=nc(),null!==t&&(vt(t,1,e),sc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(jl&n)===n&&(4===Ll||3===Ll&&(130023424&jl)===jl&&500>Xe()-$l?pc(e,0):Vl|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Ds(e,t))&&(vt(e,t,n),sc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Rc(e,t){return Ke(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case x:return Mc(n.children,i,a,t);case E:o=8,i|=8;break;case S:return(e=jc(12,n,t,2|i)).elementType=S,e.lanes=a,e;case N:return(e=jc(13,n,t,i)).elementType=N,e.lanes=a,e;case A:return(e=jc(19,n,t,i)).elementType=A,e.lanes=a,e;case j:return Fc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:o=10;break e;case T:o=9;break e;case C:o=11;break e;case R:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function $c(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Di(e,n,t)}return t}function qc(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=$c(null),n=e.current,(s=Us(r=nc(),i=rc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,vt(e,i,r),sc(e,r),e}function Hc(e,t,n,r){var i=t.current,s=nc(),a=rc(i);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,a))&&(ic(e,i,a,s),zs(e,i,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Ro(t),ps();break;case 5:Ys(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Ii(ea,1&ea.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ii(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Io(e,t,n)}return Wo(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);As(t,n),i=va(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=so,t.stateNode=i,i._reactInternals=t,co(t,r,e,n),t=Ao(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),ko(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ro(r,e),i){case 0:t=Co(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=Eo(null,t,r,ro(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 1:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 3:e:{if(Ro(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fs(e,t),$s(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,r,n,i=uo(Error(s(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=uo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ks(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Wo(e,t,n);break e}ko(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),To(e,t),ko(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Uo(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):ko(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:ro(r,i),n);case 7:return ko(e,t,t.pendingProps,n),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ii(xs,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ni.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Us(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ns(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ns(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}ko(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Rs(i)),t.flags|=1,ko(e,t,r,n),t.child;case 14:return i=ro(r=t.type,t.pendingProps),Eo(e,t,r,i=ro(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ro(r,i),Ho(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,As(t,n),oo(t,r,i),co(t,r,i,n),Ao(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return Io(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Wc(a);o.call(e)}}Hc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(a);s.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),hc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc(function(){Hc(t,l,n,r)}),l}(n,t,e,i,r);return Wc(a)}Xc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Xc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){Hc(null,e,null,null)}),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),sc(t,Xe()),0===(6&Al)&&(ql=Xe()+500,Bi()))}break;case 13:hc(function(){var t=Ds(e,1);if(null!==t){var n=nc();ic(t,e,1,n)}}),Gc(e,1)}},kt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)ic(t,e,134217728,nc());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=rc(e),n=Ds(e,t);if(null!==n)ic(n,e,t,nc());Gc(e,t)}},Et=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),Y(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=dc,Ne=hc;var nu={usingClientEntryPoint:!1,Events:[bi,_i,wi,Ie,Te,dc]},ru={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{it=su.inject(iu),st=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);const s=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e))},a=t=e(r,i,s);return s},a=e=>e;const o=e=>{const t=(e=>e?s(e):s)(e),n=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;const n=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(n),n}(t,e);return Object.assign(n,t),n};function l(e,t){let n;try{n=e()}catch(r){return}return{getItem:e=>{var r;const i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(r=n.getItem(e))?r:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const c=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>c(e)(n),catch(e){return this}}}catch(n){return{then(e){return this},catch:e=>c(e)(n)}}},u=(e,t)=>(n,r,i)=>{let s={storage:l(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const o=new Set,u=new Set;let d=s.storage;if(!d)return e(function(){console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...arguments)},r,i);const h=()=>{const e=s.partialize({...r()});return d.setItem(s.name,{state:e,version:s.version})},f=i.setState;i.setState=(e,t)=>{f(e,t),h()};const p=e(function(){n(...arguments),h()},r,i);let m;i.getInitialState=()=>p;const g=()=>{var e,t;if(!d)return;a=!1,o.forEach(e=>{var t;return e(null!=(t=r())?t:p)});const i=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=r())?e:p))||void 0;return c(d.getItem.bind(d))(s.name).then(e=>{if(e){if("number"!==typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate){const t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[i,a]=e;if(m=s.merge(a,null!=(t=r())?t:p),n(m,!0),i)return h()}).then(()=>{null==i||i(m,void 0),m=r(),a=!0,u.forEach(e=>e(m))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{s={...s,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},s.skipHydration||g(),m||p},d=JSON.parse('[{"id":"start","title":"\uc655\uad6d\uc758 \uc2dc\uc791","description":"\ub2f9\uc2e0\uc740 \uc544\uc2a4\uac00\ub974\ub4dc \uc655\uad6d\uc758 \uc0c8\ub85c\uc6b4 \uad70\uc8fc\uc785\ub2c8\ub2e4. \uccab \ubc88\uc9f8 \uacb0\uc815\uc744 \ub0b4\ub824\uc57c \ud569\ub2c8\ub2e4.","image":"events/kingdom_start.jpg","options":[{"text":"\ub18d\uc5c5 \uc9c0\uc6d0 \ud655\ub300","effects":{"food":50,"gold":-20,"trust":5},"nextEventId":"neighboring_kingdom"},{"text":"\uad70\uc0ac\ub825 \uac15\ud654","effects":{"army":30,"gold":-50,"dissatisfaction":5},"nextEventId":"neighboring_kingdom"},{"text":"\ubb34\uc5ed \ub124\ud2b8\uc6cc\ud06c \uad6c\ucd95","effects":{"gold":40,"diplomatic_influence":10,"food":-10},"nextEventId":"neighboring_kingdom"}]},{"id":"neighboring_kingdom","title":"\uc774\uc6c3 \uc655\uad6d\uacfc\uc758 \uccab \ub9cc\ub0a8","description":"\uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d\uc758 \uc0ac\uc808\ub2e8\uc774 \ub3c4\ucc29\ud588\uc2b5\ub2c8\ub2e4. \uadf8\ub4e4\uc740 \ub2f9\uc2e0\uc758 \uc655\uad6d\uacfc \uc678\uad50 \uad00\uacc4\ub97c \ub9fa\uace0 \uc2f6\uc5b4\ud569\ub2c8\ub2e4.","image":"events/diplomacy.jpg","options":[{"text":"\uc6b0\ud638\uc801\uc778 \uad00\uacc4 \uc81c\uc548","effects":{"diplomatic_influence":15,"gold":-30},"nextEventId":"bandit_attack"},{"text":"\uc911\ub9bd\uc801\uc778 \ud0dc\ub3c4 \uc720\uc9c0","effects":{"diplomatic_influence":5},"nextEventId":"bandit_attack"},{"text":"\uacbd\uacc4\uc2ec \ud45c\ud604","effects":{"military_readiness":10,"diplomatic_influence":-10},"nextEventId":"bandit_attack"}]},{"id":"bandit_attack","title":"\ub3c4\uc801\ub2e8\uc758 \uc2b5\uaca9","description":"\ub3c4\uc801\ub2e8\uc774 \uad6d\uacbd\uc744 \ub118\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc5b4\ub5bb\uac8c \ub300\uc751\ud560\uae4c\uc694?","image":"events/bandit_attack.jpg","options":[{"text":"\uad70\uc0ac \ub3d9\uc6d0","effects":{"army":-20,"trust":10},"nextEventId":"tax_policy"},{"text":"\ud3c9\ud654 \ud611\uc0c1","effects":{"gold":-30,"dissatisfaction":-5},"nextEventId":"tax_policy"},{"text":"\uc9c0\uc5ed \ubbfc\ubcd1\ub300 \uc870\uc9c1","effects":{"population":-10,"trust":5,"army":10},"nextEventId":"tax_policy"}]},{"id":"tax_policy","title":"\uc138\uae08 \uc815\ucc45","description":"\uc655\uad6d\uc758 \uc7ac\uc815\uc744 \uc704\ud574 \uc138\uae08\uc744 \uc870\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.","image":"events/tax_policy.jpg","options":[{"text":"\uc138\uae08 \uc778\uc0c1","effects":{"gold":40,"dissatisfaction":10},"nextEventId":"resource_discovery"},{"text":"\uc138\uae08 \ub3d9\uacb0","effects":{"trust":5},"nextEventId":"resource_discovery"},{"text":"\ubd80\uc720\uce35 \ub300\uc0c1 \ud2b9\ubcc4\uc138","effects":{"gold":25,"dissatisfaction":5,"loyalty":-5},"nextEventId":"resource_discovery"}]},{"id":"resource_discovery","title":"\uc790\uc6d0 \ubc1c\uacac","description":"\ud0d0\ud5d8\ub300\uac00 \uc655\uad6d \ub0b4\uc5d0\uc11c \uc0c8\ub85c\uc6b4 \uc790\uc6d0 \ub9e4\uc7a5\uc9c0\ub97c \ubc1c\uacac\ud588\uc2b5\ub2c8\ub2e4.","image":"events/resource_discovery.jpg","options":[{"text":"\ucca0\uad11\uc11d \ucc44\uad74","effects":{"iron":50,"labor":-20},"nextEventId":"diplomatic_crisis"},{"text":"\ub9c8\ub098 \uacb0\uc815 \ucc44\ucde8","effects":{"mana":30,"research_points":10},"nextEventId":"diplomatic_crisis"},{"text":"\uae08\uad11 \uac1c\ubc1c","effects":{"gold":60,"labor":-30},"nextEventId":"diplomatic_crisis"}]},{"id":"diplomatic_crisis","title":"\uc678\uad50\uc801 \uc704\uae30","description":"\ud574\uc0c1 \uc5f0\ud569\uacfc \uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d \uc0ac\uc774\uc5d0 \ubb34\uc5ed \ubd84\uc7c1\uc774 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub450 \uad6d\uac00 \ubaa8\ub450 \ub2f9\uc2e0\uc758 \uc9c0\uc9c0\ub97c \uc694\uccad\ud569\ub2c8\ub2e4.","image":"events/diplomatic_crisis.jpg","options":[{"text":"\ud574\uc0c1 \uc5f0\ud569 \uc9c0\uc9c0","effects":{"faction_west_relation":20,"faction_east_relation":-20,"gold":30},"nextEventId":"border_dispute"},{"text":"\uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d \uc9c0\uc9c0","effects":{"faction_east_relation":20,"faction_west_relation":-20,"magical_essence":10},"nextEventId":"border_dispute"},{"text":"\uc911\ub9bd \uc720\uc9c0","effects":{"faction_east_relation":-5,"faction_west_relation":-5,"diplomatic_influence":10},"nextEventId":"border_dispute"}]},{"id":"border_dispute","title":"\uad6d\uacbd \ubd84\uc7c1","description":"\uba54\ub9ac\ub514\uc548 \uc5f0\ub9f9\uc774 \ub2f9\uc2e0\uc758 \ub0a8\ubd80 \uc601\ud1a0\uc5d0 \ub300\ud55c \uc18c\uc720\uad8c\uc744 \uc8fc\uc7a5\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/border_dispute.jpg","options":[{"text":"\uad70\uc0ac\uc801 \ub300\uc751","effects":{"army":-30,"faction_south_relation":-30},"nextEventId":"internal_unrest"},{"text":"\uc678\uad50\uc801 \ud574\uacb0","effects":{"gold":-50,"diplomatic_influence":-10,"faction_south_relation":10},"nextEventId":"internal_unrest"},{"text":"\uc601\ud1a0 \uc77c\ubd80 \uc591\ubcf4","effects":{"territory":-1,"faction_south_relation":20,"dissatisfaction":15},"nextEventId":"internal_unrest"}]},{"id":"internal_unrest","title":"\ub0b4\ubd80 \ubd88\uc548","description":"\uc655\uad6d \ub0b4 \uc77c\ubd80 \uadc0\uc871\ub4e4\uc774 \ub2f9\uc2e0\uc758 \ud1b5\uce58\uc5d0 \ubd88\ub9cc\uc744 \ud45c\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/internal_unrest.jpg","options":[{"text":"\uac15\uacbd \ub300\uc751","effects":{"loyalty":-10,"dissatisfaction":15,"politicalPressure":-20},"nextEventId":"magical_discovery"},{"text":"\ud0c0\ud611\uc548 \uc81c\uc2dc","effects":{"gold":-40,"politicalPressure":-15,"loyalty":5},"nextEventId":"magical_discovery"},{"text":"\uac1c\ud601 \uc57d\uc18d","effects":{"trust":10,"politicalPressure":-10,"dissatisfaction":-5},"nextEventId":"magical_discovery"}]},{"id":"magical_discovery","title":"\ub9c8\ubc95\uc758 \ubc1c\uacac","description":"\uc655\uad6d\uc758 \ud559\uc790\ub4e4\uc774 \uace0\ub300 \ub9c8\ubc95 \ubb38\uc11c\ub97c \ubc1c\uacac\ud588\uc2b5\ub2c8\ub2e4. \uc774\ub97c \uc5b4\ub5bb\uac8c \ud65c\uc6a9\ud560\uae4c\uc694?","image":"events/magical_discovery.jpg","options":[{"text":"\uad70\uc0ac\uc801 \uc751\uc6a9","effects":{"magical_attack":15,"mana":-20,"research_points":10},"nextEventId":"foreign_invasion"},{"text":"\ud559\ubb38\uc801 \uc5f0\uad6c","effects":{"research_points":30,"mana":-10},"nextEventId":"foreign_invasion"},{"text":"\uce58\uc720 \ub9c8\ubc95 \uac1c\ubc1c","effects":{"population_growth":10,"happiness":10,"mana":-15},"nextEventId":"foreign_invasion"}]},{"id":"foreign_invasion","title":"\uc678\uc138\uc758 \uce68\ub7b5","description":"\ubcf4\ub808\uc54c \ubd80\uc871\uc774 \ubd81\ucabd \uad6d\uacbd\uc744 \ub118\uc5b4 \uce68\ub7b5\ud574 \uc654\uc2b5\ub2c8\ub2e4.","image":"events/foreign_invasion.jpg","options":[{"text":"\uc804\uba74\uc804 \uc120\ud3ec","effects":{"army":-50,"population":-20,"faction_north_relation":-30},"nextEventId":"alliance_proposal"},{"text":"\ubc29\uc5b4\uc801 \ud0dc\uc138","effects":{"army":-30,"gold":-40,"territory":-1},"nextEventId":"alliance_proposal"},{"text":"\ub3d9\ub9f9\uad6d\uc5d0 \uc9c0\uc6d0 \uc694\uccad","effects":{"diplomatic_influence":-20,"gold":-30},"nextEventId":"alliance_proposal","condition":{"type":"diplomatic","requirement":"has_alliance"}}]},{"id":"alliance_proposal","title":"\ub3d9\ub9f9 \uc81c\uc548","description":"\uba54\ub9ac\ub514\uc548 \uc5f0\ub9f9\uc774 \ubcf4\ub808\uc54c \ubd80\uc871\uc5d0 \ub300\ud56d\ud558\uae30 \uc704\ud55c \uad70\uc0ac \ub3d9\ub9f9\uc744 \uc81c\uc548\ud588\uc2b5\ub2c8\ub2e4.","image":"events/alliance_proposal.jpg","options":[{"text":"\ub3d9\ub9f9 \uc218\ub77d","effects":{"faction_south_relation":30,"faction_north_relation":-20,"military_readiness":20},"nextEventId":"economic_crisis"},{"text":"\uc81c\uc548 \uac70\uc808","effects":{"faction_south_relation":-20,"diplomatic_influence":-10},"nextEventId":"economic_crisis"},{"text":"\uc81c\ud55c\uc801 \ud611\ub825 \uc81c\uc548","effects":{"faction_south_relation":10,"gold":-20},"nextEventId":"economic_crisis"}]},{"id":"economic_crisis","title":"\uacbd\uc81c \uc704\uae30","description":"\uc655\uad6d\uc758 \uacbd\uc81c\uac00 \uce68\uccb4\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uae08\uace0\ub294 \ube44\uc5b4\uac00\uace0 \uc0c1\uc778\ub4e4\uc740 \ubd88\ub9cc\uc744 \ud45c\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/economic_crisis.jpg","options":[{"text":"\uae34\ucd95 \uc815\ucc45","effects":{"gold":30,"dissatisfaction":20,"population_growth":-10},"nextEventId":"technological_breakthrough"},{"text":"\ubb34\uc5ed \ud655\ub300","effects":{"gold":20,"diplomatic_influence":10,"military_readiness":-10},"nextEventId":"technological_breakthrough"},{"text":"\uacf5\uacf5 \uc0ac\uc5c5 \ud22c\uc790","effects":{"gold":-50,"dissatisfaction":-15,"population_growth":5},"nextEventId":"technological_breakthrough"}]},{"id":"technological_breakthrough","title":"\uae30\uc220\uc801 \ub3cc\ud30c\uad6c","description":"\uc655\uad6d\uc758 \ud559\uc790\ub4e4\uc774 \uc911\uc694\ud55c \uae30\uc220\uc801 \ub3cc\ud30c\uad6c\ub97c \ub9c8\ub828\ud588\uc2b5\ub2c8\ub2e4. \uc5b4\ub5a4 \ubd84\uc57c\uc5d0 \uc9d1\uc911\ud560\uae4c\uc694?","image":"events/technological_breakthrough.jpg","options":[{"text":"\uad70\uc0ac \uae30\uc220","effects":{"research_points":-30,"military_technology":20},"nextEventId":"natural_disaster"},{"text":"\ub18d\uc5c5 \uae30\uc220","effects":{"research_points":-30,"food_production":30},"nextEventId":"natural_disaster"},{"text":"\uac74\ucd95 \uae30\uc220","effects":{"research_points":-30,"building_durability":20,"construction_speed":20},"nextEventId":"natural_disaster"}]},{"id":"natural_disaster","title":"\uc790\uc5f0 \uc7ac\ud574","description":"\uac15\ub825\ud55c \ud3ed\ud48d\uc774 \uc655\uad6d\uc744 \uac15\ud0c0\ud588\uc2b5\ub2c8\ub2e4. \ub9ce\uc740 \uac74\ubb3c\uc774 \ud30c\uad34\ub418\uace0 \ub18d\uc791\ubb3c\uc774 \uc720\uc2e4\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","image":"events/natural_disaster.jpg","options":[{"text":"\uc989\uac01\uc801\uc778 \uad6c\ud638 \ud65c\ub3d9","effects":{"gold":-50,"food":-30,"trust":15,"dissatisfaction":-10},"nextEventId":"religious_conflict"},{"text":"\uc7ac\uac74\uc5d0 \uc9d1\uc911","effects":{"gold":-70,"labor":-40,"building_durability":15},"nextEventId":"religious_conflict"},{"text":"\ub9c8\ubc95\uc73c\ub85c \ub0a0\uc528 \ud1b5\uc81c","effects":{"mana":-40,"food":-10,"trust":-5},"nextEventId":"religious_conflict","condition":{"type":"technology","requirement":"advanced_magic"}}]},{"id":"religious_conflict","title":"\uc885\uad50\uc801 \uac08\ub4f1","description":"\uc655\uad6d \ub0b4\uc5d0\uc11c \uc11c\ub85c \ub2e4\ub978 \uc885\uad50 \uc9d1\ub2e8 \uac04\uc758 \uac08\ub4f1\uc774 \uace0\uc870\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/religious_conflict.jpg","options":[{"text":"\uad00\uc6a9 \uc815\ucc45","effects":{"happiness":10,"cultural_influence":15,"loyalty":-5},"nextEventId":"trade_opportunity"},{"text":"\uad6d\uad50 \uc9c0\uc815","effects":{"dissatisfaction":15,"loyalty":15,"cultural_influence":-10},"nextEventId":"trade_opportunity"},{"text":"\uc885\uad50 \ud65c\ub3d9 \uc81c\ud55c","effects":{"dissatisfaction":20,"cultural_influence":-15,"politicalPressure":-10},"nextEventId":"trade_opportunity"}]},{"id":"trade_opportunity","title":"\ubb34\uc5ed \uae30\ud68c","description":"\ud574\uc0c1 \uc5f0\ud569\uc774 \ud2b9\ubcc4 \ubb34\uc5ed \ud611\uc815\uc744 \uc81c\uc548\ud588\uc2b5\ub2c8\ub2e4. \uadf8\ub4e4\uc740 \ub2f9\uc2e0\uc758 \uc655\uad6d\uc5d0\uc11c \ud2b9\uc815 \uc790\uc6d0\uc744 \uc6d0\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/trade_opportunity.jpg","options":[{"text":"\ucca0 \uc218\ucd9c","effects":{"iron":-40,"gold":80,"faction_west_relation":15},"nextEventId":"magical_threat"},{"text":"\ubaa9\uc7ac \uc218\ucd9c","effects":{"wood":-60,"gold":70,"faction_west_relation":15},"nextEventId":"magical_threat"},{"text":"\uc81c\uc548 \uac70\uc808","effects":{"faction_west_relation":-15,"diplomatic_influence":-5},"nextEventId":"magical_threat"}]},{"id":"magical_threat","title":"\ub9c8\ubc95\uc801 \uc704\ud611","description":"\uc655\uad6d \uc678\uacfd\uc5d0\uc11c \uc774\uc0c1\ud55c \ub9c8\ubc95 \ud604\uc0c1\uc774 \ubcf4\uace0\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc8fc\ubbfc\ub4e4\uc740 \uacf5\ud3ec\uc5d0 \ub5a8\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/magical_threat.jpg","options":[{"text":"\ub9c8\ubc95\uc0ac \ud30c\uacac","effects":{"mana":-30,"magical_essence":-10,"trust":10},"nextEventId":"succession_crisis","condition":{"type":"building","requirement":"mage_tower"}},{"text":"\uad70\ub300 \ud30c\uacac","effects":{"army":-20,"population":-10,"trust":5},"nextEventId":"succession_crisis"},{"text":"\uc704\ud611 \ubb34\uc2dc","effects":{"dissatisfaction":20,"magical_corruption":15},"nextEventId":"succession_crisis"}]},{"id":"succession_crisis","title":"\uc655\uc704 \uacc4\uc2b9 \uc704\uae30","description":"\ub2f9\uc2e0\uc758 \uac74\uac15\uc774 \uc545\ud654\ub418\uba74\uc11c \uc655\uc704 \uacc4\uc2b9 \ubb38\uc81c\uac00 \ub300\ub450\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/succession_crisis.jpg","options":[{"text":"\uc7a5\ub0a8 \uc9c0\uba85","effects":{"loyalty":10,"politicalPressure":-15,"faction_east_relation":5},"nextEventId":"golden_age"},{"text":"\ub2a5\ub825 \uc788\ub294 \ub538 \uc9c0\uba85","effects":{"loyalty":-5,"politicalPressure":10,"cultural_influence":15},"nextEventId":"golden_age"},{"text":"\uc758\ud68c \uc124\ub9bd","effects":{"loyalty":-15,"dissatisfaction":-20,"politicalPressure":20},"nextEventId":"golden_age"}]},{"id":"golden_age","title":"\ud669\uae08\uae30","description":"\ub2f9\uc2e0\uc758 \ud604\uba85\ud55c \ud1b5\uce58 \ub355\ubd84\uc5d0 \uc655\uad6d\uc740 \ubc88\uc601\uc758 \uc2dc\ub300\ub97c \ub9de\uc774\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/golden_age.jpg","options":[{"text":"\ubb38\ud654 \ubc1c\uc804","effects":{"cultural_influence":30,"happiness":20,"gold":-30},"nextEventId":"faction_east_war"},{"text":"\uad70\uc0ac\ub825 \uac15\ud654","effects":{"military_readiness":30,"army":50,"gold":-50},"nextEventId":"faction_east_war"},{"text":"\uacbd\uc81c \ubc1c\uc804","effects":{"gold":100,"trade_efficiency":20,"population_growth":10},"nextEventId":"faction_east_war"}]},{"id":"faction_east_war","title":"\uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d\uc758 \uc804\uc7c1","description":"\uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d\uc774 \ubcf4\ub808\uc54c \ubd80\uc871\uacfc \uc804\uc7c1\uc744 \uc2dc\uc791\ud588\uc2b5\ub2c8\ub2e4. \uadf8\ub4e4\uc740 \ub2f9\uc2e0\uc758 \uc9c0\uc6d0\uc744 \uc694\uccad\ud569\ub2c8\ub2e4.","image":"events/faction_war.jpg","options":[{"text":"\uad70\uc0ac\uc801 \uc9c0\uc6d0","effects":{"army":-40,"faction_east_relation":30,"faction_north_relation":-30},"nextEventId":"ancient_ruins"},{"text":"\uacbd\uc81c\uc801 \uc9c0\uc6d0","effects":{"gold":-80,"faction_east_relation":20,"faction_north_relation":-10},"nextEventId":"ancient_ruins"},{"text":"\uc911\ub9bd \uc720\uc9c0","effects":{"faction_east_relation":-20,"diplomatic_influence":-10},"nextEventId":"ancient_ruins"}]},{"id":"ancient_ruins","title":"\uace0\ub300 \uc720\uc801 \ubc1c\uacac","description":"\ud0d0\ud5d8\ub300\uac00 \uc655\uad6d \ub0b4\uc5d0\uc11c \uace0\ub300 \ubb38\uba85\uc758 \uc720\uc801\uc744 \ubc1c\uacac\ud588\uc2b5\ub2c8\ub2e4.","image":"events/ancient_ruins.jpg","options":[{"text":"\ud559\ubb38\uc801 \uc5f0\uad6c","effects":{"research_points":50,"cultural_influence":20},"nextEventId":"plague_outbreak"},{"text":"\ubcf4\ubb3c \ud0d0\uc0c9","effects":{"gold":100,"magical_essence":20,"arcane_crystal":5},"nextEventId":"plague_outbreak"},{"text":"\uad70\uc0ac \uae30\uc9c0\ub85c \uc804\ud658","effects":{"military_readiness":25,"cultural_influence":-15},"nextEventId":"plague_outbreak"}]},{"id":"plague_outbreak","title":"\uc5ed\ubcd1 \ubc1c\uc0dd","description":"\uce58\uba85\uc801\uc778 \uc5ed\ubcd1\uc774 \uc655\uad6d \uc804\uc5ed\uc73c\ub85c \ud37c\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4.","image":"events/plague_outbreak.jpg","options":[{"text":"\uc758\ud559\uc801 \ub300\uc751","effects":{"gold":-60,"medicine":-30,"population":-20},"nextEventId":"next_era","condition":{"type":"resource","requirement":"medicine"}},{"text":"\ub3c4\uc2dc \ubd09\uc1c4","effects":{"population":-50,"dissatisfaction":30,"trade_efficiency":-20},"nextEventId":"next_era"},{"text":"\uce58\uc720 \ub9c8\ubc95 \uc0ac\uc6a9","effects":{"mana":-50,"magical_essence":-20,"population":-10},"nextEventId":"next_era","condition":{"type":"technology","requirement":"advanced_magic"}}]},{"id":"next_era","title":"\uc0c8\ub85c\uc6b4 \uc2dc\ub300","description":"\uc655\uad6d\uc740 \ubc1c\uc804\uc758 \uae30\ub85c\uc5d0 \uc130\uc2b5\ub2c8\ub2e4. \ub2e4\uc74c \uc2dc\ub300\ub97c \ub9de\uc774\ud560 \uc900\ube44\ub97c \ud558\uc138\uc694.","image":"events/next_era.jpg","options":[{"text":"\uae30\uc220 \uac1c\ubc1c \ud22c\uc790","effects":{"gold":-100,"research_points":50,"population":20},"nextEventId":"faction_specific_east"},{"text":"\uad70\uc0ac \ud655\uc7a5","effects":{"army":100,"gold":-120,"military_readiness":30},"nextEventId":"faction_specific_west"},{"text":"\ubb38\ud654\uc801 \ub974\ub124\uc0c1\uc2a4","effects":{"cultural_influence":40,"happiness":20,"gold":-80},"nextEventId":"faction_specific_south"}]},{"id":"faction_specific_east","title":"\uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d\uc758 \uc81c\uc548","description":"\uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d\uc774 \ub9c8\ubc95 \uae30\uc220 \uad50\ub958\ub97c \uc81c\uc548\ud588\uc2b5\ub2c8\ub2e4.","image":"events/faction_east.jpg","options":[{"text":"\uae30\uc220 \uad50\ub958 \uc218\ub77d","effects":{"research_points":30,"magical_essence":20,"faction_east_relation":20},"nextEventId":"grand_project"},{"text":"\uc81c\ud55c\uc801 \uad50\ub958","effects":{"research_points":15,"magical_essence":10,"faction_east_relation":5},"nextEventId":"grand_project"},{"text":"\uc81c\uc548 \uac70\uc808","effects":{"faction_east_relation":-20,"magical_research":-10},"nextEventId":"grand_project"}]},{"id":"faction_specific_west","title":"\ud574\uc0c1 \uc5f0\ud569\uc758 \ud568\ub300","description":"\ud574\uc0c1 \uc5f0\ud569\uc774 \uadf8\ub4e4\uc758 \ud568\ub300\ub97c \ub2f9\uc2e0\uc758 \ud574\uc548\uc5d0 \uc815\ubc15\uc2dc\ud0a4\uace0 \uc2f6\uc5b4\ud569\ub2c8\ub2e4.","image":"events/faction_west.jpg","options":[{"text":"\ud56d\uad6c \uc0ac\uc6a9 \ud5c8\uac00","effects":{"gold":50,"faction_west_relation":20,"naval_defense":15},"nextEventId":"grand_project"},{"text":"\uc81c\ud55c\uc801 \uc811\uadfc \ud5c8\uc6a9","effects":{"gold":20,"faction_west_relation":5},"nextEventId":"grand_project"},{"text":"\uc694\uccad \uac70\uc808","effects":{"faction_west_relation":-20,"naval_defense":-10},"nextEventId":"grand_project"}]},{"id":"faction_specific_south","title":"\uba54\ub9ac\ub514\uc548 \uc5f0\ub9f9\uc758 \ucd95\uc81c","description":"\uba54\ub9ac\ub514\uc548 \uc5f0\ub9f9\uc774 \ub2f9\uc2e0\uc744 \uadf8\ub4e4\uc758 \uc218\ud655 \ucd95\uc81c\uc5d0 \ucd08\ub300\ud588\uc2b5\ub2c8\ub2e4.","image":"events/faction_south.jpg","options":[{"text":"\uc9c1\uc811 \ucc38\uc11d","effects":{"faction_south_relation":25,"cultural_influence":15,"diplomatic_influence":10},"nextEventId":"grand_project"},{"text":"\ub300\ud45c\ub2e8 \ud30c\uacac","effects":{"faction_south_relation":10,"gold":-20},"nextEventId":"grand_project"},{"text":"\ucd08\ub300 \uac70\uc808","effects":{"faction_south_relation":-15},"nextEventId":"grand_project"}]},{"id":"grand_project","title":"\ub300\uaddc\ubaa8 \ud504\ub85c\uc81d\ud2b8","description":"\uc655\uad6d\uc758 \uc704\uc0c1\uc744 \ub192\uc774\uae30 \uc704\ud55c \ub300\uaddc\ubaa8 \ud504\ub85c\uc81d\ud2b8\ub97c \uc2dc\uc791\ud560 \ub54c\uc785\ub2c8\ub2e4.","image":"events/grand_project.jpg","options":[{"text":"\ub300\uc131\ub2f9 \uac74\uc124","effects":{"gold":-200,"stone":-100,"cultural_influence":40,"happiness":20},"nextEventId":"final_challenge"},{"text":"\ub300\ud559 \uc124\ub9bd","effects":{"gold":-180,"wood":-80,"research_points":50,"education":30},"nextEventId":"final_challenge"},{"text":"\uc694\uc0c8 \uad6c\ucd95","effects":{"gold":-220,"stone":-120,"iron":-50,"military_defense":50},"nextEventId":"final_challenge"}]},{"id":"final_challenge","title":"\ucd5c\ud6c4\uc758 \uc2dc\ud5d8","description":"\ubcf4\ub808\uc54c \ubd80\uc871\uc774 \ub300\uaddc\ubaa8 \uad70\ub300\ub97c \uc774\ub04c\uace0 \ub2f9\uc2e0\uc758 \uc655\uad6d\uc744 \uce68\ub7b5\ud588\uc2b5\ub2c8\ub2e4. \uc774\uac83\uc740 \ub2f9\uc2e0\uc758 \ud1b5\uce58\uc5d0 \ub300\ud55c \ucd5c\ud6c4\uc758 \uc2dc\ud5d8\uc785\ub2c8\ub2e4.","image":"events/final_challenge.jpg","options":[{"text":"\uc804\uba74\uc804 \uc120\ud3ec","effects":{"army":-100,"gold":-100,"population":-50,"military_victory":1},"nextEventId":"victory"},{"text":"\ub3d9\ub9f9\uad6d \uc9c0\uc6d0 \uc694\uccad","effects":{"diplomatic_influence":-30,"gold":-50,"diplomatic_victory":1},"nextEventId":"victory","condition":{"type":"diplomatic","requirement":"strong_alliance"}},{"text":"\ub9c8\ubc95 \ubc29\uc5b4\ub9c9 \uc804\uac1c","effects":{"mana":-100,"magical_essence":-50,"arcane_crystal":-20,"magical_victory":1},"nextEventId":"victory","condition":{"type":"building","requirement":"arcane_sanctuary"}}]},{"id":"victory","title":"\uc2b9\ub9ac\uc758 \uc2dc\ub300","description":"\ub2f9\uc2e0\uc740 \ubaa8\ub4e0 \ub3c4\uc804\uc744 \uadf9\ubcf5\ud558\uace0 \uc655\uad6d\uc744 \ubc88\uc601\uc73c\ub85c \uc774\ub04c\uc5c8\uc2b5\ub2c8\ub2e4. \ub2f9\uc2e0\uc758 \uc774\ub984\uc740 \uc5ed\uc0ac\uc5d0 \uae38\uc774 \ub0a8\uc744 \uac83\uc785\ub2c8\ub2e4.","image":"events/victory.jpg","options":[{"text":"\ucd95\ud558 \uc5f0\ud68c \uac1c\ucd5c","effects":{"happiness":30,"gold":-50,"legacy":1},"nextEventId":null},{"text":"\uae30\ub150 \ub3d9\uc0c1 \uac74\ub9bd","effects":{"cultural_influence":40,"stone":-50,"legacy":1},"nextEventId":null},{"text":"\uc5ed\uc0ac\uc11c \ud3b8\ucc2c","effects":{"research_points":30,"cultural_influence":20,"legacy":1},"nextEventId":null}]}]'),h=JSON.parse('[{"id":"tax_reform","name":"\uc138\uae08 \uac1c\ud601","description":"\uc138\uae08\uc744 \uc870\uc815\ud558\uc5ec \uc7ac\uc815\uc744 \uc548\uc815\uc2dc\ud0a8\ub2e4.","effects":{"gold":10,"trust":-5,"dissatisfaction":5}},{"id":"welfare","name":"\ubcf5\uc9c0 \uc815\ucc45","description":"\uad6d\ubbfc \ubcf5\uc9c0\ub97c \uc99d\uc9c4\ud558\uc5ec \ubd88\ub9cc\ub3c4\ub97c \ub0ae\ucd98\ub2e4.","effects":{"gold":-20,"trust":10,"dissatisfaction":-10}},{"id":"military_expansion","name":"\uad70\uc0ac \ud655\uc7a5","description":"\uad70\uc0ac\ub825\uc744 \uac15\ud654\ud558\uc5ec \ubc29\uc5b4\ub825\uc744 \ub192\uc778\ub2e4.","effects":{"gold":-30,"army":20,"dissatisfaction":5}}]'),f=JSON.parse('[{"id":"advisor_1","name":"\uc7ac\ubb34\uad00 \ud55c\uc2a4","personality":"\uc2e0\uc911\ud568","comment":"\uc7ac\uc815\uc744 \uc544\uaef4 \uc4f0\ub294 \uac83\uc774 \uc655\uad6d\uc758 \ubbf8\ub798\ub97c \ubc1d\ud799\ub2c8\ub2e4."},{"id":"advisor_2","name":"\uc7a5\uad70 \ub9ac\uc544","personality":"\uac15\uacbd\ud30c","comment":"\uad70\uc0ac\ub825\uc744 \ud0a4\uc6b0\uc9c0 \uc54a\uc73c\uba74 \uc678\uc801\uc758 \uce68\ub7b5\uc744 \ub9c9\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},{"id":"advisor_3","name":"\ub18d\uc5c5 \uc804\ubb38\uac00 \ub9c8\ub9ac","personality":"\uc628\ud654\ud568","comment":"\ub18d\uc5c5 \uc9c0\uc6d0\uc774 \uc655\uad6d\uc758 \uc548\uc815\uc5d0 \ud575\uc2ec\uc785\ub2c8\ub2e4."}]'),p=JSON.parse('[{"id":"city_1","name":"\ubca0\ub974\uadf8","population":400,"foodProduction":20,"armyStationed":15,"wood":10,"stone":5,"iron":2,"mana":1,"labor":30},{"id":"city_2","name":"\uc544\ub974\ud14c\ubbf8\uc2a4","population":300,"foodProduction":15,"armyStationed":10,"wood":7,"stone":6,"iron":3,"mana":2,"labor":25},{"id":"city_3","name":"\uce7c\ub9ac\uc2a4\ud0c0","population":300,"foodProduction":10,"armyStationed":5,"wood":6,"stone":4,"iron":2,"mana":3,"labor":20}]'),m=JSON.parse('[{"id":"region_1","name":"\uc911\uc559 \ud3c9\uc6d0","type":"plains","description":"\ube44\uc625\ud55c \ud1a0\uc9c0\uc640 \ud48d\ubd80\ud55c \uc790\uc6d0\uc774 \uc788\ub294 \uc655\uad6d\uc758 \uc911\uc2ec\uc9c0\uc785\ub2c8\ub2e4.","controlledBy":"player","cities":["city_1"],"resources":{"food":30,"gold":20,"wood":15,"stone":10,"iron":5,"mana":2},"position":{"x":25,"y":25},"neighbors":["region_2","region_3","region_4","region_5","region_16","region_17","region_18","region_19"],"discoveredAt":1,"developmentLevel":3,"defenseBonus":0,"specialFeatures":["capital","tradingHub"]},{"id":"region_2","name":"\ubd81\ubd80 \uc0b0\ub9e5","type":"mountains","description":"\ud5d8\uc900\ud55c \uc0b0\ub9e5\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uc9c0\uc5ed\uc73c\ub85c, \ud48d\ubd80\ud55c \uad11\ubb3c \uc790\uc6d0\uc774 \ub9e4\uc7a5\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"player","cities":["city_2"],"resources":{"food":5,"gold":10,"wood":5,"stone":30,"iron":25,"mana":10},"position":{"x":25,"y":20},"neighbors":["region_1","region_6","region_7","region_20","region_21"],"discoveredAt":1,"developmentLevel":2,"defenseBonus":3,"specialFeatures":["miningComplex"]},{"id":"region_3","name":"\ub3d9\ubd80 \uc232","type":"forest","description":"\uc6b8\ucc3d\ud55c \uc232\uc73c\ub85c \ub36e\uc778 \uc9c0\uc5ed\uc73c\ub85c, \ubaa9\uc7ac\uc640 \ud76c\uadc0\ud55c \uc57d\ucd08\uac00 \ud48d\ubd80\ud569\ub2c8\ub2e4.","controlledBy":"player","cities":["city_3"],"resources":{"food":15,"gold":5,"wood":40,"stone":5,"iron":0,"mana":15},"position":{"x":30,"y":25},"neighbors":["region_1","region_5","region_8","region_22","region_23"],"discoveredAt":1,"developmentLevel":2,"defenseBonus":2,"specialFeatures":["ancientGrove"]},{"id":"region_4","name":"\uc11c\ubd80 \ud574\uc548","type":"coast","description":"\ub113\uc740 \ud574\uc548\uc120\uc744 \uac00\uc9c4 \uc9c0\uc5ed\uc73c\ub85c, \uc5b4\uc5c5\uacfc \ubb34\uc5ed\uc774 \ubc1c\ub2ec\ud588\uc2b5\ub2c8\ub2e4.","controlledBy":"player","cities":[],"resources":{"food":25,"gold":15,"wood":10,"stone":5,"iron":0,"mana":5},"position":{"x":20,"y":25},"neighbors":["region_1","region_9","region_10","region_24","region_25"],"discoveredAt":1,"developmentLevel":1,"defenseBonus":0,"specialFeatures":["harbor"]},{"id":"region_5","name":"\ub0a8\ubd80 \ud3c9\uc6d0","type":"plains","description":"\ub113\uc740 \ucd08\uc6d0\uacfc \ubaa9\ucd08\uc9c0\uac00 \ud3bc\uccd0\uc9c4 \uc9c0\uc5ed\uc73c\ub85c, \ub18d\uc5c5\uacfc \ubaa9\ucd95\uc774 \ubc1c\ub2ec\ud588\uc2b5\ub2c8\ub2e4.","controlledBy":"player","cities":[],"resources":{"food":35,"gold":10,"wood":10,"stone":5,"iron":0,"mana":0},"position":{"x":25,"y":30},"neighbors":["region_1","region_3","region_11","region_26","region_27"],"discoveredAt":1,"developmentLevel":1,"defenseBonus":0,"specialFeatures":["fertileLands"]},{"id":"region_6","name":"\ubd81\uc11c\ubd80 \uace0\uc6d0","type":"highlands","description":"\ub192\uc740 \uace0\uc6d0 \uc9c0\ub300\ub85c, \ubc29\uc5b4\uc5d0 \uc720\ub9ac\ud55c \uc9c0\ud615\uc744 \uac16\ucd94\uace0 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":10,"gold":5,"wood":15,"stone":20,"iron":15,"mana":5},"position":{"x":20,"y":20},"neighbors":["region_2","region_7","region_9","region_28","region_29"],"discoveredAt":5,"developmentLevel":0,"defenseBonus":2,"specialFeatures":["ancientRuins"]},{"id":"region_7","name":"\ubd81\ub3d9\ubd80 \uc124\uc6d0","type":"tundra","description":"\ucd94\uc6b4 \uae30\ud6c4\uc758 \uc124\uc6d0 \uc9c0\ub300\ub85c, \ud76c\uadc0\ud55c \uc790\uc6d0\uc774 \ub9e4\uc7a5\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":5,"gold":5,"wood":10,"stone":15,"iron":10,"mana":20},"position":{"x":30,"y":20},"neighbors":["region_2","region_6","region_8","region_30","region_31"],"discoveredAt":8,"developmentLevel":0,"defenseBonus":1,"specialFeatures":["magicCrystals"]},{"id":"region_8","name":"\ub3d9\ubd80 \uad6d\uacbd","type":"hills","description":"\uad6c\ub989\uc9c0\ub300\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uad6d\uacbd \uc9c0\uc5ed\uc73c\ub85c, \uc774\uc6c3 \uc655\uad6d\uacfc\uc758 \uc811\uacbd\uc9c0\uc785\ub2c8\ub2e4.","controlledBy":"faction_east","cities":[],"resources":{"food":15,"gold":10,"wood":20,"stone":15,"iron":10,"mana":5},"position":{"x":35,"y":25},"neighbors":["region_3","region_7","region_12","region_32","region_33"],"discoveredAt":10,"developmentLevel":2,"defenseBonus":1,"specialFeatures":["borderFortress"]},{"id":"region_9","name":"\uc11c\ubd80 \ud669\ubb34\uc9c0","type":"wasteland","description":"\ucc99\ubc15\ud55c \ud669\ubb34\uc9c0\ub85c, \uc0dd\uc874\ud558\uae30 \uc5b4\ub824\uc6b4 \ud658\uacbd\uc774\uc9c0\ub9cc \ud76c\uadc0\ud55c \uc790\uc6d0\uc774 \uc228\uaca8\uc838 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":5,"gold":5,"wood":5,"stone":10,"iron":15,"mana":15},"position":{"x":15,"y":20},"neighbors":["region_4","region_6","region_10","region_34","region_35"],"discoveredAt":12,"developmentLevel":0,"defenseBonus":1,"specialFeatures":["abandonedMines"]},{"id":"region_10","name":"\ub0a8\uc11c\ubd80 \uc12c","type":"island","description":"\ubcf8\ud1a0\uc5d0\uc11c \ub5a8\uc5b4\uc9c4 \uc791\uc740 \uc12c\uc73c\ub85c, \ud574\uc0c1 \ubb34\uc5ed\uc758 \uc911\uc694\ud55c \uac70\uc810\uc785\ub2c8\ub2e4.","controlledBy":"faction_west","cities":[],"resources":{"food":20,"gold":25,"wood":15,"stone":10,"iron":5,"mana":10},"position":{"x":15,"y":30},"neighbors":["region_4","region_9","region_11","region_36","region_37"],"discoveredAt":15,"developmentLevel":3,"defenseBonus":2,"specialFeatures":["tradingPort"]},{"id":"region_11","name":"\ub0a8\ubd80 \uad6d\uacbd","type":"plains","description":"\ub0a8\ucabd \uc774\uc6c3 \uc655\uad6d\uacfc\uc758 \uc811\uacbd\uc9c0\ub85c, \ube44\uc625\ud55c \ub18d\uacbd\uc9c0\uac00 \ud3bc\uccd0\uc838 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"faction_south","cities":[],"resources":{"food":30,"gold":15,"wood":10,"stone":5,"iron":5,"mana":5},"position":{"x":25,"y":35},"neighbors":["region_5","region_10","region_12","region_38","region_39"],"discoveredAt":18,"developmentLevel":2,"defenseBonus":0,"specialFeatures":["tradingMarket"]},{"id":"region_12","name":"\ub0a8\ub3d9\ubd80 \uc2b5\uc9c0","type":"swamp","description":"\ub113\uc740 \uc2b5\uc9c0\ub300\ub85c, \ub3c5\ud2b9\ud55c \uc0dd\ud0dc\uacc4\uc640 \ud76c\uadc0\ud55c \uc57d\uc7ac\uac00 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":10,"gold":5,"wood":15,"stone":5,"iron":0,"mana":25},"position":{"x":35,"y":35},"neighbors":["region_8","region_11","region_40","region_41"],"discoveredAt":20,"developmentLevel":0,"defenseBonus":2,"specialFeatures":["mysticalBog"]},{"id":"region_13","name":"\ubd81\ubc29 \ubbf8\uc9c0\uc758 \ub545","type":"unknown","description":"\uc544\uc9c1 \ud0d0\ud5d8\ub418\uc9c0 \uc54a\uc740 \ubbf8\uc9c0\uc758 \ub545\uc785\ub2c8\ub2e4.","controlledBy":"undiscovered","cities":[],"resources":{"food":0,"gold":0,"wood":0,"stone":0,"iron":0,"mana":0},"position":{"x":25,"y":10},"neighbors":["region_2","region_42","region_43"],"discoveredAt":0,"developmentLevel":0,"defenseBonus":0,"specialFeatures":[]},{"id":"region_14","name":"\ub3d9\ubc29 \ubbf8\uc9c0\uc758 \ub545","type":"unknown","description":"\uc544\uc9c1 \ud0d0\ud5d8\ub418\uc9c0 \uc54a\uc740 \ubbf8\uc9c0\uc758 \ub545\uc785\ub2c8\ub2e4.","controlledBy":"undiscovered","cities":[],"resources":{"food":0,"gold":0,"wood":0,"stone":0,"iron":0,"mana":0},"position":{"x":40,"y":25},"neighbors":["region_8","region_44","region_45"],"discoveredAt":0,"developmentLevel":0,"defenseBonus":0,"specialFeatures":[]},{"id":"region_15","name":"\ub0a8\ubc29 \ubbf8\uc9c0\uc758 \ub545","type":"unknown","description":"\uc544\uc9c1 \ud0d0\ud5d8\ub418\uc9c0 \uc54a\uc740 \ubbf8\uc9c0\uc758 \ub545\uc785\ub2c8\ub2e4.","controlledBy":"undiscovered","cities":[],"resources":{"food":0,"gold":0,"wood":0,"stone":0,"iron":0,"mana":0},"position":{"x":25,"y":40},"neighbors":["region_11","region_46","region_47"],"discoveredAt":0,"developmentLevel":0,"defenseBonus":0,"specialFeatures":[]},{"id":"region_16","name":"\uc911\uc559 \uad6c\ub989\uc9c0","type":"hills","description":"\uc644\ub9cc\ud55c \uad6c\ub989\uc9c0\ub300\ub85c, \ub2e4\uc591\ud55c \uc790\uc6d0\uc774 \uace0\ub974\uac8c \ubd84\ud3ec\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"player","cities":[],"resources":{"food":20,"gold":15,"wood":15,"stone":15,"iron":10,"mana":5},"position":{"x":27,"y":27},"neighbors":["region_1","region_17","region_48"],"discoveredAt":2,"developmentLevel":2,"defenseBonus":1,"specialFeatures":["watchTower"]},{"id":"region_17","name":"\uc911\uc559 \ud638\uc218","type":"lake","description":"\ub9d1\uc740 \ubb3c\uc774 \ud48d\ubd80\ud55c \ud638\uc218 \uc9c0\uc5ed\uc73c\ub85c, \uc5b4\uc5c5\uacfc \uad00\uad11\uc774 \ubc1c\ub2ec\ud588\uc2b5\ub2c8\ub2e4.","controlledBy":"player","cities":[],"resources":{"food":25,"gold":15,"wood":10,"stone":5,"iron":0,"mana":10},"position":{"x":23,"y":27},"neighbors":["region_1","region_16","region_18","region_49"],"discoveredAt":2,"developmentLevel":2,"defenseBonus":0,"specialFeatures":["fishingVillage"]},{"id":"region_18","name":"\uc911\uc559 \ud3ec\ub3c4\uc6d0","type":"vineyard","description":"\ube44\uc625\ud55c \ud1a0\uc591\uc5d0\uc11c \uace0\uae09 \ud3ec\ub3c4\uac00 \uc7ac\ubc30\ub418\ub294 \uc9c0\uc5ed\uc73c\ub85c, \uc640\uc778 \uc0dd\uc0b0\uc73c\ub85c \uc720\uba85\ud569\ub2c8\ub2e4.","controlledBy":"player","cities":[],"resources":{"food":20,"gold":25,"wood":10,"stone":5,"iron":0,"mana":5},"position":{"x":23,"y":23},"neighbors":["region_1","region_17","region_19","region_50"],"discoveredAt":3,"developmentLevel":3,"defenseBonus":0,"specialFeatures":["luxuryGoods"]},{"id":"region_19","name":"\uc911\uc559 \uad11\uc0b0","type":"mines","description":"\ub2e4\uc591\ud55c \uad11\ubb3c\uc774 \ud48d\ubd80\ud558\uac8c \ub9e4\uc7a5\ub41c \uc9c0\uc5ed\uc73c\ub85c, \ucc44\uad11\uc5c5\uc774 \ubc1c\ub2ec\ud588\uc2b5\ub2c8\ub2e4.","controlledBy":"player","cities":[],"resources":{"food":5,"gold":20,"wood":5,"stone":25,"iron":30,"mana":10},"position":{"x":27,"y":23},"neighbors":["region_1","region_18","region_51"],"discoveredAt":3,"developmentLevel":2,"defenseBonus":1,"specialFeatures":["deepMines"]},{"id":"region_20","name":"\ubd81\ubd80 \ube59\ud558","type":"glacier","description":"\uc601\uad6c\uc801\uc778 \uc5bc\uc74c\uc73c\ub85c \ub36e\uc778 \uc9c0\uc5ed\uc73c\ub85c, \ud76c\uadc0\ud55c \ub9c8\ubc95 \uc790\uc6d0\uc774 \ub9e4\uc7a5\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":2,"gold":5,"wood":0,"stone":10,"iron":5,"mana":35},"position":{"x":22,"y":15},"neighbors":["region_2","region_21","region_52"],"discoveredAt":0,"developmentLevel":0,"defenseBonus":2,"specialFeatures":["frozenMagic"]},{"id":"region_21","name":"\ubd81\ubd80 \ud654\uc0b0","type":"volcano","description":"\ud65c\ud654\uc0b0\uc774 \uc788\ub294 \uc704\ud5d8\ud55c \uc9c0\uc5ed\uc73c\ub85c, \uadc0\uc911\ud55c \uad11\ubb3c\uacfc \ub9c8\ubc95 \uc790\uc6d0\uc774 \ud48d\ubd80\ud569\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":3,"gold":10,"wood":0,"stone":30,"iron":25,"mana":30},"position":{"x":28,"y":15},"neighbors":["region_2","region_20","region_53"],"discoveredAt":0,"developmentLevel":0,"defenseBonus":3,"specialFeatures":["volcanicForge"]},{"id":"region_22","name":"\ub3d9\ubd80 \uc815\uae00","type":"jungle","description":"\uc6b8\ucc3d\ud55c \uc5f4\ub300 \uc6b0\ub9bc\uc73c\ub85c, \ud76c\uadc0\ud55c \uc57d\uc7ac\uc640 \ub3c5\ud2b9\ud55c \uc0dd\ubb3c\uc774 \uc11c\uc2dd\ud569\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":20,"gold":10,"wood":35,"stone":5,"iron":0,"mana":20},"position":{"x":35,"y":22},"neighbors":["region_3","region_23","region_54"],"discoveredAt":0,"developmentLevel":0,"defenseBonus":2,"specialFeatures":["medicinalPlants"]},{"id":"region_23","name":"\ub3d9\ubd80 \uacc4\uace1","type":"valley","description":"\uae4a\uc740 \uacc4\uace1\uc73c\ub85c \ub458\ub7ec\uc2f8\uc778 \uc9c0\uc5ed\uc73c\ub85c, \ubc29\uc5b4\uc5d0 \uc720\ub9ac\ud558\uace0 \ube44\uc625\ud55c \ud1a0\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"faction_east","cities":[],"resources":{"food":25,"gold":15,"wood":20,"stone":15,"iron":10,"mana":5},"position":{"x":35,"y":28},"neighbors":["region_3","region_22","region_55"],"discoveredAt":0,"developmentLevel":2,"defenseBonus":3,"specialFeatures":["hiddenVillage"]},{"id":"region_24","name":"\uc11c\ubd80 \uc0ac\ub9c9","type":"desert","description":"\uac74\uc870\ud55c \uc0ac\ub9c9 \uc9c0\uc5ed\uc73c\ub85c, \uadc0\uc911\ud55c \uad11\ubb3c\uacfc \uc624\uc544\uc2dc\uc2a4\uac00 \uc810\uc7ac\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":5,"gold":20,"wood":0,"stone":15,"iron":10,"mana":15},"position":{"x":15,"y":22},"neighbors":["region_4","region_25","region_56"],"discoveredAt":0,"developmentLevel":0,"defenseBonus":1,"specialFeatures":["oasis"]},{"id":"region_25","name":"\uc11c\ubd80 \uc808\ubcbd","type":"cliffs","description":"\uac00\ud30c\ub978 \uc808\ubcbd\uc774 \ubc14\ub2e4\uc640 \ub9de\ub2ff\uc740 \uc9c0\uc5ed\uc73c\ub85c, \ubc29\uc5b4\uc5d0 \uc720\ub9ac\ud558\uace0 \uacbd\uad00\uc774 \ub6f0\uc5b4\ub0a9\ub2c8\ub2e4.","controlledBy":"faction_west","cities":[],"resources":{"food":15,"gold":20,"wood":10,"stone":25,"iron":5,"mana":10},"position":{"x":15,"y":28},"neighbors":["region_4","region_24","region_57"],"discoveredAt":0,"developmentLevel":1,"defenseBonus":4,"specialFeatures":["lighthouse"]},{"id":"region_26","name":"\ub0a8\ubd80 \ucd08\uc6d0","type":"savanna","description":"\ub113\uc740 \ucd08\uc6d0 \uc9c0\ub300\ub85c, \ubaa9\ucd95\uc5c5\uc774 \ubc1c\ub2ec\ud558\uace0 \ub2e4\uc591\ud55c \uc57c\uc0dd \ub3d9\ubb3c\uc774 \uc11c\uc2dd\ud569\ub2c8\ub2e4.","controlledBy":"neutral","cities":[],"resources":{"food":30,"gold":10,"wood":15,"stone":5,"iron":5,"mana":5},"position":{"x":22,"y":35},"neighbors":["region_5","region_27","region_58"],"discoveredAt":0,"developmentLevel":1,"defenseBonus":0,"specialFeatures":["huntingGrounds"]},{"id":"region_27","name":"\ub0a8\ubd80 \uad6c\ub989\uc9c0","type":"hills","description":"\uc644\ub9cc\ud55c \uad6c\ub989\uc9c0\ub300\ub85c, \ud3ec\ub3c4\uc6d0\uacfc \uc62c\ub9ac\ube0c \ub18d\uc7a5\uc774 \ubc1c\ub2ec\ud588\uc2b5\ub2c8\ub2e4.","controlledBy":"faction_south","cities":[],"resources":{"food":25,"gold":20,"wood":15,"stone":10,"iron":5,"mana":5},"position":{"x":28,"y":35},"neighbors":["region_5","region_26","region_59"],"discoveredAt":0,"developmentLevel":2,"defenseBonus":1,"specialFeatures":["vineyards"]}]'),g=JSON.parse('[{"id":"player","name":"\uc544\uc2a4\uac00\ub974\ub4dc \uc655\uad6d","description":"\ud50c\ub808\uc774\uc5b4\uac00 \ud1b5\uce58\ud558\ub294 \uc911\uc559 \uc655\uad6d\uc73c\ub85c, \uade0\ud615 \uc7a1\ud78c \ubc1c\uc804\uc744 \ucd94\uad6c\ud569\ub2c8\ub2e4.","leader":{"name":"\ud50c\ub808\uc774\uc5b4","title":"\uad6d\uc655","personality":"player_controlled","traits":[]},"color":"#4a90e2","banner":"crown_and_sword","startingResources":{"gold":500,"food":300,"population":1000,"army":100,"wood":100,"stone":100,"iron":50,"mana":30},"startingTerritories":["region_1","region_2","region_3","region_4","region_5"],"startingCities":["city_1","city_2","city_3"],"specialAbilities":[{"id":"royal_decree","name":"\uc655\uc758 \uce59\ub839","description":"\ud55c \ud134 \ub3d9\uc548 \ubaa8\ub4e0 \uc790\uc6d0 \uc0dd\uc0b0\ub7c9\uc774 50% \uc99d\uac00\ud569\ub2c8\ub2e4.","cooldown":10}],"aiControlled":false},{"id":"faction_east","name":"\uc624\ub9ac\uc5d4\ud2b8 \uc81c\uad6d","description":"\ub3d9\ucabd\uc5d0 \uc704\uce58\ud55c \uac15\ub825\ud55c \uc81c\uad6d\uc73c\ub85c, \uae30\uc220\uacfc \ub9c8\ubc95\uc744 \uc911\uc2dc\ud569\ub2c8\ub2e4.","leader":{"name":"\ud669\uc81c \uc468\ub9ac","title":"\ucc9c\uc0c1\uc758 \ud669\uc81c","personality":"expansionist","traits":["ambitious","scholarly","disciplined"]},"color":"#d0021b","banner":"dragon_imperial","startingResources":{"gold":600,"food":250,"population":1200,"army":150,"wood":80,"stone":120,"iron":70,"mana":100},"startingTerritories":["region_8"],"startingCities":[],"specialAbilities":[{"id":"imperial_edict","name":"\ud669\uc81c\uc758 \uce59\ub839","description":"\uc989\uc2dc 50\uc758 \uad70\uc0ac\ub825\uc744 \uc18c\ud658\ud569\ub2c8\ub2e4.","cooldown":8}],"diplomacy":{"player":{"status":"neutral","relation":0,"treaties":[]},"faction_west":{"status":"hostile","relation":-30,"treaties":[]},"faction_south":{"status":"neutral","relation":10,"treaties":["non_aggression"]},"faction_north":{"status":"friendly","relation":30,"treaties":["trade","alliance"]}},"objectives":[{"id":"technological_supremacy","description":"\uae30\uc220 \uc5f0\uad6c\uc5d0 \uc9d1\uc911\ud558\uc5ec \uae30\uc220\uc801 \uc6b0\uc704\ub97c \ud655\ubcf4\ud569\ub2c8\ub2e4.","priority":8},{"id":"magical_dominance","description":"\ub9c8\ubc95 \uc790\uc6d0\uc744 \ud655\ubcf4\ud558\uace0 \ub9c8\ubc95 \uae30\uc220\uc744 \ubc1c\uc804\uc2dc\ud0b5\ub2c8\ub2e4.","priority":9},{"id":"western_expansion","description":"\uc11c\ucabd\uc73c\ub85c \uc601\ud1a0\ub97c \ud655\uc7a5\ud569\ub2c8\ub2e4.","priority":6}],"aiControlled":true,"aiPersonality":{"aggressiveness":6,"expansionism":8,"diplomaticFocus":5,"economicFocus":7,"militaryFocus":7,"technologicalFocus":9,"magicalFocus":8}},{"id":"faction_west","name":"\ud574\uc0c1 \uc5f0\ud569","description":"\uc11c\ucabd \ud574\uc548\uacfc \uc12c\uc744 \uc9c0\ubc30\ud558\ub294 \ubb34\uc5ed \uc911\uc2ec\uc758 \uc5f0\ud569\uad6d\uac00\uc785\ub2c8\ub2e4.","leader":{"name":"\ucd1d\ub3c5 \ub9c8\ub974\ucf54","title":"\ud574\uc0c1 \uc5f0\ud569 \ucd1d\ub3c5","personality":"merchant","traits":["charismatic","greedy","cunning"]},"color":"#7ed321","banner":"ship_and_coin","startingResources":{"gold":800,"food":350,"population":800,"army":80,"wood":150,"stone":60,"iron":40,"mana":20},"startingTerritories":["region_10"],"startingCities":[],"specialAbilities":[{"id":"trade_monopoly","name":"\ubb34\uc5ed \ub3c5\uc810","description":"3\ud134 \ub3d9\uc548 \uae08 \uc0dd\uc0b0\ub7c9\uc774 100% \uc99d\uac00\ud569\ub2c8\ub2e4.","cooldown":12}],"diplomacy":{"player":{"status":"neutral","relation":10,"treaties":["trade"]},"faction_east":{"status":"hostile","relation":-30,"treaties":[]},"faction_south":{"status":"friendly","relation":40,"treaties":["trade","alliance"]},"faction_north":{"status":"neutral","relation":0,"treaties":["trade"]}},"objectives":[{"id":"trade_dominance","description":"\ubb34\uc5ed \ub124\ud2b8\uc6cc\ud06c\ub97c \ud655\uc7a5\ud558\uace0 \uacbd\uc81c\uc801 \uc6b0\uc704\ub97c \ud655\ubcf4\ud569\ub2c8\ub2e4.","priority":10},{"id":"naval_supremacy","description":"\ud574\uad70\ub825\uc744 \uac15\ud654\ud558\uace0 \ud574\uc0c1 \ud1b5\uc81c\uad8c\uc744 \ud655\ubcf4\ud569\ub2c8\ub2e4.","priority":8},{"id":"resource_acquisition","description":"\ubd80\uc871\ud55c \uc790\uc6d0\uc744 \ud655\ubcf4\ud558\uae30 \uc704\ud574 \ub0b4\ub959\uc73c\ub85c \ud655\uc7a5\ud569\ub2c8\ub2e4.","priority":7}],"aiControlled":true,"aiPersonality":{"aggressiveness":4,"expansionism":6,"diplomaticFocus":8,"economicFocus":10,"militaryFocus":5,"technologicalFocus":7,"magicalFocus":3}},{"id":"faction_south","name":"\uba54\ub9ac\ub514\uc548 \uc5f0\ub9f9","description":"\ub0a8\ucabd\uc758 \ube44\uc625\ud55c \ud3c9\uc6d0\uc744 \uc9c0\ubc30\ud558\ub294 \ub18d\uc5c5 \uc911\uc2ec\uc758 \uc5f0\ub9f9\uad6d\uac00\uc785\ub2c8\ub2e4.","leader":{"name":"\uc5ec\uc655 \uc544\ub378\ub77c","title":"\uba54\ub9ac\ub514\uc548\uc758 \uc5ec\uc655","personality":"peaceful","traits":["kind","patient","diplomatic"]},"color":"#f8e71c","banner":"wheat_and_sun","startingResources":{"gold":400,"food":600,"population":1100,"army":90,"wood":120,"stone":70,"iron":30,"mana":40},"startingTerritories":["region_11"],"startingCities":[],"specialAbilities":[{"id":"bountiful_harvest","name":"\ud48d\uc694\ub85c\uc6b4 \uc218\ud655","description":"\uc989\uc2dc 200\uc758 \uc2dd\ub7c9\uc744 \uc0dd\uc0b0\ud569\ub2c8\ub2e4.","cooldown":8}],"diplomacy":{"player":{"status":"friendly","relation":30,"treaties":["trade","non_aggression"]},"faction_east":{"status":"neutral","relation":10,"treaties":["non_aggression"]},"faction_west":{"status":"friendly","relation":40,"treaties":["trade","alliance"]},"faction_north":{"status":"neutral","relation":0,"treaties":[]}},"objectives":[{"id":"agricultural_dominance","description":"\ub18d\uc5c5 \uae30\uc220\uc744 \ubc1c\uc804\uc2dc\ud0a4\uace0 \uc2dd\ub7c9 \uc0dd\uc0b0\ub7c9\uc744 \uadf9\ub300\ud654\ud569\ub2c8\ub2e4.","priority":10},{"id":"peaceful_expansion","description":"\uc678\uad50\uc640 \ubb34\uc5ed\uc744 \ud1b5\ud574 \ud3c9\ud654\uc801\uc73c\ub85c \uc601\ud5a5\ub825\uc744 \ud655\uc7a5\ud569\ub2c8\ub2e4.","priority":9},{"id":"cultural_development","description":"\ubb38\ud654\uc640 \uc608\uc220\uc744 \ubc1c\uc804\uc2dc\ucf1c \uad6d\ubbfc\uc758 \ud589\ubcf5\ub3c4\ub97c \ub192\uc785\ub2c8\ub2e4.","priority":8}],"aiControlled":true,"aiPersonality":{"aggressiveness":2,"expansionism":4,"diplomaticFocus":9,"economicFocus":8,"militaryFocus":3,"technologicalFocus":6,"magicalFocus":5}},{"id":"faction_north","name":"\ubcf4\ub808\uc54c \ubd80\uc871","description":"\ubd81\ucabd\uc758 \ucd94\uc6b4 \uc9c0\uc5ed\uc5d0 \uc0ac\ub294 \uc804\uc0ac \ubd80\uc871\uc73c\ub85c, \uac15\uc778\ud55c \uc804\ud22c\ub825\uc744 \uc790\ub791\ud569\ub2c8\ub2e4.","leader":{"name":"\uc871\uc7a5 \uc6b8\ud504\uac00\ub974","title":"\ubcf4\ub808\uc54c\uc758 \uc871\uc7a5","personality":"aggressive","traits":["brave","brutal","honorable"]},"color":"#9013fe","banner":"wolf_and_axe","startingResources":{"gold":300,"food":200,"population":700,"army":200,"wood":90,"stone":150,"iron":100,"mana":60},"startingTerritories":[],"startingCities":[],"specialAbilities":[{"id":"berserker_rage","name":"\uad11\uc804\uc0ac\uc758 \ubd84\ub178","description":"3\ud134 \ub3d9\uc548 \uad70\uc0ac\ub825\uc774 50% \uc99d\uac00\ud569\ub2c8\ub2e4.","cooldown":10}],"diplomacy":{"player":{"status":"hostile","relation":-20,"treaties":[]},"faction_east":{"status":"friendly","relation":30,"treaties":["trade","alliance"]},"faction_west":{"status":"neutral","relation":0,"treaties":["trade"]},"faction_south":{"status":"neutral","relation":0,"treaties":[]}},"objectives":[{"id":"military_dominance","description":"\uac15\ub825\ud55c \uad70\uc0ac\ub825\uc744 \ubc14\ud0d5\uc73c\ub85c \uc601\ud1a0\ub97c \ud655\uc7a5\ud569\ub2c8\ub2e4.","priority":10},{"id":"resource_acquisition","description":"\ubd80\uc871\ud55c \uc790\uc6d0\uc744 \ud655\ubcf4\ud558\uae30 \uc704\ud574 \ub0a8\ucabd\uc73c\ub85c \ud655\uc7a5\ud569\ub2c8\ub2e4.","priority":8},{"id":"ancient_knowledge","description":"\uace0\ub300 \uc720\uc801\uc744 \ud0d0\ud5d8\ud558\uc5ec \uc783\uc5b4\ubc84\ub9b0 \uc9c0\uc2dd\uc744 \ucc3e\uc2b5\ub2c8\ub2e4.","priority":7}],"aiControlled":true,"aiPersonality":{"aggressiveness":9,"expansionism":7,"diplomaticFocus":3,"economicFocus":4,"militaryFocus":10,"technologicalFocus":5,"magicalFocus":6}}]'),v=JSON.parse('[{"id":"agriculture","name":"\ub18d\uc5c5","description":"\uae30\ubcf8\uc801\uc778 \ub18d\uc5c5 \uae30\uc220\ub85c, \uc2dd\ub7c9 \uc0dd\uc0b0\ub7c9\uc744 \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.","category":"economy","tier":1,"cost":{"research_points":10},"prerequisites":[],"effects":{"food_production":10,"population_growth":5},"unlocksBuildings":["farm"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/agriculture.png"},{"id":"animal_husbandry","name":"\ubaa9\ucd95","description":"\uac00\ucd95\uc744 \uae30\ub974\ub294 \uae30\uc220\ub85c, \uc2dd\ub7c9 \uc0dd\uc0b0\ub7c9\uacfc \uc778\uad6c \uc131\uc7a5\ub960\uc744 \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.","category":"economy","tier":1,"cost":{"research_points":15},"prerequisites":["agriculture"],"effects":{"food_production":15,"population_growth":10},"unlocksBuildings":["pasture"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/animal_husbandry.png"},{"id":"irrigation","name":"\uad00\uac1c","description":"\ubb3c\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \uacf5\uae09\ud558\ub294 \uae30\uc220\ub85c, \ub18d\uc5c5 \uc0dd\uc0b0\uc131\uc744 \ud06c\uac8c \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.","category":"economy","tier":2,"cost":{"research_points":25},"prerequisites":["agriculture"],"effects":{"food_production":25,"farm_output":20},"unlocksBuildings":["irrigation_system"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/irrigation.png"},{"id":"crop_rotation","name":"\uc724\uc791","description":"\uc791\ubb3c\uc744 \ubc88\uac08\uc544 \uc2ec\ub294 \uae30\uc220\ub85c, \ud1a0\uc9c0\uc758 \uc0dd\uc0b0\uc131\uc744 \uc720\uc9c0\ud558\uace0 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.","category":"economy","tier":3,"cost":{"research_points":40},"prerequisites":["irrigation"],"effects":{"food_production":30,"farm_output":30},"unlocksBuildings":["advanced_farm"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/crop_rotation.png"},{"id":"mining","name":"\ucc44\uad11","description":"\uad11\ubb3c\uc744 \ucc44\ucde8\ud558\ub294 \uae30\uc220\ub85c, \ub3cc\uacfc \ucca0 \uc0dd\uc0b0\ub7c9\uc744 \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4.","category":"economy","tier":1,"cost":{"research_points":15},"prerequisites":[],"effects":{"stone_production":20,"iron_production":10},"unlocksBuildings":["mine"],"unlocksUnits":[],"unlocksResources":["iron"],"iconPath":"icons/tech/mining.png"},{"id":"bronze_working","name":"\uccad\ub3d9 \uac00\uacf5","description":"\uccad\ub3d9\uc744 \ub2e4\ub8e8\ub294 \uae30\uc220\ub85c, \ub354 \ub098\uc740 \ub3c4\uad6c\uc640 \ubb34\uae30\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":1,"cost":{"research_points":20},"prerequisites":["mining"],"effects":{"unit_attack":10,"production_efficiency":10},"unlocksBuildings":["forge"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/bronze_working.png"},{"id":"iron_working","name":"\ucca0 \uac00\uacf5","description":"\ucca0\uc744 \ub2e4\ub8e8\ub294 \uae30\uc220\ub85c, \uac15\ub825\ud55c \ubb34\uae30\uc640 \ub3c4\uad6c\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":2,"cost":{"research_points":30},"prerequisites":["bronze_working"],"effects":{"unit_attack":20,"unit_defense":10,"production_efficiency":15},"unlocksBuildings":["smithy"],"unlocksUnits":["swordsman"],"unlocksResources":[],"iconPath":"icons/tech/iron_working.png"},{"id":"steel_making","name":"\uc81c\uac15","description":"\uac15\ucca0\uc744 \uc81c\uc870\ud558\ub294 \uae30\uc220\ub85c, \ucd5c\uace0\uae09 \ubb34\uae30\uc640 \uac11\uc637\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":3,"cost":{"research_points":50},"prerequisites":["iron_working"],"effects":{"unit_attack":30,"unit_defense":20,"production_efficiency":20},"unlocksBuildings":["steel_forge"],"unlocksUnits":["knight"],"unlocksResources":["steel"],"iconPath":"icons/tech/steel_making.png"},{"id":"archery","name":"\uad81\uc220","description":"\ud65c\uacfc \ud654\uc0b4\uc744 \uc0ac\uc6a9\ud558\ub294 \uae30\uc220\ub85c, \uc6d0\uac70\ub9ac \uacf5\uaca9\uc774 \uac00\ub2a5\ud55c \uc720\ub2db\uc744 \uc0dd\uc0b0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":1,"cost":{"research_points":15},"prerequisites":[],"effects":{"ranged_attack":20},"unlocksBuildings":["archery_range"],"unlocksUnits":["archer"],"unlocksResources":[],"iconPath":"icons/tech/archery.png"},{"id":"machinery","name":"\uae30\uacc4\ud559","description":"\ubcf5\uc7a1\ud55c \uae30\uacc4 \uc7a5\uce58\ub97c \ub9cc\ub4dc\ub294 \uae30\uc220\ub85c, \ub354 \uac15\ub825\ud55c \uc6d0\uac70\ub9ac \ubb34\uae30\ub97c \uc0dd\uc0b0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":2,"cost":{"research_points":35},"prerequisites":["archery"],"effects":{"ranged_attack":30,"production_efficiency":15},"unlocksBuildings":["workshop"],"unlocksUnits":["crossbowman"],"unlocksResources":[],"iconPath":"icons/tech/machinery.png"},{"id":"military_tactics","name":"\uad70\uc0ac \uc804\uc220","description":"\uc870\uc9c1\uc801\uc778 \uc804\ud22c \uc804\uc220\ub85c, \uad70\uc0ac \uc720\ub2db\uc758 \ud6a8\uc728\uc131\uc744 \ub192\uc785\ub2c8\ub2e4.","category":"military","tier":1,"cost":{"research_points":20},"prerequisites":[],"effects":{"unit_attack":10,"unit_defense":10,"army_morale":15},"unlocksBuildings":["barracks"],"unlocksUnits":["spearman"],"unlocksResources":[],"iconPath":"icons/tech/military_tactics.png"},{"id":"horseback_riding","name":"\uc2b9\ub9c8","description":"\ub9d0\uc744 \ud0c0\uace0 \uc804\ud22c\ud558\ub294 \uae30\uc220\ub85c, \uae30\ub3d9\uc131\uc774 \ub192\uc740 \uc720\ub2db\uc744 \uc0dd\uc0b0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":2,"cost":{"research_points":30},"prerequisites":["military_tactics","animal_husbandry"],"effects":{"unit_movement":50,"cavalry_attack":20},"unlocksBuildings":["stable"],"unlocksUnits":["cavalry"],"unlocksResources":[],"iconPath":"icons/tech/horseback_riding.png"},{"id":"chivalry","name":"\uae30\uc0ac\ub3c4","description":"\uae30\uc0ac\uc758 \uc804\ud22c \uae30\uc220\uacfc \uba85\uc608 \uaddc\ubc94\uc73c\ub85c, \uac15\ub825\ud55c \uc911\uac11 \uae30\ubcd1\uc744 \uc0dd\uc0b0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":3,"cost":{"research_points":45},"prerequisites":["horseback_riding","iron_working"],"effects":{"cavalry_attack":30,"cavalry_defense":20,"loyalty":10},"unlocksBuildings":["castle"],"unlocksUnits":["knight"],"unlocksResources":[],"iconPath":"icons/tech/chivalry.png"},{"id":"engineering","name":"\uacf5\ud559","description":"\uac74\ucd95\uacfc \uae30\uacc4 \uc124\uacc4 \uae30\uc220\ub85c, \ub354 \ub098\uc740 \uac74\ubb3c\uacfc \uacf5\uc131 \ubb34\uae30\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":2,"cost":{"research_points":35},"prerequisites":["mathematics","iron_working"],"effects":{"building_durability":30,"construction_speed":20},"unlocksBuildings":["siege_workshop","aqueduct"],"unlocksUnits":["catapult"],"unlocksResources":[],"iconPath":"icons/tech/engineering.png"},{"id":"physics","name":"\ubb3c\ub9ac\ud559","description":"\uc790\uc5f0 \ubc95\uce59\uc744 \uc774\ud574\ud558\ub294 \ud559\ubb38\uc73c\ub85c, \ub354 \ubc1c\uc804\ub41c \uae30\uacc4\uc640 \ubb34\uae30\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"science","tier":3,"cost":{"research_points":50},"prerequisites":["engineering","mathematics"],"effects":{"research_efficiency":20,"siege_attack":30},"unlocksBuildings":["university"],"unlocksUnits":["trebuchet"],"unlocksResources":[],"iconPath":"icons/tech/physics.png"},{"id":"sailing","name":"\ud56d\ud574","description":"\ubc30\ub97c \ub9cc\ub4e4\uace0 \uc870\uc885\ud558\ub294 \uae30\uc220\ub85c, \ud574\uc0c1 \uc774\ub3d9\uacfc \uc5b4\uc5c5\uc774 \uac00\ub2a5\ud574\uc9d1\ub2c8\ub2e4.","category":"economy","tier":1,"cost":{"research_points":15},"prerequisites":[],"effects":{"naval_movement":30,"food_from_fishing":20},"unlocksBuildings":["harbor"],"unlocksUnits":["fishing_boat"],"unlocksResources":[],"iconPath":"icons/tech/sailing.png"},{"id":"shipbuilding","name":"\uc870\uc120","description":"\ub354 \ud070 \ubc30\ub97c \ub9cc\ub4dc\ub294 \uae30\uc220\ub85c, \ud574\uc0c1 \uc804\ud22c\uc640 \ubb34\uc5ed\uc774 \uac00\ub2a5\ud574\uc9d1\ub2c8\ub2e4.","category":"military","tier":2,"cost":{"research_points":30},"prerequisites":["sailing"],"effects":{"naval_attack":20,"naval_defense":20,"naval_capacity":30},"unlocksBuildings":["shipyard"],"unlocksUnits":["galley"],"unlocksResources":[],"iconPath":"icons/tech/shipbuilding.png"},{"id":"navigation","name":"\ud56d\ubc95","description":"\ubc14\ub2e4\uc5d0\uc11c \ubc29\ud5a5\uc744 \ucc3e\ub294 \uae30\uc220\ub85c, \ub354 \ud6a8\uc728\uc801\uc778 \ud574\uc0c1 \uc774\ub3d9\uacfc \uc804\ud22c\uac00 \uac00\ub2a5\ud574\uc9d1\ub2c8\ub2e4.","category":"science","tier":3,"cost":{"research_points":45},"prerequisites":["shipbuilding","astronomy"],"effects":{"naval_movement":50,"naval_attack":30,"trade_efficiency":20},"unlocksBuildings":["lighthouse"],"unlocksUnits":["warship"],"unlocksResources":[],"iconPath":"icons/tech/navigation.png"},{"id":"trade","name":"\ubb34\uc5ed","description":"\uc0c1\ud488\uc744 \uad50\ud658\ud558\ub294 \uccb4\uacc4\uc801\uc778 \ubc29\ubc95\uc73c\ub85c, \uacbd\uc81c \ubc1c\uc804\uc744 \ucd09\uc9c4\ud569\ub2c8\ub2e4.","category":"economy","tier":1,"cost":{"research_points":15},"prerequisites":[],"effects":{"gold_income":20,"diplomatic_influence":10},"unlocksBuildings":["marketplace"],"unlocksUnits":["trade_ship"],"unlocksResources":["luxury_goods"],"iconPath":"icons/tech/trade.png"},{"id":"currency","name":"\ud654\ud3d0","description":"\uac00\uce58 \uad50\ud658\uc758 \ud45c\uc900\ud654\ub41c \uc218\ub2e8\uc73c\ub85c, \uacbd\uc81c \ud65c\ub3d9\uc744 \ub354\uc6b1 \ud6a8\uc728\uc801\uc73c\ub85c \ub9cc\ub4ed\ub2c8\ub2e4.","category":"economy","tier":2,"cost":{"research_points":25},"prerequisites":["trade"],"effects":{"gold_income":30,"trade_efficiency":25,"tax_efficiency":20},"unlocksBuildings":["bank"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/currency.png"},{"id":"banking","name":"\uc740\ud589\uc5c5","description":"\uc790\uae08\uc744 \uad00\ub9ac\ud558\uace0 \ub300\ucd9c\ud558\ub294 \uc2dc\uc2a4\ud15c\uc73c\ub85c, \uacbd\uc81c \uc131\uc7a5\uc744 \uac00\uc18d\ud654\ud569\ub2c8\ub2e4.","category":"economy","tier":3,"cost":{"research_points":40},"prerequisites":["currency"],"effects":{"gold_income":40,"trade_efficiency":30,"interest_income":15},"unlocksBuildings":["national_bank"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/banking.png"},{"id":"writing","name":"\ubb38\uc790","description":"\uc815\ubcf4\ub97c \uae30\ub85d\ud558\uace0 \uc804\ub2ec\ud558\ub294 \uc2dc\uc2a4\ud15c\uc73c\ub85c, \uc9c0\uc2dd\uc758 \ucd95\uc801\uacfc \uc804\ud30c\uac00 \uac00\ub2a5\ud574\uc9d1\ub2c8\ub2e4.","category":"science","tier":1,"cost":{"research_points":10},"prerequisites":[],"effects":{"research_efficiency":20,"diplomatic_influence":15},"unlocksBuildings":["library"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/writing.png"},{"id":"mathematics","name":"\uc218\ud559","description":"\uc218\uc640 \uacf5\uac04\uc744 \uc5f0\uad6c\ud558\ub294 \ud559\ubb38\uc73c\ub85c, \uacfc\ud559\uacfc \uacf5\ud559\uc758 \uae30\ucd08\uac00 \ub429\ub2c8\ub2e4.","category":"science","tier":2,"cost":{"research_points":25},"prerequisites":["writing"],"effects":{"research_efficiency":25,"construction_efficiency":15,"tax_efficiency":10},"unlocksBuildings":["academy"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/mathematics.png"},{"id":"astronomy","name":"\ucc9c\ubb38\ud559","description":"\ucc9c\uccb4\ub97c \uad00\uce21\ud558\uace0 \uc5f0\uad6c\ud558\ub294 \ud559\ubb38\uc73c\ub85c, \ud56d\ud574\uc640 \uc2dc\uac04 \uce21\uc815\uc5d0 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.","category":"science","tier":2,"cost":{"research_points":30},"prerequisites":["mathematics"],"effects":{"research_efficiency":20,"naval_movement":20,"exploration_speed":30},"unlocksBuildings":["observatory"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/astronomy.png"},{"id":"philosophy","name":"\ucca0\ud559","description":"\uc9c0\uc2dd, \ud604\uc2e4, \uc874\uc7ac\uc758 \ubcf8\uc9c8\uc744 \ud0d0\uad6c\ud558\ub294 \ud559\ubb38\uc73c\ub85c, \uc0ac\ud68c\uc640 \ubb38\ud654 \ubc1c\uc804\uc5d0 \uae30\uc5ec\ud569\ub2c8\ub2e4.","category":"culture","tier":2,"cost":{"research_points":30},"prerequisites":["writing"],"effects":{"research_efficiency":20,"happiness":10,"cultural_influence":20},"unlocksBuildings":["temple"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/philosophy.png"},{"id":"education","name":"\uad50\uc721","description":"\uc9c0\uc2dd\uacfc \uae30\uc220\uc744 \uccb4\uacc4\uc801\uc73c\ub85c \uc804\uc218\ud558\ub294 \uc2dc\uc2a4\ud15c\uc73c\ub85c, \uc0ac\ud68c \ubc1c\uc804\uc758 \ud575\uc2ec\uc785\ub2c8\ub2e4.","category":"culture","tier":3,"cost":{"research_points":40},"prerequisites":["philosophy","mathematics"],"effects":{"research_efficiency":30,"happiness":15,"population_growth":10},"unlocksBuildings":["school","university"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/education.png"},{"id":"magic","name":"\ub9c8\ubc95","description":"\uc790\uc5f0\uc758 \uc2e0\ube44\ud55c \ud798\uc744 \ub2e4\ub8e8\ub294 \uae30\uc220\ub85c, \ud2b9\uc218\ud55c \ub2a5\ub825\uacfc \uc720\ub2db\uc744 \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"arcane","tier":2,"cost":{"research_points":35,"mana":50},"prerequisites":["mysticism"],"effects":{"mana_production":30,"magical_attack":20,"spell_efficiency":20},"unlocksBuildings":["mage_tower"],"unlocksUnits":["mage"],"unlocksResources":["magical_essence"],"iconPath":"icons/tech/magic.png"},{"id":"mysticism","name":"\uc2e0\ube44\uc8fc\uc758","description":"\ucd08\uc790\uc5f0\uc801\uc778 \ud604\uc0c1\uacfc \uc601\uc801 \uc138\uacc4\ub97c \ud0d0\uad6c\ud558\ub294 \ud559\ubb38\uc73c\ub85c, \ub9c8\ubc95\uc758 \uae30\ucd08\uac00 \ub429\ub2c8\ub2e4.","category":"arcane","tier":1,"cost":{"research_points":20,"mana":20},"prerequisites":[],"effects":{"mana_production":20,"happiness":10,"cultural_influence":15},"unlocksBuildings":["shrine"],"unlocksUnits":[],"unlocksResources":["mana"],"iconPath":"icons/tech/mysticism.png"},{"id":"advanced_magic","name":"\uace0\uae09 \ub9c8\ubc95","description":"\ub354 \uac15\ub825\ud558\uace0 \ubcf5\uc7a1\ud55c \ub9c8\ubc95\uc744 \ub2e4\ub8e8\ub294 \uae30\uc220\ub85c, \ucd5c\uc0c1\uae09 \ub9c8\ubc95 \uc720\ub2db\uacfc \uac74\ubb3c\uc744 \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"arcane","tier":3,"cost":{"research_points":60,"mana":100},"prerequisites":["magic","philosophy"],"effects":{"mana_production":50,"magical_attack":40,"spell_efficiency":40,"magical_defense":30},"unlocksBuildings":["arcane_sanctuary"],"unlocksUnits":["archmage"],"unlocksResources":["arcane_crystal"],"iconPath":"icons/tech/advanced_magic.png"},{"id":"alchemy","name":"\uc5f0\uae08\uc220","description":"\ubb3c\uc9c8\uc758 \ubcc0\ud658\uacfc \ud2b9\uc218\ud55c \uc57d\ud488\uc744 \ub9cc\ub4dc\ub294 \uae30\uc220\ub85c, \uc790\uc6d0 \uc0dd\uc0b0\uacfc \uc720\ub2db \uac15\ud654\uc5d0 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.","category":"arcane","tier":2,"cost":{"research_points":30,"mana":40},"prerequisites":["mysticism","mining"],"effects":{"resource_conversion":20,"unit_health":15,"potion_efficiency":30},"unlocksBuildings":["alchemy_lab"],"unlocksUnits":[],"unlocksResources":["elixir"],"iconPath":"icons/tech/alchemy.png"},{"id":"enchanting","name":"\ub9c8\ubc95 \ubd80\uc5ec","description":"\ubb3c\uccb4\uc5d0 \ub9c8\ubc95\uc801 \ud2b9\uc131\uc744 \ubd80\uc5ec\ud558\ub294 \uae30\uc220\ub85c, \uac15\ub825\ud55c \uc7a5\ube44\uc640 \uc544\uc774\ud15c\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"arcane","tier":3,"cost":{"research_points":45,"mana":80},"prerequisites":["magic","alchemy"],"effects":{"item_power":40,"unit_attack":20,"unit_defense":20,"magical_resistance":30},"unlocksBuildings":["enchanter_workshop"],"unlocksUnits":[],"unlocksResources":["enchanted_material"],"iconPath":"icons/tech/enchanting.png"},{"id":"masonry","name":"\uc11d\uacf5","description":"\ub3cc\uc744 \ub2e4\ub8e8\ub294 \uae30\uc220\ub85c, \ub354 \ud2bc\ud2bc\ud55c \uac74\ubb3c\uc744 \uc9c0\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"economy","tier":1,"cost":{"research_points":15},"prerequisites":["mining"],"effects":{"building_durability":30,"construction_speed":20},"unlocksBuildings":["stone_wall","watchtower"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/masonry.png"},{"id":"construction","name":"\uac74\ucd95","description":"\ub300\uaddc\ubaa8 \uac74\ubb3c\uc744 \uc124\uacc4\ud558\uace0 \uac74\uc124\ud558\ub294 \uae30\uc220\ub85c, \ub354 \ubc1c\uc804\ub41c \ub3c4\uc2dc \uc2dc\uc124\uc744 \uc9c0\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"economy","tier":2,"cost":{"research_points":25},"prerequisites":["masonry"],"effects":{"building_durability":40,"construction_speed":30,"city_capacity":20},"unlocksBuildings":["granary","courthouse"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/construction.png"},{"id":"architecture","name":"\uac74\ucd95\ud559","description":"\uac74\ubb3c\uc758 \ubbf8\ud559\uacfc \uae30\ub2a5\uc744 \uc5f0\uad6c\ud558\ub294 \ud559\ubb38\uc73c\ub85c, \uc544\ub984\ub2f5\uace0 \ud6a8\uc728\uc801\uc778 \uac74\ubb3c\uc744 \uc9c0\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"culture","tier":3,"cost":{"research_points":40},"prerequisites":["construction","mathematics"],"effects":{"building_durability":50,"construction_speed":40,"happiness":20,"cultural_influence":30},"unlocksBuildings":["palace","cathedral"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/architecture.png"},{"id":"pottery","name":"\ub3c4\uc608","description":"\uc810\ud1a0\ub85c \uc6a9\uae30\ub97c \ub9cc\ub4dc\ub294 \uae30\uc220\ub85c, \uc2dd\ub7c9 \uc800\uc7a5\uacfc \ubb38\ud654 \ubc1c\uc804\uc5d0 \uae30\uc5ec\ud569\ub2c8\ub2e4.","category":"culture","tier":1,"cost":{"research_points":10},"prerequisites":[],"effects":{"food_storage":20,"cultural_influence":10},"unlocksBuildings":["pottery_workshop"],"unlocksUnits":[],"unlocksResources":["pottery"],"iconPath":"icons/tech/pottery.png"},{"id":"art","name":"\uc608\uc220","description":"\ubbf8\uc801 \ud45c\ud604\uacfc \ucc3d\uc791 \ud65c\ub3d9\uc73c\ub85c, \ubb38\ud654 \ubc1c\uc804\uacfc \uad6d\ubbfc \ud589\ubcf5\ub3c4\uc5d0 \uae30\uc5ec\ud569\ub2c8\ub2e4.","category":"culture","tier":2,"cost":{"research_points":25},"prerequisites":["pottery","writing"],"effects":{"happiness":25,"cultural_influence":30,"diplomatic_influence":15},"unlocksBuildings":["artist_guild"],"unlocksUnits":[],"unlocksResources":["artwork"],"iconPath":"icons/tech/art.png"},{"id":"music","name":"\uc74c\uc545","description":"\uc18c\ub9ac\uc640 \ub9ac\ub4ec\uc744 \ud1b5\ud55c \uc608\uc220 \ud45c\ud604\uc73c\ub85c, \ubb38\ud654 \ubc1c\uc804\uacfc \uad6d\ubbfc \ud589\ubcf5\ub3c4\uc5d0 \uae30\uc5ec\ud569\ub2c8\ub2e4.","category":"culture","tier":2,"cost":{"research_points":25},"prerequisites":["writing"],"effects":{"happiness":30,"cultural_influence":25,"diplomatic_influence":10},"unlocksBuildings":["music_hall"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/music.png"},{"id":"drama","name":"\uc5f0\uadf9","description":"\uc774\uc57c\uae30\ub97c \uc5f0\uae30\ub85c \ud45c\ud604\ud558\ub294 \uc608\uc220\ub85c, \ubb38\ud654 \ubc1c\uc804\uacfc \uad6d\ubbfc \ud589\ubcf5\ub3c4\uc5d0 \uae30\uc5ec\ud569\ub2c8\ub2e4.","category":"culture","tier":3,"cost":{"research_points":35},"prerequisites":["art","music"],"effects":{"happiness":35,"cultural_influence":40,"diplomatic_influence":20},"unlocksBuildings":["theater"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/drama.png"},{"id":"theology","name":"\uc2e0\ud559","description":"\uc2e0\uacfc \uc885\uad50\uc5d0 \ub300\ud55c \uccb4\uacc4\uc801\uc778 \uc5f0\uad6c\ub85c, \ubb38\ud654\uc640 \uc0ac\ud68c \ubc1c\uc804\uc5d0 \uae30\uc5ec\ud569\ub2c8\ub2e4.","category":"culture","tier":3,"cost":{"research_points":40},"prerequisites":["philosophy"],"effects":{"happiness":25,"cultural_influence":30,"loyalty":20},"unlocksBuildings":["cathedral","monastery"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/theology.png"},{"id":"medicine","name":"\uc758\ud559","description":"\uc9c8\ubcd1\uc744 \uce58\ub8cc\ud558\uace0 \uac74\uac15\uc744 \uc720\uc9c0\ud558\ub294 \ud559\ubb38\uc73c\ub85c, \uc778\uad6c \uc131\uc7a5\uacfc \uad70\uc0ac\ub825 \uc720\uc9c0\uc5d0 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.","category":"science","tier":3,"cost":{"research_points":45},"prerequisites":["alchemy","education"],"effects":{"population_growth":30,"unit_health":25,"disease_resistance":40},"unlocksBuildings":["hospital"],"unlocksUnits":[],"unlocksResources":["medicine"],"iconPath":"icons/tech/medicine.png"},{"id":"diplomacy","name":"\uc678\uad50","description":"\uad6d\uac00 \uac04 \uad00\uacc4\ub97c \uad00\ub9ac\ud558\ub294 \uae30\uc220\ub85c, \ud3c9\ud654\uc801\uc778 \uad6d\uc81c \uad00\uacc4\uc640 \ubb34\uc5ed\uc5d0 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.","category":"culture","tier":2,"cost":{"research_points":30},"prerequisites":["writing"],"effects":{"diplomatic_influence":40,"trade_efficiency":20,"alliance_strength":30},"unlocksBuildings":["embassy"],"unlocksUnits":[],"unlocksResources":[],"iconPath":"icons/tech/diplomacy.png"},{"id":"espionage","name":"\ucca9\ubcf4","description":"\ube44\ubc00 \uc815\ubcf4\ub97c \uc218\uc9d1\ud558\uace0 \uc801\uc758 \ud65c\ub3d9\uc744 \ubc29\ud574\ud558\ub294 \uae30\uc220\ub85c, \uc804\ub7b5\uc801 \uc6b0\uc704\ub97c \ud655\ubcf4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","category":"military","tier":3,"cost":{"research_points":50},"prerequisites":["diplomacy"],"effects":{"intelligence_gathering":40,"sabotage_efficiency":30,"counter_intelligence":25},"unlocksBuildings":["spy_guild"],"unlocksUnits":["spy"],"unlocksResources":[],"iconPath":"icons/tech/espionage.png"}]'),y={turn:1,population:1e3,gold:500,food:300,army:100,trust:50,dissatisfaction:10,wood:100,stone:100,iron:50,mana:30,labor:200,research_points:50,magical_essence:0,arcane_crystal:0,elixir:0,enchanted_material:0,medicine:0,luxury_goods:0,artwork:0,pottery:0,activePolicies:[],currentEventId:"start",advisors:f,cities:p,history:[],gameOver:!1,result:null,researchedTechnologies:[],armies:[{id:"army_1",name:"\uc911\uc559\uad70",location:"region_1",units:{infantry:50,archer:30,cavalry:20},commander:"\uc7a5\uad70 \uc774\uc21c\uc2e0",morale:85,experience:20,status:"\ub300\uae30 \uc911"},{id:"army_2",name:"\ubd81\ubc29 \uc218\ube44\ub300",location:"region_2",units:{infantry:30,archer:20},commander:"\uc7a5\uad70 \uae40\uc720\uc2e0",morale:70,experience:10,status:"\ubc29\uc5b4 \uc911"},{id:"army_3",name:"\ub3d9\ubd80 \uc6d0\uc815\uad70",location:"region_3",units:{infantry:40,archer:25,cavalry:15,knight:5},commander:"\uc7a5\uad70 \uac15\uac10\ucc2c",morale:90,experience:30,status:"\ud589\uad70 \uc911"}],battles:[{id:"battle_1",name:"\ubd81\ubd80 \uc0b0\ub9e5 \uc804\ud22c",location:"region_2",attacker:"army_1",defender:"faction_north",status:"\uc9c4\ud589 \uc911",duration:3,casualties:{friendly:{infantry:10,archer:5},enemy:{infantry:15,archer:8}},winChance:65},{id:"battle_2",name:"\ub3d9\ubd80 \uc232 \ubc29\uc5b4\uc804",location:"region_3",attacker:"faction_east",defender:"army_3",status:"\uc2b9\ub9ac",duration:5,casualties:{friendly:{infantry:5,archer:3},enemy:{infantry:20,archer:15,cavalry:10}},winChance:100}],threats:[{faction:"faction_north",level:"\ub192\uc74c",description:"\ubd81\ubc29 \ubd80\uc871\uc774 \uad6d\uacbd \uc9c0\uc5ed\uc5d0 \uad70\ub300\ub97c \uc9d1\uacb0\uc2dc\ud0a4\uace0 \uc788\uc2b5\ub2c8\ub2e4.",armySize:"\ub300\uaddc\ubaa8",timeToAttack:"2\ud134 \uc774\ub0b4"},{faction:"faction_east",level:"\uc911\uac04",description:"\ub3d9\ubc29 \uc81c\uad6d\uc774 \uad6d\uacbd \uc9c0\uc5ed\uc5d0\uc11c \uad70\uc0ac \ud6c8\ub828\uc744 \uc2e4\uc2dc\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.",armySize:"\uc911\uac04 \uaddc\ubaa8",timeToAttack:"4\ud134 \uc774\ub0b4"}],politicalPressure:0,loyalty:50,diplomatic_influence:20,cultural_influence:10,military_readiness:30,territories:m,discoveredTerritories:["region_1","region_2","region_3","region_4","region_5"],selectedTerritory:null,factions:g,faction_east_relation:0,faction_west_relation:0,faction_south_relation:0,faction_north_relation:-20,military_technology:0,naval_defense:0,military_defense:0,magical_attack:0,magical_defense:0,magical_corruption:0},b=(_=u((e,t)=>({...y,togglePolicy:n=>{const{activePolicies:r}=t();let i=[...r];r.includes(n)?i=i.filter(e=>e!==n):i.push(n),e({activePolicies:i})},goToNextEvent:n=>{const r=t(),i=d.find(e=>e.id===r.currentEventId);if(!i)return;const s=i.options.find(e=>e.text===n);if(!s)return;const a=s.effects||{};e(e=>({population:Math.max(0,e.population+(a.population||0)),gold:Math.max(0,e.gold+(a.gold||0)),food:Math.max(0,e.food+(a.food||0)),army:Math.max(0,e.army+(a.army||0)),trust:Math.min(100,Math.max(0,e.trust+(a.trust||0))),dissatisfaction:Math.min(100,Math.max(0,e.dissatisfaction+(a.dissatisfaction||0))),politicalPressure:Math.min(100,Math.max(0,e.politicalPressure+(a.politicalPressure||0))),loyalty:Math.min(100,Math.max(0,e.loyalty+(a.loyalty||0))),turn:e.turn+1,currentEventId:s.nextEventId||null,history:[...e.history,{event:i.title,choice:n,effects:a,turn:e.turn}]})),t().applyPolicyEffects(),t().updateCities()},applyPolicyEffects:()=>{const{activePolicies:n}=t();let r=0,i=0,s=0,a=0;n.forEach(e=>{const t=h.find(t=>t.id===e);t&&(r+=t.effects.gold||0,i+=t.effects.food||0,s+=t.effects.trust||0,a+=t.effects.dissatisfaction||0)}),e(e=>({gold:Math.max(0,e.gold+r),food:Math.max(0,e.food+i),trust:Math.min(100,Math.max(0,e.trust+s)),dissatisfaction:Math.min(100,Math.max(0,e.dissatisfaction+a))}))},updateCities:()=>{const{cities:n}=t();let r={food:0,army:0,population:0,wood:0,stone:0,iron:0,mana:0,labor:0};n.forEach(e=>{r.food+=e.foodProduction,r.army+=e.armyStationed,r.population+=Math.floor(.01*e.population),r.wood+=e.wood,r.stone+=e.stone,r.iron+=e.iron,r.mana+=e.mana,r.labor+=e.labor}),e(e=>({food:Math.max(0,e.food+r.food),army:e.army+r.army,population:e.population+r.population,wood:e.wood+r.wood,stone:e.stone+r.stone,iron:e.iron+r.iron,mana:e.mana+r.mana,labor:e.labor+r.labor}))},setGameOver:t=>e({gameOver:t}),setResult:t=>e({result:t}),setSelectedTerritory:t=>e({selectedTerritory:t}),discoverTerritory:n=>{const{discoveredTerritories:r}=t();var i;r.includes(n)||e({discoveredTerritories:[...r,n],history:[...t().history,{event:"\uc601\ud1a0 \ubc1c\uacac",territory:(null===(i=m.find(e=>e.id===n))||void 0===i?void 0:i.name)||n,turn:t().turn}]})},updateTerritoryControl:(n,r)=>{var i;const{territories:s}=t(),a=s.map(e=>e.id===n?{...e,controlledBy:r}:e);e({territories:a,history:[...t().history,{event:"\uc601\ud1a0 \ud1b5\uc81c\uad8c \ubcc0\uacbd",territory:(null===(i=s.find(e=>e.id===n))||void 0===i?void 0:i.name)||n,newController:r,turn:t().turn}]})},updateFactionRelation:(n,r)=>{const i=`faction_${n}_relation`,s=t()[i]||0,a=Math.max(-100,Math.min(100,s+r));e({[i]:a,history:[...t().history,{event:"\uc678\uad50 \uad00\uacc4 \ubcc0\ud654",faction:n,change:r,newValue:a,turn:t().turn}]}),a>=50&&s<50?e({diplomatic_influence:t().diplomatic_influence+10,history:[...t().history,{event:"\ub3d9\ub9f9 \uccb4\uacb0",faction:n,turn:t().turn}]}):a<=-50&&s>-50&&e({military_readiness:t().military_readiness-10,history:[...t().history,{event:"\uc804\uc7c1 \uc120\ud3ec",faction:n,turn:t().turn}]})},produceResources:()=>{const{territories:n,discoveredTerritories:r,cities:i}=t(),s=n.filter(e=>"player"===e.controlledBy&&r.includes(e.id));let a={food:0,gold:0,wood:0,stone:0,iron:0,mana:0};s.forEach(e=>{Object.entries(e.resources).forEach(e=>{let[t,n]=e;a[t]=(a[t]||0)+n})});let o={food:0,army:0,population:0,wood:0,stone:0,iron:0,mana:0,labor:0};i.forEach(e=>{o.food+=e.foodProduction,o.army+=e.armyStationed,o.population+=Math.floor(.01*e.population),o.wood+=e.wood,o.stone+=e.stone,o.iron+=e.iron,o.mana+=e.mana,o.labor+=e.labor});const{activePolicies:l}=t();let c={gold:0,food:0,trust:0,dissatisfaction:0};l.forEach(e=>{const t=h.find(t=>t.id===e);t&&(c.gold+=t.effects.gold||0,c.food+=t.effects.food||0,c.trust+=t.effects.trust||0,c.dissatisfaction+=t.effects.dissatisfaction||0)});const u=Math.floor(.5*t().cultural_influence);e(e=>({food:Math.max(0,e.food+a.food+o.food+c.food),gold:Math.max(0,e.gold+a.gold+c.gold),wood:Math.max(0,e.wood+a.wood+o.wood),stone:Math.max(0,e.stone+a.stone+o.stone),iron:Math.max(0,e.iron+a.iron+o.iron),mana:Math.max(0,e.mana+a.mana+o.mana),labor:Math.max(0,e.labor+o.labor),army:e.army+o.army,population:e.population+o.population,trust:Math.min(100,Math.max(0,e.trust+c.trust)),dissatisfaction:Math.min(100,Math.max(0,e.dissatisfaction+c.dissatisfaction)),research_points:e.research_points+u}))},researchTechnology:n=>{const r=t(),{research_points:i,researchedTechnologies:s,mana:a}=r,o=v.find(e=>e.id===n);return!!o&&(!s.includes(n)&&(!(i<o.cost.research_points)&&(!(o.cost.mana&&a<o.cost.mana)&&(!(o.prerequisites&&o.prerequisites.length>0&&o.prerequisites.filter(e=>!s.includes(e)).length>0)&&(e(e=>{const t={research_points:e.research_points-o.cost.research_points,researchedTechnologies:[...e.researchedTechnologies,n],history:[...e.history,{event:"\uae30\uc220 \uc5f0\uad6c \uc644\ub8cc",technology:o.name,turn:e.turn}]};return o.cost.mana&&(t.mana=e.mana-o.cost.mana),o.effects&&Object.entries(o.effects).forEach(n=>{let[r,i]=n;void 0!==e[r]&&(t[r]=e[r]+i)}),"military"===o.category&&(t.military_technology=(e.military_technology||0)+1),t}),!0)))))},moveArmy:(n,r)=>{var i;const{armies:s,territories:a}=t(),o=s.findIndex(e=>e.id===n);if(-1===o)return!1;const l=a.find(e=>e.id===r);if(!l)return!1;const c=s[o].location,u=[...s];return u[o]={...u[o],location:r,status:"\uc774\ub3d9 \uc644\ub8cc"},e({armies:u,history:[...t().history,{event:"\uad70\ub300 \uc774\ub3d9",army:s[o].name,from:(null===(i=a.find(e=>e.id===c))||void 0===i?void 0:i.name)||c,to:l.name,turn:t().turn}]}),!0},resetGame:()=>e(y)}),{name:"slg-game-storage",getStorage:()=>localStorage}),_?o(_):o);var _;const w=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},k={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(w(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new x;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class x extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E=function(e){return function(e){const t=w(e);return k.encodeByteArray(t,!0)}(e).replace(/\./g,"")},S=function(e){try{return k.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function I(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const T=()=>{try{return I().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/jemini",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&S(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},C=e=>{var t,n;return null===(n=null===(t=T())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},N=()=>{var e;return null===(e=T())||void 0===e?void 0:e.config},A=e=>{var t;return null===(t=T())||void 0===t?void 0:t[`_${e}`]};class R{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function P(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function j(e){return(await fetch(e,{credentials:"include"})).ok}const O={};let D=!1;function L(e,t){if("undefined"===typeof window||"undefined"===typeof document||!P(window.location.host)||O[e]===t||O[e]||D)return;function n(e){return`__firebase__banner__${e}`}O[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(O))O[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{D=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function M(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function F(){var e;const t=null===(e=T())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function U(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function V(){return!F()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){try{return"object"===typeof indexedDB}catch(e){return!1}}function B(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class $ extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,$.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,q.prototype.create)}}class q{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(H,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new $(n,s,t)}}const H=/\{\$([^}]+)}/g;function W(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(K(n)&&K(s)){if(!W(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function K(e){return null!==e&&"object"===typeof e}function G(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Q(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function J(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class X{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Y),void 0===r.error&&(r.error=Y),void 0===r.complete&&(r.complete=Y);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y(){}function Z(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function ee(e){return e&&e._delegate?e._delegate:e}class te{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ne="[DEFAULT]";class re{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new R;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ne?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.component?this.component.multipleInstances?e:ne:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new re(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const se=[];var ae;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ae||(ae={}));const oe={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},le=ae.INFO,ce={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},ue=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ce[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class de{constructor(e){this.name=e,this._logLevel=le,this._logHandler=ue,this._userLogHandler=null,se.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?oe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...t),this._logHandler(this,ae.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...t),this._logHandler(this,ae.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ae.INFO,...t),this._logHandler(this,ae.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ae.WARN,...t),this._logHandler(this,ae.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...t),this._logHandler(this,ae.ERROR,...t)}}let he,fe;const pe=new WeakMap,me=new WeakMap,ge=new WeakMap,ve=new WeakMap,ye=new WeakMap;let be={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return me.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ge.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ke(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function _e(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(xe(this),n),ke(pe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ke(e.apply(xe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(xe(this),t,...r);return ge.set(s,t.sort?t.sort():[t]),ke(s)}}function we(e){return"function"===typeof e?_e(e):(e instanceof IDBTransaction&&function(e){if(me.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});me.set(e,t)}(e),t=e,(he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,be):e);var t}function ke(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ke(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&pe.set(t,e)}).catch(()=>{}),ye.set(t,e),t}(e);if(ve.has(e))return ve.get(e);const t=we(e);return t!==e&&(ve.set(e,t),ye.set(t,e)),t}const xe=e=>ye.get(e);function Ee(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ke(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ke(a.result),e.oldVersion,e.newVersion,ke(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const Se=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Te=new Map;function Ce(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Te.get(t))return Te.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Se.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Te.set(t,s),s}be=(e=>({...e,get:(t,n,r)=>Ce(t,n)||e.get(t,n,r),has:(t,n)=>!!Ce(t,n)||e.has(t,n)}))(be);class Ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Ae="@firebase/app",Re="0.13.2",Pe=new de("@firebase/app"),je="@firebase/app-compat",Oe="@firebase/analytics-compat",De="@firebase/analytics",Le="@firebase/app-check-compat",Me="@firebase/app-check",Fe="@firebase/auth",Ue="@firebase/auth-compat",Ve="@firebase/database",ze="@firebase/data-connect",Be="@firebase/database-compat",$e="@firebase/functions",qe="@firebase/functions-compat",He="@firebase/installations",We="@firebase/installations-compat",Ke="@firebase/messaging",Ge="@firebase/messaging-compat",Qe="@firebase/performance",Je="@firebase/performance-compat",Xe="@firebase/remote-config",Ye="@firebase/remote-config-compat",Ze="@firebase/storage",et="@firebase/storage-compat",tt="@firebase/firestore",nt="@firebase/ai",rt="@firebase/firestore-compat",it="firebase",st="[DEFAULT]",at={[Ae]:"fire-core",[je]:"fire-core-compat",[De]:"fire-analytics",[Oe]:"fire-analytics-compat",[Me]:"fire-app-check",[Le]:"fire-app-check-compat",[Fe]:"fire-auth",[Ue]:"fire-auth-compat",[Ve]:"fire-rtdb",[ze]:"fire-data-connect",[Be]:"fire-rtdb-compat",[$e]:"fire-fn",[qe]:"fire-fn-compat",[He]:"fire-iid",[We]:"fire-iid-compat",[Ke]:"fire-fcm",[Ge]:"fire-fcm-compat",[Qe]:"fire-perf",[Je]:"fire-perf-compat",[Xe]:"fire-rc",[Ye]:"fire-rc-compat",[Ze]:"fire-gcs",[et]:"fire-gcs-compat",[tt]:"fire-fst",[rt]:"fire-fst-compat",[nt]:"fire-vertex","fire-js":"fire-js",[it]:"fire-js-all"},ot=new Map,lt=new Map,ct=new Map;function ut(e,t){try{e.container.addComponent(t)}catch(n){Pe.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function dt(e){const t=e.name;if(ct.has(t))return Pe.debug(`There were multiple attempts to register component ${t}.`),!1;ct.set(t,e);for(const n of ot.values())ut(n,e);for(const n of lt.values())ut(n,e);return!0}function ht(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ft(e){return null!==e&&void 0!==e&&void 0!==e.settings}const pt=new q("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class mt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new te("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}const gt="11.10.0";function vt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:st,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw pt.create("bad-app-name",{appName:String(i)});if(n||(n=N()),!n)throw pt.create("no-options");const s=ot.get(i);if(s){if(W(n,s.options)&&W(r,s.config))return s;throw pt.create("duplicate-app",{appName:i})}const a=new ie(i);for(const l of ct.values())a.addComponent(l);const o=new mt(n,r,a);return ot.set(i,o),o}function yt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;const t=ot.get(e);if(!t&&e===st&&N())return vt();if(!t)throw pt.create("no-app",{appName:e});return t}function bt(e,t,n){var r;let i=null!==(r=at[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Pe.warn(e.join(" "))}dt(new te(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const _t="firebase-heartbeat-store";let wt=null;function kt(){return wt||(wt=Ee("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(_t)}catch(n){console.warn(n)}}}).catch(e=>{throw pt.create("idb-open",{originalErrorMessage:e.message})})),wt}async function xt(e,t){try{const n=(await kt()).transaction(_t,"readwrite"),r=n.objectStore(_t);await r.put(t,Et(e)),await n.done}catch(n){if(n instanceof $)Pe.warn(n.message);else{const e=pt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Pe.warn(e.message)}}}function Et(e){return`${e.name}!${e.options.appId}`}class St{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=It();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Pe.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=It(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ct(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ct(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=E(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Pe.warn(t),""}}}function It(){return(new Date).toISOString().substring(0,10)}class Tt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!z()&&B().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await kt()).transaction(_t),n=await t.objectStore(_t).get(Et(e));return await t.done,n}catch(t){if(t instanceof $)Pe.warn(t.message);else{const e=pt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Pe.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ct(e){return E(JSON.stringify({version:2,heartbeats:e})).length}var Nt;Nt="",dt(new te("platform-logger",e=>new Ne(e),"PRIVATE")),dt(new te("heartbeat",e=>new St(e),"PRIVATE")),bt(Ae,Re,Nt),bt(Ae,Re,"esm2017"),bt("fire-js","");bt("firebase","11.10.0","app");function At(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pt=Rt,jt=new q("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ot=new de("@firebase/auth");function Dt(e){if(Ot.logLevel<=ae.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ot.error(`Auth (${gt}): ${e}`,...n)}}function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vt(e,...n)}function Mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vt(e,...n)}function Ft(e,t,n){const r=Object.assign(Object.assign({},Pt()),{[t]:n});return new q("auth","Firebase",r).create(t,{appName:e.name})}function Ut(e){return Ft(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return jt.create(e,...n)}function zt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Vt(t,...r)}}function Bt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Dt(t),new Error(t)}function $t(e,t){e||Bt(t)}function qt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ht(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Kt{constructor(e,t){this.shortDelay=e,this.longDelay=t,$t(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(M())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ht()||U()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Gt(e,t){$t(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Qt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Yt=new Kt(3e4,6e4);function Zt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function en(e,t,n,r){return tn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=G(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&P(e.emulatorConfig.host)&&(l.credentials="include"),Qt.fetch()(await rn(e,e.config.apiHost,n,a),l)})}async function tn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jt),t);try{const t=new an(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw on(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw on(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw on(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw on(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ft(e,o,a);Lt(e,o)}}catch(i){if(i instanceof $)throw i;Lt(e,"network-request-failed",{message:String(i)})}}async function nn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await en(e,t,n,r,i);return"mfaPendingCredential"in s&&Lt(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function rn(e,t,n,r){const i=`${t}${n}?${r}`,s=e,a=s.config.emulator?Gt(e.config,i):`${e.config.apiScheme}://${i}`;if(Xt.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function sn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class an{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Mt(this.auth,"network-request-failed")),Yt.get())})}}function on(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mt(e,t,r);return i.customData._tokenResponse=n,i}function ln(e){return void 0!==e&&void 0!==e.enterprise}class cn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function un(e,t){return en(e,"GET","/v2/recaptchaConfig",Zt(e,t))}async function dn(e,t){return en(e,"POST","/v1/accounts:lookup",t)}function hn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function fn(e){return 1e3*Number(e)}function pn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Dt("JWT malformed, contained fewer than 3 sections"),null;try{const e=S(n);return e?JSON.parse(e):(Dt("Failed to decode base64 JWT payload"),null)}catch(i){return Dt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function mn(e){const t=pn(e);return zt(t,"internal-error"),zt("undefined"!==typeof t.exp,"internal-error"),zt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function gn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof $&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class vn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class yn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hn(this.lastLoginAt),this.creationTime=hn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await gn(e,dn(n,{idToken:r}));zt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?_n(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new yn(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function _n(e){return e.map(e=>{var{providerId:t}=e,n=At(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class wn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zt(e.idToken,"internal-error"),zt("undefined"!==typeof e.idToken,"internal-error"),zt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):mn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){zt(0!==e.length,"internal-error");const t=mn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(zt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await tn(e,{},async()=>{const n=G({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await rn(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&P(e.emulatorConfig.host)&&(o.credentials="include"),Qt.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new wn;return n&&(zt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(zt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(zt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wn,this.toJSON())}_performRefresh(){return Bt("not implemented")}}function kn(e,t){zt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class xn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=At(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await gn(this,this.stsTokenManager.getToken(this.auth,e));return zt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ee(e),r=await n.getIdToken(t),i=pn(r);zt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:hn(fn(i.auth_time)),issuedAtTime:hn(fn(i.iat)),expirationTime:hn(fn(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ee(e);await bn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ft(this.auth.app))return Promise.reject(Ut(this.auth));const e=await this.getIdToken();return await gn(this,async function(e,t){return en(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:k}=t;zt(y&&k,e,"internal-error");const x=wn.fromJSON(this.name,k);zt("string"===typeof y,e,"internal-error"),kn(u,e.name),kn(d,e.name),zt("boolean"===typeof b,e,"internal-error"),zt("boolean"===typeof _,e,"internal-error"),kn(h,e.name),kn(f,e.name),kn(p,e.name),kn(m,e.name),kn(g,e.name),kn(v,e.name);const E=new xn({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:x,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(E.providerData=w.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new wn;r.updateFromServerResponse(t);const i=new xn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await bn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];zt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?_n(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new wn;a.updateFromIdToken(n);const o=new xn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new yn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const En=new Map;function Sn(e){$t(e instanceof Function,"Expected a class definition");let t=En.get(e);return t?($t(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,En.set(e,t),t)}class In{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}In.type="NONE";const Tn=In;function Cn(e,t,n){return`firebase:${e}:${t}:${n}`}class Nn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Cn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Cn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await dn(this.auth,{idToken:e}).catch(()=>{});return t?xn._fromGetAccountInfoResponse(this.auth,t,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Nn(Sn(Tn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Sn(Tn);const s=Cn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await dn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await xn._fromGetAccountInfoResponse(e,r,t)}else n=xn._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new Nn(i,e,n)):new Nn(i,e,n)}}function An(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(On(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Rn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ln(t))return"Blackberry";if(Mn(t))return"Webos";if(Pn(t))return"Safari";if((t.includes("chrome/")||jn(t))&&!t.includes("edge/"))return"Chrome";if(Dn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/firefox\//i.test(e)}function Pn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/crios\//i.test(e)}function On(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/iemobile/i.test(e)}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/android/i.test(e)}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/blackberry/i.test(e)}function Mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/webos/i.test(e)}function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Un(){return function(){const e=M();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return Fn(e)||Dn(e)||Mn(e)||Ln(e)||/windows phone/i.test(e)||On(e)}function zn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=An(M());break;case"Worker":t=`${An(M())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${gt}/${r}`}class Bn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class $n{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class qn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wn(this),this.idTokenSubscription=new Wn(this),this.beforeStateQueue=new Bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Nn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await dn(this,{idToken:e}),n=await xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ft(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return zt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bn(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ft(this.app))return Promise.reject(Ut(this));const t=e?ee(e):null;return t&&zt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&zt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ft(this.app)?Promise.reject(Ut(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ft(this.app)?Promise.reject(Ut(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return en(e,"GET","/v2/passwordPolicy",Zt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new $n(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new q("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return en(e,"POST","/v2/accounts:revokeToken",Zt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sn(e)||this._popupRedirectResolver;zt(t,this,"argument-error"),this.redirectPersistenceManager=await Nn.create(this,[Sn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(zt(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ot.logLevel<=ae.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ot.warn(`Auth (${gt}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Hn(e){return ee(e)}class Wn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new X(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gn(e){return Kn.loadJS(e)}function Qn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Jn{constructor(){this.enterprise=new Xn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Yn="NO_RECAPTCHA";class Zn{constructor(e){this.type="recaptcha-enterprise",this.auth=Hn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ln(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Yn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Jn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{un(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new cn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ln(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Kn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Gn(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function er(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Zn(e);let a;if(i)a=Yn;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function tr(e,t,n,r,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await er(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await er(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await er(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await er(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await er(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function nr(e){const t=Hn(e),n=await un(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new cn(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Zn(t).verify()}}function rr(e,t,n){const r=Hn(e);zt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ir(t),{host:a,port:o}=function(e){const t=ir(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:sr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:sr(t)}}}(t),l=null===o?"":`:${o}`,c={url:`${s}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return zt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void zt(W(c,r.config.emulator)&&W(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,P(a)?(j(`${s}//${a}${l}`),L("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ir(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function sr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ar{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bt("not implemented")}_getIdTokenResponse(e){return Bt("not implemented")}_linkToIdToken(e,t){return Bt("not implemented")}_getReauthenticationResolver(e){return Bt("not implemented")}}async function or(e,t){return en(e,"POST","/v1/accounts:signUp",t)}async function lr(e,t){return nn(e,"POST","/v1/accounts:signInWithPassword",Zt(e,t))}class cr extends ar{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new cr(e,t,"password")}static _fromEmailAndCode(e,t){return new cr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return tr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return nn(e,"POST","/v1/accounts:signInWithEmailLink",Zt(e,t))}(e,{email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return tr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",or,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return nn(e,"POST","/v1/accounts:signInWithEmailLink",Zt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ur(e,t){return nn(e,"POST","/v1/accounts:signInWithIdp",Zt(e,t))}class dr extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=At(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new dr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ur(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ur(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ur(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=G(t)}return e}}async function hr(e,t){return en(e,"POST","/v1/accounts:sendVerificationCode",Zt(e,t))}const fr={USER_NOT_FOUND:"user-not-found"};class pr extends ar{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return nn(e,"POST","/v1/accounts:signInWithPhoneNumber",Zt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await nn(e,"POST","/v1/accounts:signInWithPhoneNumber",Zt(e,t));if(n.temporaryProof)throw on(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return nn(e,"POST","/v1/accounts:signInWithPhoneNumber",Zt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new pr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class mr{constructor(e){var t,n,r,i,s,a;const o=Q(J(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);zt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Q(J(e)).link,n=t?Q(J(t)).deep_link_id:null,r=Q(J(e)).deep_link_id;return(r?Q(J(r)).link:null)||r||n||t||e}(e);try{return new mr(t)}catch(n){return null}}}class gr{constructor(){this.providerId=gr.PROVIDER_ID}static credential(e,t){return cr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=mr.parseLink(t);return zt(n,"argument-error"),cr._fromEmailAndCode(e,n.code,n.tenantId)}}gr.PROVIDER_ID="password",gr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",gr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class vr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class yr extends vr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class br extends yr{constructor(){super("facebook.com")}static credential(e){return dr._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return br.credential(t.oauthAccessToken)}catch(n){return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com",br.PROVIDER_ID="facebook.com";class _r extends yr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return dr._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return _r.credential(n,r)}catch(i){return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com",_r.PROVIDER_ID="google.com";class wr extends yr{constructor(){super("github.com")}static credential(e){return dr._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return wr.credential(t.oauthAccessToken)}catch(n){return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com",wr.PROVIDER_ID="github.com";class kr extends yr{constructor(){super("twitter.com")}static credential(e,t){return dr._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return kr.credential(n,r)}catch(i){return null}}}async function xr(e,t){return nn(e,"POST","/v1/accounts:signUp",Zt(e,t))}kr.TWITTER_SIGN_IN_METHOD="twitter.com",kr.PROVIDER_ID="twitter.com";class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await xn._fromIdTokenResponse(e,n,r),s=Sr(n);return new Er({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Sr(n);return new Er({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Sr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ir extends ${constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ir.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ir(e,t,n,r)}}function Tr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Ir._fromErrorAndOperation(e,n,t,r);throw n})}async function Cr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await gn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Er._forOperation(e,"link",r)}async function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ft(r.app))return Promise.reject(Ut(r));const i="reauthenticate";try{const s=await gn(e,Tr(r,i,t,e),n);zt(s.idToken,r,"internal-error");const a=pn(s.idToken);zt(a,r,"internal-error");const{sub:o}=a;return zt(e.uid===o,r,"user-mismatch"),Er._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&Lt(r,"user-mismatch"),s}}async function Ar(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ft(e.app))return Promise.reject(Ut(e));const r="signIn",i=await Tr(e,r,t),s=await Er._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Rr(e,t){return en(e,"POST","/v2/accounts/mfaEnrollment:start",Zt(e,t))}new WeakMap;const Pr="__sak";class jr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pr,"1"),this.storage.removeItem(Pr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Or extends jr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Un()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Or.type="LOCAL";const Dr=Or;function Lr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Mr(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Fr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Mr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Lr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Mr(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Mr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Lr(n);const i=setInterval(()=>{const e=Lr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Fr.type="COOKIE";class Ur extends jr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ur.type="SESSION";const Vr=Ur;class zr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new zr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}zr.receivers=[];class $r{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Br("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function qr(){return window}function Hr(){return"undefined"!==typeof qr().WorkerGlobalScope&&"function"===typeof qr().importScripts}const Wr="firebaseLocalStorageDb",Kr="firebaseLocalStorage",Gr="fbase_key";class Qr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jr(e,t){return e.transaction([Kr],t?"readwrite":"readonly").objectStore(Kr)}function Xr(){const e=indexedDB.open(Wr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Kr,{keyPath:Gr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Kr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Wr);return new Qr(e).toPromise()}(),t(await Xr()))})})}async function Yr(e,t,n){const r=Jr(e,!0).put({[Gr]:t,value:n});return new Qr(r).toPromise()}function Zr(e,t){const n=Jr(e,!0).delete(t);return new Qr(n).toPromise()}class ei{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Xr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zr._getInstance(Hr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new $r(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xr();return await Yr(e,Pr,"1"),await Zr(e,Pr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Jr(e,!1).get(t),r=await new Qr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Jr(e,!1).getAll();return new Qr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ei.type="LOCAL";const ti=ei;function ni(e,t){return en(e,"POST","/v2/accounts/mfaSignIn:start",Zt(e,t))}Qn("rcb"),new Kt(3e4,6e4);const ri="recaptcha";async function ii(e,t,n){var r;if(!e._getRecaptchaConfig())try{await nr(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){zt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=tr(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Yn){zt((null===n||void 0===n?void 0:n.type)===ri,e,"argument-error");return Rr(e,await si(e,t,n))}return Rr(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{zt("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;zt(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=tr(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Yn){zt((null===n||void 0===n?void 0:n.type)===ri,e,"argument-error");return ni(e,await si(e,t,n))}return ni(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=tr(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Yn){zt((null===n||void 0===n?void 0:n.type)===ri,e,"argument-error");return hr(e,await si(e,t,n))}return hr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function si(e,t,n){zt(n.type===ri,e,"argument-error");const r=await n.verify();zt("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ai{constructor(e){this.providerId=ai.PROVIDER_ID,this.auth=Hn(e)}verifyPhoneNumber(e,t){return ii(this.auth,e,ee(t))}static credential(e,t){return pr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ai.credentialFromTaggedObject(t)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?pr._fromTokenResponse(n,r):null}}function oi(e,t){return t?Sn(t):(zt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ai.PROVIDER_ID="phone",ai.PHONE_SIGN_IN_METHOD="phone";class li extends ar{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ur(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ur(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ur(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ci(e){return Ar(e.auth,new li(e),e.bypassAuthState)}function ui(e){const{auth:t,user:n}=e;return zt(n,t,"internal-error"),Nr(n,new li(e),e.bypassAuthState)}async function di(e){const{auth:t,user:n}=e;return zt(n,t,"internal-error"),Cr(n,new li(e),e.bypassAuthState)}class hi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ci;case"linkViaPopup":case"linkViaRedirect":return di;case"reauthViaPopup":case"reauthViaRedirect":return ui;default:Lt(this.auth,"internal-error")}}resolve(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fi=new Kt(2e3,1e4);class pi extends hi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,pi.currentPopupAction&&pi.currentPopupAction.cancel(),pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return zt(e,this.auth,"internal-error"),e}async onExecution(){$t(1===this.filter.length,"Popup operations only handle one event");const e=Br();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Mt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,fi.get())};e()}}pi.currentPopupAction=null;const mi=new Map;class gi extends hi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=mi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=bi(t),r=yi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}mi.set(this.auth._key(),e)}return this.bypassAuthState||mi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function vi(e,t){mi.set(e._key(),t)}function yi(e){return Sn(e._redirectPersistence)}function bi(e){return Cn("pendingRedirect",e.config.apiKey,e.name)}async function _i(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ft(e.app))return Promise.reject(Ut(e));const r=Hn(e),i=oi(r,t),s=new gi(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class wi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Mt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ki(e))}saveEventToCache(e){this.cachedEventUids.add(ki(e)),this.lastProcessedEventTime=Date.now()}}function ki(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function xi(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Ei=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Si=/^https?/;async function Ii(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return en(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ti(r))return}catch(n){}Lt(e,"unauthorized-domain")}function Ti(e){const t=qt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Si.test(n))return!1;if(Ei.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ci=new Kt(3e4,6e4);function Ni(){const e=qr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ai(e){return new Promise((t,n)=>{var r,i,s;function a(){Ni(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ni(),n(Mt(e,"network-request-failed"))},timeout:Ci.get()})}if(null===(i=null===(r=qr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=qr().gapi)||void 0===s?void 0:s.load)){const t=Qn("iframefcb");return qr()[t]=()=>{gapi.load?a():n(Mt(e,"network-request-failed"))},Gn(`${Kn.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw Ri=null,e})}let Ri=null;const Pi=new Kt(5e3,15e3),ji={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Di(e){const t=e.config;zt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:gt},i=Oi.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${G(r).slice(1)}`}async function Li(e){const t=await function(e){return Ri=Ri||Ai(e),Ri}(e),n=qr().gapi;return zt(n,e,"internal-error"),t.open({where:document.body,url:Di(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ji,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Mt(e,"network-request-failed"),s=qr().setTimeout(()=>{r(i)},Pi.get());function a(){qr().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Mi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ui(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Mi),{width:r.toString(),height:i.toString(),top:s,left:a}),c=M().toLowerCase();n&&(o=jn(c)?"_blank":n),Rn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Fn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Fi(null);const d=window.open(t||"",o,u);zt(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Fi(d)}const Vi="__/auth/handler",zi="emulator/auth/handler",Bi=encodeURIComponent("fac");async function $i(e,t,n,r,i,s){zt(e.config.authDomain,e,"auth-domain-config-required"),zt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gt,eventId:i};if(t instanceof vr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof yr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Bi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Vi}`;return Gt(t,zi)}(e)}?${G(o).slice(1)}${c}`}const qi="webStorageSupport";const Hi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vr,this._completeRedirectFn=_i,this._overrideRedirectResult=vi}async _openPopup(e,t,n,r){var i;$t(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ui(e,await $i(e,t,n,qt(),r),Br())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){qr().location.href=e}(await $i(e,t,n,qt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):($t(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Li(e),n=new wi(e);return t.register("authEvent",t=>{zt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qi,{type:qi},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[qi];void 0!==i&&t(!!i),Lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ii(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vn()||Pn()||Fn()}};var Wi="@firebase/auth",Ki="1.10.8";class Gi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Qi=A("authIdTokenMaxAge")||300;let Ji=null;var Xi;Kn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Mt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Xi="Browser",dt(new te("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;zt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Xi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zn(Xi)},c=new qn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),dt(new te("auth-internal",e=>(e=>new Gi(e))(Hn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),bt(Wi,Ki,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Xi)),bt(Wi,Ki,"esm2017");var Yi,Zi,es="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ts={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Zi=ts.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Yi=ts.Integer=r}).apply("undefined"!==typeof es?es:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ns,rs,is,ss,as,os,ls,cs,us="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ds={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof us&&us];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function x(e){i.setTimeout(()=>{throw e},0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new I,e=>e.reset());class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(R)}};var R=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){x(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function P(){this.s=this.s,this.C=this.C}function j(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},j.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(j.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,j);var L={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new j(t,e);else if(t instanceof j)t.target=t.target||e;else{var i=t;w(t=new j(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){j.call(this,"d")}function be(){j.call(this,"c")}d(ye,j),d(be,j);var _e={},we=null;function ke(){return we=we||new ne}function xe(e){j.call(this,_e.La,e)}function Ee(e){const t=ke();re(t,new xe(t))}function Se(e,t){j.call(this,_e.STAT_EVENT,e),this.stat=t}function Ie(e){const t=ke();re(t,new Se(t,e))}function Te(e,t){j.call(this,_e.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}_e.La="serverreachability",d(xe,j),_e.STAT_EVENT="statevent",d(Se,j),_e.Ma="timingevent",d(Te,j),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Re,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},je={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Re=new Oe;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Jt(n)}rn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),$e(o)),r.g=a}else nn(r);0<n.i.length&&Yt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ee(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,a=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ie(12),Ke(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,Ie(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ie(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,Ie(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ae(this.i,this.l,o,null),Ge(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ke(this),We(this)}}}catch(h){}},De.prototype.cancel=function(){this.J=!0,Ke(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),Ie(17)),Ke(this),this.s=2,We(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(xt(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,_t)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,_t=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function xt(e,t){kt(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return kt(e),t=It(e,t),e.g.has(t)}function St(e,t,n){xt(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),h(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function jt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){kt(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,Et(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(At,pe),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jt(this):Ot(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,jt(this))},e.Qa=function(e){this.g&&(this.response=e,jt(this))},e.ga=function(){this.g&&jt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),$t(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){qt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function qt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new De(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}dn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||A(),C||(T(),C=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Nt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||A(),C||(T(),C=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=ke(),new Te(r,n)),Yt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new At({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new De(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Dt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Jt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Yt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,cs=ds.createWebChannelTransport=function(){return new mn},ls=ds.getStatEventTarget=function(){return ke()},os=ds.Event=_e,as=ds.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,ss=ds.ErrorCode=Pe,je.COMPLETE="complete",is=ds.EventType=je,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,rs=ds.WebChannel=ge,ds.FetchXmlHttpFactory=At,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,ns=ds.XhrIo=Mt}).apply("undefined"!==typeof us?us:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const hs="@firebase/firestore",fs="4.8.0";class ps{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ps.UNAUTHENTICATED=new ps(null),ps.GOOGLE_CREDENTIALS=new ps("google-credentials-uid"),ps.FIRST_PARTY=new ps("first-party-uid"),ps.MOCK_USER=new ps("mock-user");let ms="11.10.0";const gs=new de("@firebase/firestore");function vs(){return gs.logLevel}function ys(e){if(gs.logLevel<=ae.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ws);gs.debug(`Firestore (${ms}): ${e}`,...i)}}function bs(e){if(gs.logLevel<=ae.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ws);gs.error(`Firestore (${ms}): ${e}`,...i)}}function _s(e){if(gs.logLevel<=ae.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ws);gs.warn(`Firestore (${ms}): ${e}`,...i)}}function ws(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ks(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,xs(e,r,n)}function xs(e,t,n){let r=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw bs(r),new Error(r)}function Es(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||xs(t,i,r)}function Ss(e,t){return e}const Is={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ts extends ${constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ns{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class As{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ps.UNAUTHENTICATED))}shutdown(){}}class Rs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ps{constructor(e){this.t=e,this.currentUser=ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Es(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cs,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ys("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ys("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cs)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ys("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Es("string"==typeof t.accessToken,31837,{l:t}),new Ns(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Es(null===e||"string"==typeof e,2055,{h:e}),new ps(e)}}class js{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ps.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Os{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new js(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ps.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ds{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ls{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Es(void 0===this.o,3512);const n=e=>{null!=e.error&&ys("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,ys("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ys("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ys("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ds(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Es("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ds(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ms(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Fs(){return new TextEncoder}class Us{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ms(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Vs(e,t){return e<t?-1:e>t?1:0}function zs(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Vs(r,i);{const s=Fs(),a=$s(s.encode(Bs(e,n)),s.encode(Bs(t,n)));return 0!==a?a:Vs(r,i)}}n+=r>65535?2:1}return Vs(e.length,t.length)}function Bs(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function $s(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Vs(e[n],t[n]);return Vs(e.length,t.length)}function qs(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Hs="__name__";class Ws{constructor(e,t,n){void 0===t?t=0:t>e.length&&ks(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ks(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ws.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ws?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Ws.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Vs(e.length,t.length)}static compareSegments(e,t){const n=Ws.isNumericId(e),r=Ws.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ws.extractNumericId(e).compare(Ws.extractNumericId(t)):zs(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yi.fromString(e.substring(4,e.length-2))}}class Ks extends Ws{construct(e,t,n){return new Ks(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ts(Is.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Ks(e)}static emptyPath(){return new Ks([])}}const Gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qs extends Ws{construct(e,t,n){return new Qs(e,t,n)}static isValidIdentifier(e){return Gs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Hs}static keyField(){return new Qs([Hs])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ts(Is.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ts(Is.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ts(Is.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ts(Is.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qs(t)}static emptyPath(){return new Qs([])}}class Js{constructor(e){this.path=e}static fromPath(e){return new Js(Ks.fromString(e))}static fromName(e){return new Js(Ks.fromString(e).popFirst(5))}static empty(){return new Js(Ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ks.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ks.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Js(new Ks(e.slice()))}}function Xs(e,t,n){if(!n)throw new Ts(Is.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ys(e){if(!Js.isDocumentKey(e))throw new Ts(Is.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Zs(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ea(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":ks(12329,{type:typeof e})}function ta(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ts(Is.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ea(e);throw new Ts(Is.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function na(e,t){const n={typeString:e};return t&&(n.value=t),n}function ra(e,t){if(!Zs(e))throw new Ts(Is.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ts(Is.INVALID_ARGUMENT,n);return!0}const ia=-62135596800,sa=1e6;class aa{static now(){return aa.fromMillis(Date.now())}static fromDate(e){return aa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*sa);return new aa(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ts(Is.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ts(Is.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ia)throw new Ts(Is.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ts(Is.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sa}_compareTo(e){return this.seconds===e.seconds?Vs(this.nanoseconds,e.nanoseconds):Vs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:aa._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ra(e,aa._jsonSchema))return new aa(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ia;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}aa._jsonSchemaVersion="firestore/timestamp/1.0",aa._jsonSchema={type:na("string",aa._jsonSchemaVersion),seconds:na("number"),nanoseconds:na("number")};class oa{static fromTimestamp(e){return new oa(e)}static min(){return new oa(new aa(0,0))}static max(){return new oa(new aa(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const la=-1;class ca{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ca.UNKNOWN_ID=-1;function ua(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=oa.fromTimestamp(1e9===r?new aa(n+1,0):new aa(n,r));return new ha(i,Js.empty(),t)}function da(e){return new ha(e.readTime,e.key,la)}class ha{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ha(oa.min(),Js.empty(),la)}static max(){return new ha(oa.max(),Js.empty(),la)}}function fa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Js.comparator(e.documentKey,t.documentKey),0!==n?n:Vs(e.largestBatchId,t.largestBatchId))}const pa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ma{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ga(e){if(e.code!==Is.FAILED_PRECONDITION||e.message!==pa)throw e;ys("LocalStore","Unexpectedly lost primary lease")}class va{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ks(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new va((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof va?t:va.resolve(t)}catch(e){return va.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):va.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):va.reject(t)}static resolve(e){return new va((t,n)=>{t(e)})}static reject(e){return new va((t,n)=>{n(e)})}static waitFor(e){return new va((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=va.resolve(!1);for(const n of e)t=t.next(e=>e?va.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new va((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new va((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ya(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ba(e){return"IndexedDbTransactionError"===e.name}class _a{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_a.ue=-1;const wa=-1;function ka(e){return null==e}function xa(e){return 0===e&&1/e==-1/0}function Ea(e){return"number"==typeof e&&Number.isInteger(e)&&!xa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Sa="\x01";function Ia(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ca(t)),t=Ta(e.get(n),t);return Ca(t)}function Ta(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Sa:n+="\x01\x11";break;default:n+=t}}return n}function Ca(e){return e+Sa+"\x01"}const Na="remoteDocuments",Aa="owner",Ra="mutationQueues",Pa="mutations";const ja="documentMutations",Oa="remoteDocumentsV14",Da="remoteDocumentGlobal",La="targets",Ma="targetDocuments",Fa="targetGlobal",Ua="collectionParents",Va="clientMetadata",za="bundles",Ba="namedQueries",$a="indexConfiguration",qa="indexState",Ha="indexEntries",Wa="documentOverlays",Ka="globals",Ga=[Ra,Pa,ja,Na,La,Aa,Fa,Ma,Va,Da,Ua,za,Ba],Qa=[Ra,Pa,ja,Oa,La,Aa,Fa,Ma,Va,Da,Ua,za,Ba,Wa],Ja=Qa,Xa=[...Ja,$a,qa,Ha];function Ya(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Za(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function eo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class to{constructor(e,t){this.comparator=e,this.root=t||ro.EMPTY}insert(e,t){return new to(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ro.BLACK,null,null))}remove(e){return new to(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ro.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new no(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new no(this.root,e,this.comparator,!1)}getReverseIterator(){return new no(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new no(this.root,e,this.comparator,!0)}}class no{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ro{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ro.RED,this.left=null!=r?r:ro.EMPTY,this.right=null!=i?i:ro.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ro(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ro.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ro.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ro.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ro.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ks(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ks(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ks(27949);return e+(this.isRed()?0:1)}}ro.EMPTY=null,ro.RED=!0,ro.BLACK=!1,ro.EMPTY=new class{constructor(){this.size=0}get key(){throw ks(57766)}get value(){throw ks(16141)}get color(){throw ks(16727)}get left(){throw ks(29726)}get right(){throw ks(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ro(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class io{constructor(e){this.comparator=e,this.data=new to(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new so(this.data.getIterator())}getIteratorFrom(e){return new so(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof io))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new io(this.comparator);return t.data=e,t}}class so{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ao{constructor(e){this.fields=e,e.sort(Qs.comparator)}static empty(){return new ao([])}unionWith(e){let t=new io(Qs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ao(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qs(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class oo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class lo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new oo("Invalid base64 string: "+e):e}}(e);return new lo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new lo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lo.EMPTY_BYTE_STRING=new lo("");const co=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(e){if(Es(!!e,39018),"string"==typeof e){let t=0;const n=co.exec(e);if(Es(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ho(e.seconds),nanos:ho(e.nanos)}}function ho(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function fo(e){return"string"==typeof e?lo.fromBase64String(e):lo.fromUint8Array(e)}const po="server_timestamp",mo="__type__",go="__previous_value__",vo="__local_write_time__";function yo(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[mo])||void 0===n?void 0:n.stringValue)===po}function bo(e){const t=e.mapValue.fields[go];return yo(t)?bo(t):t}function _o(e){const t=uo(e.mapValue.fields[vo].timestampValue);return new aa(t.seconds,t.nanos)}class wo{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const ko="(default)";class xo{constructor(e,t){this.projectId=e,this.database=t||ko}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database===ko}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}const Eo="__type__",So="__max__",Io={mapValue:{fields:{__type__:{stringValue:So}}}},To="__vector__",Co="value";function No(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yo(e)?4:Ho(e)?9007199254740991:$o(e)?10:11:ks(28295,{value:e})}function Ao(e,t){if(e===t)return!0;const n=No(e);if(n!==No(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _o(e).isEqual(_o(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=uo(e.timestampValue),r=uo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return fo(e.bytesValue).isEqual(fo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ho(e.geoPointValue.latitude)===ho(t.geoPointValue.latitude)&&ho(e.geoPointValue.longitude)===ho(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ho(e.integerValue)===ho(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ho(e.doubleValue),r=ho(t.doubleValue);return n===r?xa(n)===xa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qs(e.arrayValue.values||[],t.arrayValue.values||[],Ao);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ya(n)!==Ya(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ao(n[i],r[i])))return!1;return!0}(e,t);default:return ks(52216,{left:e})}}function Ro(e,t){return void 0!==(e.values||[]).find(e=>Ao(e,t))}function Po(e,t){if(e===t)return 0;const n=No(e),r=No(t);if(n!==r)return Vs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ho(e.integerValue||e.doubleValue),r=ho(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return jo(e.timestampValue,t.timestampValue);case 4:return jo(_o(e),_o(t));case 5:return zs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=fo(e),r=fo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Vs(n[i],r[i]);if(0!==e)return e}return Vs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Vs(ho(e.latitude),ho(t.latitude));return 0!==n?n:Vs(ho(e.longitude),ho(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Oo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Co])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Co])||void 0===r?void 0:r.arrayValue,u=Vs((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Oo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Io.mapValue&&t===Io.mapValue)return 0;if(e===Io.mapValue)return 1;if(t===Io.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=zs(r[a],s[a]);if(0!==e)return e;const t=Po(n[r[a]],i[s[a]]);if(0!==t)return t}return Vs(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ks(23264,{le:n})}}function jo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vs(e,t);const n=uo(e),r=uo(t),i=Vs(n.seconds,r.seconds);return 0!==i?i:Vs(n.nanos,r.nanos)}function Oo(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Po(n[i],r[i]);if(e)return e}return Vs(n.length,r.length)}function Do(e){return Lo(e)}function Lo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=uo(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return fo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Js.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Lo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Lo(e.fields[i])}`;return n+"}"}(e.mapValue):ks(61005,{value:e})}function Mo(e){switch(No(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bo(e);return t?16+Mo(t):16;case 5:return 2*e.stringValue.length;case 6:return fo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Mo(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Za(e.fields,(e,n)=>{t+=e.length+Mo(n)}),t}(e.mapValue);default:throw ks(13486,{value:e})}}function Fo(e){return!!e&&"integerValue"in e}function Uo(e){return!!e&&"arrayValue"in e}function Vo(e){return!!e&&"nullValue"in e}function zo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bo(e){return!!e&&"mapValue"in e}function $o(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Eo])||void 0===n?void 0:n.stringValue)===To}function qo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Za(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=qo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ho(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===So}class Wo{constructor(e){this.value=e}static empty(){return new Wo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Bo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qo(t)}setAll(e){let t=Qs.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qo(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Bo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Bo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Za(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Wo(qo(this.value))}}function Ko(e){const t=[];return Za(e.fields,(e,n)=>{const r=new Qs([e]);if(Bo(n)){const e=Ko(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ao(t)}class Go{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Go(e,0,oa.min(),oa.min(),oa.min(),Wo.empty(),0)}static newFoundDocument(e,t,n,r){return new Go(e,1,t,oa.min(),n,r,0)}static newNoDocument(e,t){return new Go(e,2,t,oa.min(),oa.min(),Wo.empty(),0)}static newUnknownDocument(e,t){return new Go(e,3,t,oa.min(),oa.min(),Wo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Go&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Go(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qo{constructor(e,t){this.position=e,this.inclusive=t}}function Jo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Js.comparator(Js.fromName(a.referenceValue),n.key):Po(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Xo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ao(e.position[n],t.position[n]))return!1;return!0}class Yo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Zo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class el{}class tl extends el{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new cl(e,t,n):"array-contains"===t?new fl(e,n):"in"===t?new pl(e,n):"not-in"===t?new ml(e,n):"array-contains-any"===t?new gl(e,n):new tl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ul(e,n):new dl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Po(t,this.value)):null!==t&&No(this.value)===No(t)&&this.matchesComparison(Po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ks(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nl extends el{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new nl(e,t)}matches(e){return rl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function rl(e){return"and"===e.op}function il(e){return sl(e)&&rl(e)}function sl(e){for(const t of e.filters)if(t instanceof nl)return!1;return!0}function al(e){if(e instanceof tl)return e.field.canonicalString()+e.op.toString()+Do(e.value);if(il(e))return e.filters.map(e=>al(e)).join(",");{const t=e.filters.map(e=>al(e)).join(",");return`${e.op}(${t})`}}function ol(e,t){return e instanceof tl?function(e,t){return t instanceof tl&&e.op===t.op&&e.field.isEqual(t.field)&&Ao(e.value,t.value)}(e,t):e instanceof nl?function(e,t){return t instanceof nl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ol(n,t.filters[r]),!0)}(e,t):void ks(19439)}function ll(e){return e instanceof tl?function(e){return`${e.field.canonicalString()} ${e.op} ${Do(e.value)}`}(e):e instanceof nl?function(e){return e.op.toString()+" {"+e.getFilters().map(ll).join(" ,")+"}"}(e):"Filter"}class cl extends tl{constructor(e,t,n){super(e,t,n),this.key=Js.fromName(n.referenceValue)}matches(e){const t=Js.comparator(e.key,this.key);return this.matchesComparison(t)}}class ul extends tl{constructor(e,t){super(e,"in",t),this.keys=hl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dl extends tl{constructor(e,t){super(e,"not-in",t),this.keys=hl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Js.fromName(e.referenceValue))}class fl extends tl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uo(t)&&Ro(t.arrayValue,this.value)}}class pl extends tl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ro(this.value.arrayValue,t)}}class ml extends tl{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ro(this.value.arrayValue,t)}}class gl extends tl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ro(this.value.arrayValue,e))}}class vl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Pe=null}}function yl(e){return new vl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function bl(e){const t=Ss(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>al(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ka(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Do(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Do(e)).join(",")),t.Pe=e}return t.Pe}function _l(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Zo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ol(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xo(e.startAt,t.startAt)&&Xo(e.endAt,t.endAt)}function wl(e){return Js.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class kl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function xl(e,t,n,r,i,s,a,o){return new kl(e,t,n,r,i,s,a,o)}function El(e){return new kl(e)}function Sl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Il(e){return null!==e.collectionGroup}function Tl(e){const t=Ss(e);if(null===t.Te){t.Te=[];const e=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new io(Qs.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new Yo(r,n))}),e.has(Qs.keyField().canonicalString())||t.Te.push(new Yo(Qs.keyField(),n))}return t.Te}function Cl(e){const t=Ss(e);return t.Ie||(t.Ie=Nl(t,Tl(e))),t.Ie}function Nl(e,t){if("F"===e.limitType)return yl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Yo(e.field,t)});const n=e.endAt?new Qo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Qo(e.startAt.position,e.startAt.inclusive):null;return yl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Al(e,t,n){return new kl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Rl(e,t){return _l(Cl(e),Cl(t))&&e.limitType===t.limitType}function Pl(e){return`${bl(Cl(e))}|lt:${e.limitType}`}function jl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>ll(e)).join(", ")}]`),ka(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Do(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Do(e)).join(",")),`Target(${t})`}(Cl(e))}; limitType=${e.limitType})`}function Ol(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Js.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Tl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Jo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Tl(e),t))&&!(e.endAt&&!function(e,t,n){const r=Jo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Tl(e),t))}(e,t)}function Dl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ll(e){return(t,n)=>{let r=!1;for(const i of Tl(e)){const e=Ml(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ml(e,t,n){const r=e.field.isKeyField()?Js.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Po(r,i):ks(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ks(19790,{direction:e.dir})}}class Fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return eo(this.inner)}size(){return this.innerSize}}const Ul=new to(Js.comparator);function Vl(){return Ul}const zl=new to(Js.comparator);function Bl(){let e=zl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function $l(e){let t=zl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ql(){return Wl()}function Hl(){return Wl()}function Wl(){return new Fl(e=>e.toString(),(e,t)=>e.isEqual(t))}const Kl=new to(Js.comparator),Gl=new io(Js.comparator);function Ql(){let e=Gl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Jl=new io(Vs);function Xl(){return Jl}function Yl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xa(t)?"-0":t}}function Zl(e){return{integerValue:""+e}}function ec(e,t){return Ea(t)?Zl(t):Yl(e,t)}class tc{constructor(){this._=void 0}}function nc(e,t,n){return e instanceof sc?function(e,t){const n={fields:{[mo]:{stringValue:po},[vo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yo(t)&&(t=bo(t)),t&&(n.fields[go]=t),{mapValue:n}}(n,t):e instanceof ac?oc(e,t):e instanceof lc?cc(e,t):function(e,t){const n=ic(e,t),r=dc(n)+dc(e.Ee);return Fo(n)&&Fo(e.Ee)?Zl(r):Yl(e.serializer,r)}(e,t)}function rc(e,t,n){return e instanceof ac?oc(e,t):e instanceof lc?cc(e,t):n}function ic(e,t){return e instanceof uc?function(e){return Fo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class sc extends tc{}class ac extends tc{constructor(e){super(),this.elements=e}}function oc(e,t){const n=hc(t);for(const r of e.elements)n.some(e=>Ao(e,r))||n.push(r);return{arrayValue:{values:n}}}class lc extends tc{constructor(e){super(),this.elements=e}}function cc(e,t){let n=hc(t);for(const r of e.elements)n=n.filter(e=>!Ao(e,r));return{arrayValue:{values:n}}}class uc extends tc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function dc(e){return ho(e.integerValue||e.doubleValue)}function hc(e){return Uo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fc{constructor(e,t){this.version=e,this.transformResults=t}}class pc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pc}static exists(e){return new pc(void 0,e)}static updateTime(e){return new pc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gc{}function vc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tc(e.key,pc.none()):new kc(e.key,e.data,pc.none());{const n=e.data,r=Wo.empty();let i=new io(Qs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new xc(e.key,r,new ao(i.toArray()),pc.none())}}function yc(e,t,n){e instanceof kc?function(e,t,n){const r=e.value.clone(),i=Sc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xc?function(e,t,n){if(!mc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Sc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ec(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function bc(e,t,n,r){return e instanceof kc?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=e.value.clone(),s=Ic(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof xc?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=Ic(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ec(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return mc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _c(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ic(r.transform,e||null);null!=i&&(null===n&&(n=Wo.empty()),n.set(r.field,i))}return n||null}function wc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qs(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ac&&t instanceof ac||e instanceof lc&&t instanceof lc?qs(e.elements,t.elements,Ao):e instanceof uc&&t instanceof uc?Ao(e.Ee,t.Ee):e instanceof sc&&t instanceof sc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class kc extends gc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xc extends gc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ec(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Sc(e,t,n){const r=new Map;Es(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,rc(a,o,n[i]))}return r}function Ic(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,nc(e,s,t))}return r}class Tc extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cc extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&yc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=bc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=bc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Hl();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=vc(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(oa.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ql())}isEqual(e){return this.batchId===e.batchId&&qs(this.mutations,e.mutations,(e,t)=>wc(e,t))&&qs(this.baseMutations,e.baseMutations,(e,t)=>wc(e,t))}}class Ac{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Es(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=Kl;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ac(e,t,n,r)}}class Rc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pc{constructor(e,t){this.count=e,this.unchangedNames=t}}var jc,Oc;function Dc(e){switch(e){case Is.OK:return ks(64938);case Is.CANCELLED:case Is.UNKNOWN:case Is.DEADLINE_EXCEEDED:case Is.RESOURCE_EXHAUSTED:case Is.INTERNAL:case Is.UNAVAILABLE:case Is.UNAUTHENTICATED:return!1;case Is.INVALID_ARGUMENT:case Is.NOT_FOUND:case Is.ALREADY_EXISTS:case Is.PERMISSION_DENIED:case Is.FAILED_PRECONDITION:case Is.ABORTED:case Is.OUT_OF_RANGE:case Is.UNIMPLEMENTED:case Is.DATA_LOSS:return!0;default:return ks(15467,{code:e})}}function Lc(e){if(void 0===e)return bs("GRPC error has no .code"),Is.UNKNOWN;switch(e){case jc.OK:return Is.OK;case jc.CANCELLED:return Is.CANCELLED;case jc.UNKNOWN:return Is.UNKNOWN;case jc.DEADLINE_EXCEEDED:return Is.DEADLINE_EXCEEDED;case jc.RESOURCE_EXHAUSTED:return Is.RESOURCE_EXHAUSTED;case jc.INTERNAL:return Is.INTERNAL;case jc.UNAVAILABLE:return Is.UNAVAILABLE;case jc.UNAUTHENTICATED:return Is.UNAUTHENTICATED;case jc.INVALID_ARGUMENT:return Is.INVALID_ARGUMENT;case jc.NOT_FOUND:return Is.NOT_FOUND;case jc.ALREADY_EXISTS:return Is.ALREADY_EXISTS;case jc.PERMISSION_DENIED:return Is.PERMISSION_DENIED;case jc.FAILED_PRECONDITION:return Is.FAILED_PRECONDITION;case jc.ABORTED:return Is.ABORTED;case jc.OUT_OF_RANGE:return Is.OUT_OF_RANGE;case jc.UNIMPLEMENTED:return Is.UNIMPLEMENTED;case jc.DATA_LOSS:return Is.DATA_LOSS;default:return ks(39323,{code:e})}}(Oc=jc||(jc={}))[Oc.OK=0]="OK",Oc[Oc.CANCELLED=1]="CANCELLED",Oc[Oc.UNKNOWN=2]="UNKNOWN",Oc[Oc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oc[Oc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oc[Oc.NOT_FOUND=5]="NOT_FOUND",Oc[Oc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oc[Oc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oc[Oc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oc[Oc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oc[Oc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oc[Oc.ABORTED=10]="ABORTED",Oc[Oc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oc[Oc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oc[Oc.INTERNAL=13]="INTERNAL",Oc[Oc.UNAVAILABLE=14]="UNAVAILABLE",Oc[Oc.DATA_LOSS=15]="DATA_LOSS";let Mc=null;const Fc=new Yi([4294967295,4294967295],0);function Uc(e){const t=Fs().encode(e),n=new Zi;return n.update(t),new Uint8Array(n.digest())}function Vc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Yi([n,r],0),new Yi([i,s],0)]}class zc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Bc(`Invalid padding: ${t}`);if(n<0)throw new Bc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Bc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Bc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Yi.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(Yi.fromNumber(n)));return 1===r.compare(Fc)&&(r=new Yi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=Uc(e),[n,r]=Vc(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new zc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.fe)return;const t=Uc(e),[n,r]=Vc(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $c{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,qc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new $c(oa.min(),r,new to(Vs),Vl(),Ql())}}class qc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new qc(n,t,Ql(),Ql(),Ql())}}class Hc{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class Wc{constructor(e,t){this.targetId=e,this.De=t}}class Kc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Gc{constructor(){this.ve=0,this.Ce=Xc(),this.Fe=lo.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ql(),t=Ql(),n=Ql();return this.Ce.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ks(38017,{changeType:i})}}),new qc(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=Xc()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Es(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Qc{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vl(),this.je=Jc(),this.Je=Jc(),this.He=new to(Vs)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:ks(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const i=r.target;if(wl(i))if(0===n){const e=new Js(i.path);this.Xe(t,e,Go.newNoDocument(e,oa.min()))}else Es(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),i=n?this.ut(n,e,r):1;if(0!==i){this.rt(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}null==Mc||Mc.ct(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.De,this.We.lt(),n,i))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=fo(n).toUint8Array()}catch(e){if(e instanceof oo)return _s("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new zc(s,r,i)}catch(e){return _s(e instanceof Bc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.fe?null:a}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.We.lt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const i=this.st(r);if(i){if(n.current&&wl(i.target)){const t=new Js(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,Go.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=Ql();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new $c(e,t,this.He,this.ze,n);return this.ze=Vl(),this.je=Jc(),this.Je=Jc(),this.He=new to(Vs),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Gc,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new io(Vs),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new io(Vs),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||ys("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Gc),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Jc(){return new to(Js.comparator)}function Xc(){return new to(Js.comparator)}const Yc={asc:"ASCENDING",desc:"DESCENDING"},Zc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eu={and:"AND",or:"OR"};class tu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nu(e,t){return e.useProto3Json||ka(t)?t:{value:t}}function ru(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function iu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function su(e,t){return ru(e,t.toTimestamp())}function au(e){return Es(!!e,49232),oa.fromTimestamp(function(e){const t=uo(e);return new aa(t.seconds,t.nanos)}(e))}function ou(e,t){return lu(e,t).canonicalString()}function lu(e,t){const n=function(e){return new Ks(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function cu(e){const t=Ks.fromString(e);return Es(Nu(t),10190,{key:t.toString()}),t}function uu(e,t){return ou(e.databaseId,t.path)}function du(e,t){const n=cu(t);if(n.get(1)!==e.databaseId.projectId)throw new Ts(Is.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ts(Is.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Js(mu(n))}function hu(e,t){return ou(e.databaseId,t)}function fu(e){const t=cu(e);return 4===t.length?Ks.emptyPath():mu(t)}function pu(e){return new Ks(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function mu(e){return Es(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function gu(e,t,n){return{name:uu(e,t),fields:n.value.mapValue.fields}}function vu(e,t){let n;if(t instanceof kc)n={update:gu(e,t.key,t.value)};else if(t instanceof Tc)n={delete:uu(e,t.key)};else if(t instanceof xc)n={update:gu(e,t.key,t.data),updateMask:Cu(t.fieldMask)};else{if(!(t instanceof Cc))return ks(16599,{Rt:t.type});n={verify:uu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof sc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ac)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof lc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof uc)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw ks(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:su(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ks(27497)}(e,t.precondition)),n}function yu(e,t){return{documents:[hu(e,t.path)]}}function bu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hu(e,i);const s=function(e){if(0!==e.length)return Tu(nl.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Su(e.field),direction:ku(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=nu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i}}function _u(e){let t=fu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Es(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=wu(e);return t instanceof nl&&il(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Yo(Iu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ka(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Qo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Qo(n,t)}(n.endAt)),xl(t,i,a,s,o,"F",l,c)}function wu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Iu(e.unaryFilter.field);return tl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Iu(e.unaryFilter.field);return tl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Iu(e.unaryFilter.field);return tl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Iu(e.unaryFilter.field);return tl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ks(61313);default:return ks(60726)}}(e):void 0!==e.fieldFilter?function(e){return tl.create(Iu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ks(58110);default:return ks(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return nl.create(e.compositeFilter.filters.map(e=>wu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ks(1026)}}(e.compositeFilter.op))}(e):ks(30097,{filter:e})}function ku(e){return Yc[e]}function xu(e){return Zc[e]}function Eu(e){return eu[e]}function Su(e){return{fieldPath:e.canonicalString()}}function Iu(e){return Qs.fromServerFormat(e.fieldPath)}function Tu(e){return e instanceof tl?function(e){if("=="===e.op){if(zo(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NAN"}};if(Vo(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zo(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NOT_NAN"}};if(Vo(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Su(e.field),op:xu(e.op),value:e.value}}}(e):e instanceof nl?function(e){const t=e.getFilters().map(e=>Tu(e));return 1===t.length?t[0]:{compositeFilter:{op:Eu(e.op),filters:t}}}(e):ks(54877,{filter:e})}function Cu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Nu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Au{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:oa.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:oa.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:lo.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ru{constructor(e){this.gt=e}}function Pu(e){const t=_u({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Al(t,t.limit,"L"):t}class ju{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ho(e.integerValue));else if("doubleValue"in e){const n=ho(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),xa(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=uo(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(fo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?Ho(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):$o(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ks(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const i=e.fields||{};this.Ct(t,53);const s=Co,a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(ho(a)),this.xt(s,t),this.Dt(i[s],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),Js.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}ju.Ut=new ju;class Ou{constructor(){this.Dn=new Du}addToCollectionParentIndex(e,t){return this.Dn.add(t),va.resolve()}getCollectionParents(e,t){return va.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return va.resolve()}deleteFieldIndex(e,t){return va.resolve()}deleteAllFieldIndexes(e){return va.resolve()}createTargetIndexes(e,t){return va.resolve()}getDocumentsMatchingTarget(e,t){return va.resolve(null)}getIndexType(e,t){return va.resolve(0)}getFieldIndexes(e,t){return va.resolve([])}getNextCollectionGroupToUpdate(e){return va.resolve(null)}getMinOffset(e,t){return va.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,t){return va.resolve(ha.min())}updateCollectionGroup(e,t,n){return va.resolve()}updateIndexEntries(e,t){return va.resolve()}}class Du{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new io(Ks.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new io(Ks.comparator)).toArray()}}new Uint8Array(0);const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mu=41943040;class Fu{static withCacheSize(e){return new Fu(e,Fu.DEFAULT_COLLECTION_PERCENTILE,Fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Fu.DEFAULT_COLLECTION_PERCENTILE=10,Fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fu.DEFAULT=new Fu(Mu,Fu.DEFAULT_COLLECTION_PERCENTILE,Fu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fu.DISABLED=new Fu(-1,0,0);class Uu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Uu(0)}static ur(){return new Uu(-1)}}const Vu="LruGarbageCollector",zu=1048576;function Bu(e,t){let[n,r]=e,[i,s]=t;const a=Vs(n,i);return 0===a?Vs(r,s):a}class $u{constructor(e){this.Tr=e,this.buffer=new io(Bu),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Bu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){ys(Vu,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ba(e)?ys(Vu,"Ignoring IndexedDB error during garbage collection: ",e):await ga(e)}await this.Rr(3e5)})}}class Hu{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return va.resolve(_a.ue);const n=new $u(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ys("LruGarbageCollector","Garbage collection skipped; disabled"),va.resolve(Lu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ys("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ys("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),vs()<=ae.DEBUG&&ys("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(o-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),va.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Wu(e,t){return new Hu(e,t)}class Ku{constructor(){this.changes=new Fl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Go.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?va.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&bc(n.mutation,e,ao.empty(),aa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ql()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ql();const r=ql();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Bl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ql();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ql()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Vl();const s=Wl(),a=Wl();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof xc)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),bc(a.mutation,t,a.mutation.getFieldMask(),aa.now())):s.set(t.key,ao.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Gu(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Wl();let r=new to((e,t)=>e-t),i=Ql();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||ao.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Ql()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Hl();l.forEach(e=>{if(!i.has(e)){const r=vc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return va.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Js.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Il(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):va.resolve(ql());let a=la,o=i;return s.next(t=>va.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?va.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Ql())).next(e=>({batchId:a,changes:$l(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Js(t)).next(e=>{let t=Bl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Bl();return this.indexManager.getCollectionParents(e,i).next(a=>va.forEach(a,a=>{const o=function(e,t){return new kl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Go.newInvalidDocument(r)))});let n=Bl();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&bc(s.mutation,r,ao.empty(),aa.now()),Ol(t,r)&&(n=n.insert(e,r))}),n})}}class Ju{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return va.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:au(e.createTime)}}(t)),va.resolve()}getNamedQuery(e,t){return va.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Pu(e.bundledQuery),readTime:au(e.readTime)}}(t)),va.resolve()}}class Xu{constructor(){this.overlays=new to(Js.comparator),this.kr=new Map}getOverlay(e,t){return va.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ql();return va.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),va.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),va.resolve()}getOverlaysForCollection(e,t,n){const r=ql(),i=t.length+1,s=new Js(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return va.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new to((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ql(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ql(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return va.resolve(a)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Rc(t,n));let i=this.kr.get(t);void 0===i&&(i=Ql(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}class Yu{constructor(){this.sessionToken=lo.EMPTY_BYTE_STRING}getSessionToken(e){return va.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,va.resolve()}}class Zu{constructor(){this.qr=new io(ed.Qr),this.$r=new io(ed.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new ed(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new ed(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new Js(new Ks([])),n=new ed(t,e),r=new ed(t,e+1),i=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Js(new Ks([])),n=new ed(t,e),r=new ed(t,e+1);let i=Ql();return this.$r.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ed(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ed{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Js.comparator(e.key,t.key)||Vs(e.Hr,t.Hr)}static Ur(e,t){return Vs(e.Hr,t.Hr)||Js.comparator(e.key,t.key)}}class td{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new io(ed.Qr)}checkEmpty(e){return va.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Nc(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Yr=this.Yr.add(new ed(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return va.resolve(s)}lookupMutationBatch(e,t){return va.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return va.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return va.resolve(0===this.mutationQueue.length?wa:this.er-1)}getAllMutationBatches(e){return va.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ed(t,0),r=new ed(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),va.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new io(Vs);return t.forEach(e=>{const t=new ed(e,0),r=new ed(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),va.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Js.isDocumentKey(i)||(i=i.child(""));const s=new ed(new Js(i),0);let a=new io(Vs);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},s),va.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Es(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return va.forEach(t.mutations,r=>{const i=new ed(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new ed(t,0),r=this.Yr.firstAfterOrEqual(n);return va.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,va.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nd{constructor(e){this.ni=e,this.docs=new to(Js.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return va.resolve(n?n.document.mutableCopy():Go.newInvalidDocument(t))}getEntries(e,t){let n=Vl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Go.newInvalidDocument(e))}),va.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Vl();const s=t.path,a=new Js(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||fa(da(a),n)<=0||(r.has(a.key)||Ol(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return va.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ks(9500)}ri(e,t){return va.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new rd(this)}getSize(e){return va.resolve(this.size)}}class rd extends Ku{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),va.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class id{constructor(e){this.persistence=e,this.ii=new Fl(e=>bl(e),_l),this.lastRemoteSnapshotVersion=oa.min(),this.highestTargetId=0,this.si=0,this.oi=new Zu,this.targetCount=0,this._i=Uu.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),va.resolve()}getLastRemoteSnapshotVersion(e){return va.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return va.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),va.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),va.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Uu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,va.resolve()}updateTargetData(e,t){return this.hr(t),va.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,va.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),va.waitFor(i).next(()=>r)}getTargetCount(e){return va.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return va.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),va.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),va.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),va.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return va.resolve(n)}containsKey(e,t){return va.resolve(this.oi.containsKey(t))}}class sd{constructor(e,t){this.ai={},this.overlays={},this.ui=new _a(0),this.ci=!1,this.ci=!0,this.li=new Yu,this.referenceDelegate=e(this),this.hi=new id(this),this.indexManager=new Ou,this.remoteDocumentCache=function(e){return new nd(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Ru(t),this.Ti=new Ju(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new td(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){ys("MemoryPersistence","Starting transaction:",e);const r=new ad(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return va.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class ad extends ma{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.Ai=new Zu,this.Ri=null}static Vi(e){return new od(e)}get mi(){if(this.Ri)return this.Ri;throw ks(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),va.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),va.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),va.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return va.forEach(this.mi,n=>{const r=Js.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,oa.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return va.or([()=>va.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ld{constructor(e,t){this.persistence=e,this.gi=new Fl(e=>Ia(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Wu(this,t)}static Vi(e,t){return new ld(e,t)}Ii(){}di(e){return va.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return va.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?va.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,oa.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),va.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),va.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),va.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),va.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mo(e.data.value)),t}Sr(e,t,n){return va.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return va.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=Ql(),r=Ql();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new cd(e,t.fromCache,n,r)}}class ud{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class dd{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=V()?8:ya(M())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new ud;return this.ws(e,t,n).next(r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>i.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(vs()<=ae.DEBUG&&ys("QueryEngine","SDK will not create cache indexes for query:",jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),va.resolve()):(vs()<=ae.DEBUG&&ys("QueryEngine","Query:",jl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(vs()<=ae.DEBUG&&ys("QueryEngine","The SDK decides to create cache indexes for query:",jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cl(t))):va.resolve())}ps(e,t){if(Sl(t))return va.resolve(null);let n=Cl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Al(t,null,"F"),n=Cl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Ql(...r);return this.gs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ds(t,s,i,n.readTime)?this.ps(e,Al(t,null,"F")):this.vs(e,s,t,n)}))})))}ys(e,t,n,r){return Sl(t)||r.isEqual(oa.min())?va.resolve(null):this.gs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ds(t,s,n,r)?va.resolve(null):(vs()<=ae.DEBUG&&ys("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jl(t)),this.vs(e,s,t,ua(r,la)).next(e=>e))})}bs(e,t){let n=new io(Ll(e));return t.forEach((t,r)=>{Ol(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return vs()<=ae.DEBUG&&ys("QueryEngine","Using full collection scan to execute query:",jl(t)),this.gs.getDocumentsMatchingQuery(e,t,ha.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const hd="LocalStore";class fd{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new to(Vs),this.Ms=new Fl(e=>bl(e),_l),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qu(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function pd(e,t,n,r){return new fd(e,t,n,r)}async function md(e,t){const n=Ss(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Ql();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:s}))})})}function gd(e){const t=Ss(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function vd(e,t,n){let r=Ql(),i=Ql();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Vl();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(oa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ys(hd,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ls:r,ks:i}})}function yd(e,t){const n=Ss(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=wa),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function bd(e,t){const n=Ss(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(i=>i?(r=i,va.resolve(r)):n.hi.allocateTargetId(e).next(i=>(r=new Au(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}async function _d(e,t,n){const r=Ss(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!ba(e))throw e;ys(hd,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function wd(e,t,n){const r=Ss(e);let i=oa.min(),s=Ql();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ss(e),i=r.Ms.get(n);return void 0!==i?va.resolve(r.Fs.get(i)):r.hi.getTargetData(t,n)}(r,e,Cl(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:oa.min(),n?s:Ql())).next(e=>(kd(r,Dl(t),e),{documents:e,qs:s})))}function kd(e,t,n){let r=e.xs.get(t)||oa.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}class xd{constructor(){this.activeTargetIds=Xl()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ed{constructor(){this.Fo=new xd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Sd{xo(e){}shutdown(){}}const Id="ConnectivityMonitor";class Td{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ys(Id,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ys(Id,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cd=null;function Nd(){return null===Cd?Cd=268435456+Math.round(2147483648*Math.random()):Cd++,"0x"+Cd.toString(16)}const Ad="RestConnection",Rd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pd{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===ko?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const s=Nd(),a=this.Go(e,t.toUriEncodedString());ys(Ad,`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,r,i);const{host:l}=new URL(a),c=P(l);return this.jo(e,a,o,n,c).then(t=>(ys(Ad,`Received RPC '${e}' ${s}: `,t),t),t=>{throw _s(Ad,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ms,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Rd[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}class jd{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Od="WebChannelConnection";class Dd extends Pd{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){const s=Nd();return new Promise((i,a)=>{const o=new ns;o.setWithCredentials(!0),o.listenOnce(is.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case ss.NO_ERROR:const t=o.getResponseJson();ys(Od,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case ss.TIMEOUT:ys(Od,`RPC '${e}' ${s} timed out`),a(new Ts(Is.DEADLINE_EXCEEDED,"Request time out"));break;case ss.HTTP_ERROR:const n=o.getStatus();if(ys(Od,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Is).indexOf(t)>=0?t:Is.UNKNOWN}(t.status);a(new Ts(e,t.message))}else a(new Ts(Is.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ts(Is.UNAVAILABLE,"Connection failed."));break;default:ks(9055,{c_:e,streamId:s,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{ys(Od,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);ys(Od,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Nd(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cs(),a=ls(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");ys(Od,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);this.T_(u);let d=!1,h=!1;const f=new jd({Ho:t=>{h?ys(Od,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(ys(Od,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),ys(Od,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,rs.EventType.OPEN,()=>{h||(ys(Od,`RPC '${e}' stream ${r} transport opened.`),f.s_())}),p(u,rs.EventType.CLOSE,()=>{h||(h=!0,ys(Od,`RPC '${e}' stream ${r} transport closed`),f.__(),this.I_(u))}),p(u,rs.EventType.ERROR,t=>{h||(h=!0,_s(Od,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.__(new Ts(Is.UNAVAILABLE,"The operation could not be completed")))}),p(u,rs.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Es(!!i,16349);const s=i,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){ys(Od,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=jc[e];if(void 0!==t)return Lc(t)}(t),i=a.message;void 0===n&&(n=Is.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.__(new Ts(n,i)),u.close()}else ys(Od,`RPC '${e}' stream ${r} received:`,i),f.a_(i)}}),p(a,os.STAT_EVENT,t=>{t.stat===as.PROXY?ys(Od,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===as.NOPROXY&&ys(Od,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Ld(){return"undefined"!=typeof document?document:null}function Md(e){return new tu(e,!0)}class Fd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&ys("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const Ud="PersistentStream";class Vd{constructor(e,t,n,r,i,s,a,o){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Fd(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===Is.RESOURCE_EXHAUSTED?(bs(t.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Is.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.b_===t&&this.W_(n,r)},t=>{e(()=>{const e=new Ts(Is.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ys(Ud,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ys(Ud,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zd extends Vd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ks(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Es(void 0===t||"string"==typeof t,58123),lo.fromBase64String(t||"")):(Es(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),lo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Is.UNKNOWN:Lc(e.code);return new Ts(t,e.message||"")}(a);n=new Kc(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=du(e,r.document.name),s=au(r.document.updateTime),a=r.document.createTime?au(r.document.createTime):oa.min(),o=new Wo({mapValue:{fields:r.document.fields}}),l=Go.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Hc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=du(e,r.document),s=r.readTime?au(r.readTime):oa.min(),a=Go.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Hc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=du(e,r.document),s=r.removedTargetIds||[];n=new Hc([],s,i,null)}else{if(!("filter"in t))return ks(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Pc(r,i),a=e.targetId;n=new Wc(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return oa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?oa.min():t.readTime?au(t.readTime):oa.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=pu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=wl(r)?{documents:yu(e,r)}:{query:bu(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=iu(e,t.resumeToken);const r=nu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(oa.min())>0){n.readTime=ru(e,t.snapshotVersion.toTimestamp());const r=nu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ks(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=pu(this.serializer),t.removeTarget=e,this.k_(t)}}class Bd extends Vd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Es(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Es(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){Es(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(Es(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?au(e.updateTime):au(t);return n.isEqual(oa.min())&&(n=au(t)),new fc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=au(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=pu(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>vu(this.serializer,e))};this.k_(t)}}class $d{}class qd extends $d{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Ts(Is.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Wo(e,lu(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Is.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ts(Is.UNKNOWN,e.toString())})}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Jo(e,lu(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Is.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ts(Is.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Hd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(bs(t),this._a=!1):ys("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Wd="RemoteStore";class Kd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{nh(this)&&(ys(Wd,"Restarting streams for network reachability change."),await async function(e){const t=Ss(e);t.Ia.add(4),await Qd(t),t.Aa.set("Unknown"),t.Ia.delete(4),await Gd(t)}(this))})}),this.Aa=new Hd(n,r)}}async function Gd(e){if(nh(e))for(const t of e.da)await t(!0)}async function Qd(e){for(const t of e.da)await t(!1)}function Jd(e,t){const n=Ss(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),th(n)?eh(n):wh(n).x_()&&Yd(n,t))}function Xd(e,t){const n=Ss(e),r=wh(n);n.Ta.delete(t),r.x_()&&Zd(n,t),0===n.Ta.size&&(r.x_()?r.B_():nh(n)&&n.Aa.set("Unknown"))}function Yd(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(oa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wh(e).H_(t)}function Zd(e,t){e.Ra.$e(t),wh(e).Y_(t)}function eh(e){e.Ra=new Qc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),wh(e).start(),e.Aa.aa()}function th(e){return nh(e)&&!wh(e).M_()&&e.Ta.size>0}function nh(e){return 0===Ss(e).Ia.size}function rh(e){e.Ra=void 0}async function ih(e){e.Aa.set("Online")}async function sh(e){e.Ta.forEach((t,n)=>{Yd(e,t)})}async function ah(e,t){rh(e),th(e)?(e.Aa.la(t),eh(e)):e.Aa.set("Unknown")}async function oh(e,t,n){if(e.Aa.set("Online"),t instanceof Kc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){ys(Wd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await lh(e,n)}else if(t instanceof Hc?e.Ra.Ye(t):t instanceof Wc?e.Ra.it(t):e.Ra.et(t),!n.isEqual(oa.min()))try{const t=await gd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(lo.EMPTY_BYTE_STRING,r.snapshotVersion)),Zd(e,t);const i=new Au(r.target,t,n,r.sequenceNumber);Yd(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ys(Wd,"Failed to raise snapshot:",t),await lh(e,t)}}async function lh(e,t,n){if(!ba(t))throw t;e.Ia.add(1),await Qd(e),e.Aa.set("Offline"),n||(n=()=>gd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ys(Wd,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Gd(e)})}function ch(e,t){return t().catch(n=>lh(e,n,t))}async function uh(e){const t=Ss(e),n=kh(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:wa;for(;dh(t);)try{const e=await yd(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,hh(t,e)}catch(e){await lh(t,e)}fh(t)&&ph(t)}function dh(e){return nh(e)&&e.Pa.length<10}function hh(e,t){e.Pa.push(t);const n=kh(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function fh(e){return nh(e)&&!kh(e).M_()&&e.Pa.length>0}function ph(e){kh(e).start()}async function mh(e){kh(e).na()}async function gh(e){const t=kh(e);for(const n of e.Pa)t.X_(n.mutations)}async function vh(e,t,n){const r=e.Pa.shift(),i=Ac.from(r,t,n);await ch(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await uh(e)}async function yh(e,t){t&&kh(e).Z_&&await async function(e,t){if(function(e){return Dc(e)&&e!==Is.ABORTED}(t.code)){const n=e.Pa.shift();kh(e).N_(),await ch(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await uh(e)}}(e,t),fh(e)&&ph(e)}async function bh(e,t){const n=Ss(e);n.asyncQueue.verifyOperationInProgress(),ys(Wd,"RemoteStore received new credentials");const r=nh(n);n.Ia.add(3),await Qd(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Gd(n)}async function _h(e,t){const n=Ss(e);t?(n.Ia.delete(2),await Gd(n)):t||(n.Ia.add(2),await Qd(n),n.Aa.set("Unknown"))}function wh(e){return e.Va||(e.Va=function(e,t,n){const r=Ss(e);return r.ia(),new zd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:ih.bind(null,e),e_:sh.bind(null,e),n_:ah.bind(null,e),J_:oh.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),th(e)?eh(e):e.Aa.set("Unknown")):(await e.Va.stop(),rh(e))})),e.Va}function kh(e){return e.ma||(e.ma=function(e,t,n){const r=Ss(e);return r.ia(),new Bd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:mh.bind(null,e),n_:yh.bind(null,e),ea:gh.bind(null,e),ta:vh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await uh(e)):(await e.ma.stop(),e.Pa.length>0&&(ys(Wd,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}class xh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new xh(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ts(Is.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eh(e,t){if(bs("AsyncQueue",`${t}: ${e}`),ba(e))return new Ts(Is.UNAVAILABLE,`${t}: ${e}`);throw e}class Sh{static emptySet(e){return new Sh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Js.comparator(t.key,n.key):(e,t)=>Js.comparator(e.key,t.key),this.keyedMap=Bl(),this.sortedSet=new to(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Sh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ih{constructor(){this.fa=new to(Js.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ks(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Th{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Th(e,t,Sh.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ch{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Nh{constructor(){this.queries=Ah(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=Ss(e),r=n.queries;n.queries=Ah(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new Ts(Is.ABORTED,"Firestore shutting down"))}}function Ah(){return new Fl(e=>Pl(e),Rl)}async function Rh(e,t){const n=Ss(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new Ch,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Eh(e,`Initialization of query '${jl(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&Dh(n)}async function Ph(e,t){const n=Ss(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.wa.indexOf(t);e>=0&&(s.wa.splice(e,1),0===s.wa.length?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jh(e,t){const n=Ss(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(i)&&(r=!0);t.ya=i}}r&&Dh(n)}function Oh(e,t,n){const r=Ss(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function Dh(e){e.Da.forEach(e=>{e.next()})}var Lh,Mh;(Mh=Lh||(Lh={})).Fa="default",Mh.Cache="cache";class Fh{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Th(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Lh.Cache}}class Uh{constructor(e){this.key=e}}class Vh{constructor(e){this.key=e}}class zh{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ql(),this.mutatedKeys=Ql(),this.Xa=Ll(e),this.eu=new Sh(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Ih,r=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ol(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.iu(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Xa(u,o)>0||l&&this.Xa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:s,ru:n,Ds:a,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ks(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const a=t&&!r?this.ou():[],o=0===this.Za.size&&this.current&&!r?1:0,l=o!==this.Ya;return this.Ya=o,0!==s.length||l?{snapshot:new Th(this.query,e.eu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ih,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ql(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new Vh(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new Uh(n))}),t}uu(e){this.Ha=e.qs,this.Za=Ql();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Th.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Bh="SyncEngine";class $h{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class qh{constructor(e){this.key=e,this.lu=!1}}class Hh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Fl(e=>Pl(e),Rl),this.Tu=new Map,this.Iu=new Set,this.du=new to(Js.comparator),this.Eu=new Map,this.Au=new Zu,this.Ru={},this.Vu=new Map,this.mu=Uu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function Wh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=pf(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await Gh(r,t,n,!0),i}async function Kh(e,t){const n=pf(e);await Gh(n,t,!0,!1)}async function Gh(e,t,n,r){const i=await bd(e.localStore,Cl(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Qh(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Jd(e.remoteStore,i),o}async function Qh(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await wd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.nu(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return lf(e,t.targetId,o._u),o.snapshot}(e,t,n,r);const s=await wd(e.localStore,t,!0),a=new zh(t,s.qs),o=a.nu(s.documents),l=qc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);lf(e,n,c._u);const u=new $h(t,n,a);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}async function Jh(e,t,n){const r=Ss(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(e=>!Rl(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _d(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xd(r.remoteStore,i.targetId),af(r,i.targetId)}).catch(ga)):(af(r,i.targetId),await _d(r.localStore,i.targetId,!0))}async function Xh(e,t){const n=Ss(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xd(n.remoteStore,r.targetId))}async function Yh(e,t){const n=Ss(e);try{const e=await function(e,t){const n=Ss(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.hi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.hi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(lo.EMPTY_BYTE_STRING,oa.min()).withLastLimboFreeSnapshotVersion(oa.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.hi.updateTargetData(e,c))});let o=Vl(),l=Ql();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(vd(e,s,t.documentUpdates).next(e=>{o=e.Ls,l=e.ks})),!r.isEqual(oa.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return va.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Fs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(Es(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?Es(r.lu,14607):e.removedDocuments.size>0&&(Es(r.lu,42227),r.lu=!1))}),await df(n,e,t)}catch(e){await ga(e)}}function Zh(e,t,n){const r=Ss(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ss(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.wa)i.va(t)&&(r=!0)}),r&&Dh(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ef(e,t,n){const r=Ss(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let e=new to(Js.comparator);e=e.insert(s,Go.newNoDocument(s,oa.min()));const n=Ql().add(s),i=new $c(oa.min(),new Map,new to(Vs),e,n);await Yh(r,i),r.du=r.du.remove(s),r.Eu.delete(t),uf(r)}else await _d(r.localStore,t,!1).then(()=>af(r,t,n)).catch(ga)}async function tf(e,t){const n=Ss(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ss(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=va.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Es(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ql();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);sf(n,r,null),rf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await df(n,e)}catch(e){await ga(e)}}async function nf(e,t,n){const r=Ss(e);try{const e=await function(e,t){const n=Ss(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Es(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);sf(r,t,n),rf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await df(r,e)}catch(n){await ga(n)}}function rf(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function sf(e,t,n){const r=Ss(e);let i=r.Ru[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function af(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||of(e,t)})}function of(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Xd(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),uf(e))}function lf(e,t,n){for(const r of n)r instanceof Uh?(e.Au.addReference(r.key,t),cf(e,r)):r instanceof Vh?(ys(Bh,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||of(e,r.key)):ks(19791,{yu:r})}function cf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(ys(Bh,"New document in limbo: "+n),e.Iu.add(r),uf(e))}function uf(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new Js(Ks.fromString(t)),r=e.mu.next();e.Eu.set(r,new qh(n)),e.du=e.du.insert(n,r),Jd(e.remoteStore,new Au(Cl(El(n.path)),r,"TargetPurposeLimboResolution",_a.ue))}}async function df(e,t,n){const r=Ss(e),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((e,o)=>{a.push(r.gu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=cd.Es(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.hu.J_(i),await async function(e,t){const n=Ss(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>va.forEach(t,t=>va.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>va.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ba(e))throw e;ys(hd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,i)}}}(r.localStore,s))}async function hf(e,t){const n=Ss(e);if(!n.currentUser.isEqual(t)){ys(Bh,"User change. New user:",t.toKey());const e=await md(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new Ts(Is.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await df(n,e.Bs)}}function ff(e,t){const n=Ss(e),r=n.Eu.get(t);if(r&&r.lu)return Ql().add(r.key);{let e=Ql();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function pf(e){const t=Ss(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ff.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ef.bind(null,t),t.hu.J_=jh.bind(null,t.eventManager),t.hu.pu=Oh.bind(null,t.eventManager),t}function mf(e){const t=Ss(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nf.bind(null,t),t}class gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return pd(this.persistence,new dd,e.initialUser,this.serializer)}Du(e){return new sd(od.Vi,this.serializer)}bu(e){return new Ed}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gf.provider={build:()=>new gf};class vf extends gf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Es(this.persistence.referenceDelegate instanceof ld,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new qu(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?Fu.withCacheSize(this.cacheSizeBytes):Fu.DEFAULT;return new sd(e=>ld.Vi(e,t),this.serializer)}}class yf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Zh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=hf.bind(null,this.syncEngine),await _h(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Nh}createDatastore(e){const t=Md(e.databaseInfo.databaseId),n=function(e){return new Dd(e)}(e.databaseInfo);return function(e,t,n,r){return new qd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Kd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Zh(this.syncEngine,e,0),Td.C()?new Td:new Sd)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Hh(e,t,n,r,i,s);return a&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ss(e);ys(Wd,"RemoteStore shutting down."),t.Ia.add(5),await Qd(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}yf.provider={build:()=>new yf};class bf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):bs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const _f="FirestoreClient";class wf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ps.UNAUTHENTICATED,this.clientId=Us.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{ys(_f,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ys(_f,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Eh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function kf(e,t){e.asyncQueue.verifyOperationInProgress(),ys(_f,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await md(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{_s("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{ys("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{_s("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function xf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ef(e);ys(_f,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>bh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bh(t.remoteStore,n)),e._onlineComponents=t}async function Ef(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ys(_f,"Using user provided OfflineComponentProvider");try{await kf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Is.FAILED_PRECONDITION||e.code===Is.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;_s("Error using user provided cache. Falling back to memory cache: "+n),await kf(e,new gf)}}else ys(_f,"Using default OfflineComponentProvider"),await kf(e,new vf(void 0));return e._offlineComponents}async function Sf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ys(_f,"Using user provided OnlineComponentProvider"),await xf(e,e._uninitializedComponentsProvider._online)):(ys(_f,"Using default OnlineComponentProvider"),await xf(e,new yf))),e._onlineComponents}function If(e){return Sf(e).then(e=>e.syncEngine)}async function Tf(e){const t=await Sf(e),n=t.eventManager;return n.onListen=Wh.bind(null,t.syncEngine),n.onUnlisten=Jh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Kh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Xh.bind(null,t.syncEngine),n}function Cf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Cs;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new bf({next:o=>{s.Ou(),t.enqueueAndForget(()=>Ph(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Ts(Is.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Ts(Is.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Fh(El(n.path),s,{includeMetadataChanges:!0,ka:!0});return Rh(e,a)}(await Tf(e),e.asyncQueue,t,n,r)),r.promise}function Nf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Af=new Map,Rf="firestore.googleapis.com",Pf=!0;class jf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ts(Is.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rf,this.ssl=Pf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Pf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Mu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<zu)throw new Ts(Is.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ts(Is.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ts(Is.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ts(Is.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ts(Is.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ts(Is.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ts(Is.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new As;switch(e.type){case"firstParty":return new Os(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ts(Is.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Af.get(e);t&&(ys("ComponentProvider","Removing Datastore"),Af.delete(e),t.terminate())}(this),Promise.resolve()}}function Df(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=ta(e,Of);const s=P(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;s&&(j(`https://${l}`),L("Firestore",!0)),a.host!==Rf&&a.host!==l&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!W(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ps.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[E(JSON.stringify({alg:"none",type:"JWT"})),E(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ts(Is.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ps(s)}e._authCredentials=new Rs(new Ns(t,n))}}class Lf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Lf(this.firestore,e,this._query)}}class Mf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ff(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mf(this.firestore,e,this._key)}toJSON(){return{type:Mf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ra(t,Mf._jsonSchema))return new Mf(e,n||null,new Js(Ks.fromString(t.referencePath)))}}Mf._jsonSchemaVersion="firestore/documentReference/1.0",Mf._jsonSchema={type:na("string",Mf._jsonSchemaVersion),referencePath:na("string")};class Ff extends Lf{constructor(e,t,n){super(e,t,El(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mf(this.firestore,null,new Js(e))}withConverter(e){return new Ff(this.firestore,e,this._path)}}function Uf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),1===arguments.length&&(t=Us.newId()),Xs("doc","path",t),e instanceof Of){const n=Ks.fromString(t,...r);return Ys(n),new Mf(e,null,new Js(n))}{if(!(e instanceof Mf||e instanceof Ff))throw new Ts(Is.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ks.fromString(t,...r));return Ys(n),new Mf(e.firestore,e instanceof Ff?e.converter:null,new Js(n))}}const Vf="AsyncQueue";class zf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Fd(this,"async_queue_retry"),this.oc=()=>{const e=Ld();e&&ys(Vf,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=Ld();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ld();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Cs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ba(e))throw e;ys(Vf,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,bs("INTERNAL UNHANDLED ERROR: ",Bf(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=xh.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&ks(47125,{hc:Bf(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Bf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class $f extends Of{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zf(e),this._firestoreClient=void 0,await e}}}function qf(e){if(e._terminated)throw new Ts(Is.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Hf(e),e._firestoreClient}function Hf(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new wo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Nf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new wf(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Wf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wf(lo.fromBase64String(e))}catch(e){throw new Ts(Is.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Wf(lo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ra(e,Wf._jsonSchema))return Wf.fromBase64String(e.bytes)}}Wf._jsonSchemaVersion="firestore/bytes/1.0",Wf._jsonSchema={type:na("string",Wf._jsonSchemaVersion),bytes:na("string")};class Kf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ts(Is.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gf{constructor(e){this._methodName=e}}class Qf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ts(Is.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ts(Is.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Vs(this._lat,e._lat)||Vs(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qf._jsonSchemaVersion}}static fromJSON(e){if(ra(e,Qf._jsonSchema))return new Qf(e.latitude,e.longitude)}}Qf._jsonSchemaVersion="firestore/geoPoint/1.0",Qf._jsonSchema={type:na("string",Qf._jsonSchemaVersion),latitude:na("number"),longitude:na("number")};class Jf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ra(e,Jf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Jf(e.vectorValues);throw new Ts(Is.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jf._jsonSchemaVersion="firestore/vectorValue/1.0",Jf._jsonSchema={type:na("string",Jf._jsonSchemaVersion),vectorValues:na("object")};const Xf=/^__.*__$/;class Yf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}function Zf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ks(40011,{Ec:e})}}class ep{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ep(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return dp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(Zf(this.Ec)&&Xf.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class tp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Md(e)}Dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ep({Ec:e,methodName:t,bc:n,path:Qs.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(e){const t=e._freezeSettings(),n=Md(e._databaseId);return new tp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);op("Data must be an object, but it was:",a,r);const o=sp(r,a);let l,c;if(s.merge)l=new ao(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=lp(t,r,n);if(!a.contains(i))throw new Ts(Is.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);hp(e,i)||e.push(i)}l=new ao(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Yf(new Wo(o),l,c)}function ip(e,t){if(ap(e=ee(e)))return op("Unsupported field value:",t,e),sp(e,t);if(e instanceof Gf)return function(e,t){if(!Zf(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ip(i,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ee(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ec(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=aa.fromDate(e);return{timestampValue:ru(t.serializer,n)}}if(e instanceof aa){const n=new aa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ru(t.serializer,n)}}if(e instanceof Qf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Wf)return{bytesValue:iu(t.serializer,e._byteString)};if(e instanceof Mf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ou(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Jf)return function(e,t){return{mapValue:{fields:{[Eo]:{stringValue:To},[Co]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return Yl(t.serializer,e)})}}}}}}(e,t);throw t.wc(`Unsupported field value: ${ea(e)}`)}(e,t)}function sp(e,t){const n={};return eo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Za(e,(e,r)=>{const i=ip(r,t.Vc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ap(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof aa||e instanceof Qf||e instanceof Wf||e instanceof Mf||e instanceof Gf||e instanceof Jf)}function op(e,t,n){if(!ap(n)||!Zs(n)){const r=ea(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function lp(e,t,n){if((t=ee(t))instanceof Kf)return t._internalPath;if("string"==typeof t)return up(e,t);throw dp("Field path arguments must be of type string or ",e,!1,void 0,n)}const cp=new RegExp("[~\\*/\\[\\]]");function up(e,t,n){if(t.search(cp)>=0)throw dp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Kf(...t.split("."))._internalPath}catch(r){throw dp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function dp(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ts(Is.INVALID_ARGUMENT,o+e+l)}function hp(e,t){return e.some(e=>e.isEqual(t))}class fp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pp extends fp{data(){return super.data()}}function mp(e,t){return"string"==typeof t?up(e,t):t instanceof Kf?t._internalPath:t._delegate._internalPath}class gp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ho(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ks(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Za(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Co].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>ho(e.doubleValue));return new Jf(i)}convertGeoPoint(e){return new Qf(ho(e.latitude),ho(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=bo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_o(e));default:return null}}convertTimestamp(e){const t=uo(e);return new aa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ks.fromString(e);Es(Nu(n),9688,{name:e});const r=new xo(n.get(1),n.get(3)),i=new Js(n.popFirst(5));return r.isEqual(t)||bs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function vp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bp extends fp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new _p(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(mp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ts(Is.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}bp._jsonSchemaVersion="firestore/documentSnapshot/1.0",bp._jsonSchema={type:na("string",bp._jsonSchemaVersion),bundleSource:na("string","DocumentSnapshot"),bundleName:na("string"),bundle:na("string")};class _p extends bp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class wp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new _p(this._firestore,this._userDataWriter,n.key,n,new yp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ts(Is.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new _p(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new _p(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:kp(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ts(Is.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Us.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ks(61501,{type:e})}}wp._jsonSchemaVersion="firestore/querySnapshot/1.0",wp._jsonSchema={type:na("string",wp._jsonSchemaVersion),bundleSource:na("string","QuerySnapshot"),bundleName:na("string"),bundle:na("string")};class xp extends gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mf(this.firestore,null,t)}}function Ep(e,t){return function(e,t){const n=new Cs;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=mf(e);try{const e=await function(e,t){const n=Ss(e),r=aa.now(),i=t.reduce((e,t)=>e.add(t.key),Ql());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Vl(),l=Ql();return n.Os.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=_c(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new xc(e.key,t,Ko(t.value.mapValue),pc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:$l(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new to(Vs)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await df(r,e.changes),await uh(r.remoteStore)}catch(e){const t=Eh(e,"Failed to persist write");n.reject(t)}}(await If(e),t,n)),n.promise}(qf(e),t)}function Sp(e,t,n){const r=n.docs.get(t._key),i=new xp(e);return new bp(e,i,t._key,r,new yp(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ms=e}(gt),dt(new te("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new $f(new Ps(e.getProvider("auth-internal")),new Ls(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ts(Is.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),bt(hs,fs,e),bt(hs,fs,"esm2017")}();const Ip="@firebase/installations",Tp="0.6.18",Cp=1e4,Np=`w:${Tp}`,Ap="FIS_v2",Rp=36e5,Pp=new q("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function jp(e){return e instanceof $&&e.code.includes("request-failed")}function Op(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Dp(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Lp(e,t){const n=(await t.json()).error;return Pp.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Mp(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Fp(e,t){let{refreshToken:n}=t;const r=Mp(e);return r.append("Authorization",function(e){return`${Ap} ${e}`}(n)),r}async function Up(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Vp(e){return new Promise(t=>{setTimeout(t,e)})}const zp=/^[cdef][\w-]{21}$/;function Bp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return zp.test(t)?t:""}catch(e){return""}}function $p(e){return`${e.appName}!${e.appId}`}const qp=new Map;function Hp(e,t){const n=$p(e);Wp(n,t),function(e,t){const n=Gp();n&&n.postMessage({key:e,fid:t});Qp()}(n,t)}function Wp(e,t){const n=qp.get(e);if(n)for(const r of n)r(t)}let Kp=null;function Gp(){return!Kp&&"BroadcastChannel"in self&&(Kp=new BroadcastChannel("[Firebase] FID Change"),Kp.onmessage=e=>{Wp(e.data.key,e.data.fid)}),Kp}function Qp(){0===qp.size&&Kp&&(Kp.close(),Kp=null)}const Jp="firebase-installations-store";let Xp=null;function Yp(){return Xp||(Xp=Ee("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Jp)}})),Xp}async function Zp(e,t){const n=$p(e),r=(await Yp()).transaction(Jp,"readwrite"),i=r.objectStore(Jp),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Hp(e,t.fid),t}async function em(e){const t=$p(e),n=(await Yp()).transaction(Jp,"readwrite");await n.objectStore(Jp).delete(t),await n.done}async function tm(e,t){const n=$p(e),r=(await Yp()).transaction(Jp,"readwrite"),i=r.objectStore(Jp),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||Hp(e,a.fid),a}async function nm(e){let t;const n=await tm(e.appConfig,n=>{const r=function(e){const t=e||{fid:Bp(),registrationStatus:0};return sm(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Pp.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Op(n),a=Mp(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:Ap,appId:n.appId,sdkVersion:Np},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await Up(()=>fetch(s,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Dp(e.authToken)}}throw await Lp("Create Installation",u)}(e,t);return Zp(e.appConfig,n)}catch(n){throw jp(n)&&409===n.customData.serverCode?await em(e.appConfig):await Zp(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:rm(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function rm(e){let t=await im(e.appConfig);for(;1===t.registrationStatus;)await Vp(100),t=await im(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await nm(e);return n||t}return t}function im(e){return tm(e,e=>{if(!e)throw Pp.create("installation-not-found");return sm(e)})}function sm(e){return 1===(t=e).registrationStatus&&t.registrationTime+Cp<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function am(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Op(e)}/${n}/authTokens:generate`}(n,t),s=Fp(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Np,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Up(()=>fetch(i,l));if(c.ok){return Dp(await c.json())}throw await Lp("Generate Auth Token",c)}async function om(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await tm(e.appConfig,r=>{if(!cm(r))throw Pp.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Rp}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await lm(e.appConfig);for(;1===n.authToken.requestStatus;)await Vp(100),n=await lm(e.appConfig);const r=n.authToken;return 0===r.requestStatus?om(e,t):r}(e,n),r;{if(!navigator.onLine)throw Pp.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await am(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Zp(e.appConfig,r),n}catch(n){if(!jp(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Zp(e.appConfig,n)}else await em(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function lm(e){return tm(e,e=>{if(!cm(e))throw Pp.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Cp<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function cm(e){return void 0!==e&&2===e.registrationStatus}async function um(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await nm(e);t&&await t}(n);return(await om(n,t)).token}function dm(e){return Pp.create("missing-app-config-values",{valueName:e})}const hm="installations",fm=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw dm("App Configuration");if(!e.name)throw dm("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw dm(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:ht(t,"heartbeat"),_delete:()=>Promise.resolve()}},pm=e=>{const t=ht(e.getProvider("app").getImmediate(),hm).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await nm(t);return r?r.catch(console.error):om(t).catch(console.error),n.fid}(t),getToken:e=>um(t,e)}};dt(new te(hm,fm,"PUBLIC")),dt(new te("installations-internal",pm,"PRIVATE")),bt(Ip,Tp),bt(Ip,Tp,"esm2017");const mm="analytics",gm="https://www.googletagmanager.com/gtag/js",vm=new de("@firebase/analytics"),ym=new q("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function bm(e){if(!e.startsWith(gm)){const t=ym.create("invalid-gtag-resource",{gtagURL:e});return vm.warn(t.message),""}return e}function _m(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function wm(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:bm}),r=document.createElement("script"),i=`${gm}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function km(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await _m(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){vm.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await _m(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(o){vm.error(o)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){vm.error(l)}}}const xm=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Em(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Sm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xm,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw ym.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ym.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Tm;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),Im({appId:r,apiKey:i,measurementId:s},a,o,t)}async function Im(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xm;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(ym.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(c){if(l)return vm.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===c||void 0===c?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Em(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw ym.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(c){const t=c;if(!function(e){if(!(e instanceof $)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(o),l)return vm.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:o,measurementId:l};throw c}const r=503===Number(null===(a=null===t||void 0===t?void 0:t.customData)||void 0===a?void 0:a.httpStatus)?Z(i,s.intervalMillis,30):Z(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(o,u),vm.debug(`Calling attemptFetch again in ${r} millis`),Im(e,u,n,s)}}class Tm{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Cm,Nm;function Am(e){Nm=e}function Rm(e){Cm=e}async function Pm(e,t,n,r,i,s,a){var o;const l=Sm(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&vm.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>vm.error(e)),t.push(l);const c=async function(){if(!z())return vm.warn(ym.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await B()}catch(e){return vm.warn(ym.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(gm)&&n.src.includes(e))return n;return null})(s)||wm(s,u.measurementId),Nm&&(i("consent","default",Nm),Am(void 0)),i("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),Cm&&(i("set",Cm),Rm(void 0)),u.measurementId}class jm{constructor(e){this.app=e}_delete(){return delete Om[this.app.options.appId],Promise.resolve()}}let Om={},Dm=[];const Lm={};let Mm,Fm,Um="dataLayer",Vm="gtag",zm=!1;function Bm(){const e=[];if(U()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=ym.create("invalid-analytics-context",{errorInfo:t});vm.warn(n.message)}}function $m(e,t,n){Bm();const r=e.options.appId;if(!r)throw ym.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ym.create("no-api-key");vm.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Om[r])throw ym.create("already-exists",{id:r});if(!zm){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Um);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=km(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Om,Dm,Lm,Um,Vm);Fm=e,Mm=t,zm=!0}Om[r]=Pm(e,Dm,Lm,t,Mm,Um,n);return new jm(e)}function qm(e,t,n,r){e=ee(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Fm,Om[e.app.options.appId],t,n,r).catch(e=>vm.error(e))}const Hm="@firebase/analytics",Wm="0.10.17";dt(new te(mm,(e,t)=>{let{options:n}=t;return $m(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),dt(new te("analytics-internal",function(e){try{const t=e.getProvider(mm).getImmediate();return{logEvent:(e,n,r)=>qm(t,e,n,r)}}catch(t){throw ym.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),bt(Hm,Wm),bt(Hm,Wm,"esm2017");var Km=n(579);const Gm=()=>{const{turn:e,population:t,gold:n,food:r,army:i,trust:s,dissatisfaction:a}=b();return(0,Km.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#fafafa"},children:[(0,Km.jsx)("strong",{children:"\ud134:"})," ",e," | ",(0,Km.jsx)("strong",{children:"\uc778\uad6c:"})," ",t," |"," ",(0,Km.jsx)("strong",{children:"\uae08:"})," ",n," | ",(0,Km.jsx)("strong",{children:"\uc2dd\ub7c9:"})," ",r," |"," ",(0,Km.jsx)("strong",{children:"\uad70\uc0ac:"})," ",i," | ",(0,Km.jsx)("strong",{children:"\uc2e0\ub8b0:"})," ",s," |"," ",(0,Km.jsx)("strong",{children:"\ubd88\ub9cc\ub3c4:"})," ",a]})},Qm=()=>{const[e,t]=(0,r.useState)(null),{turn:n,advisors:i}=b();return(0,r.useEffect)(()=>{const e=n%i.length;t(i[e])},[n,i]),e?(0,Km.jsxs)("div",{style:{margin:"1rem 0",padding:"0.75rem",border:"1px dashed #666",backgroundColor:"#fff8dc"},children:[(0,Km.jsxs)("strong",{children:[e.name,":"]})," ",e.comment," ",(0,Km.jsx)("br",{}),(0,Km.jsxs)("em",{children:["\uc131\ud5a5: ",e.personality]})]}):null},Jm=()=>{const{activePolicies:e,togglePolicy:t}=b();return(0,Km.jsxs)("div",{style:{margin:"1rem 0",padding:"1rem",border:"1px solid #ddd",borderRadius:"5px",backgroundColor:"#f0f0f0"},children:[(0,Km.jsx)("h3",{children:"\uc815\ucc45 \uacb0\uc815"}),h.map(n=>{const r=e.includes(n.id);return(0,Km.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",cursor:"pointer",color:r?"green":"black"},children:[(0,Km.jsx)("input",{type:"checkbox",checked:r,onChange:()=>t(n.id),style:{marginRight:"0.5rem"}}),n.name," - ",(0,Km.jsx)("em",{children:n.description})]},n.id)})]})},Xm=()=>{const{cities:e}=b();return(0,Km.jsxs)("div",{style:{margin:"1rem 0",padding:"1rem",border:"1px solid #ccc",borderRadius:"6px",backgroundColor:"#fff"},children:[(0,Km.jsx)("h3",{children:"\ub3c4\uc2dc \uad00\ub9ac"}),e.map(e=>(0,Km.jsxs)("div",{style:{marginBottom:"0.8rem",padding:"0.5rem",border:"1px solid #aaa",borderRadius:"4px",backgroundColor:"#fafafa"},children:[(0,Km.jsx)("strong",{children:e.name})," | \uc778\uad6c: ",e.population," | \uc2dd\ub7c9 \uc0dd\uc0b0:"," ",e.foodProduction," | \uad70\uc0ac \uc8fc\ub454: ",e.armyStationed]},e.id))]})};const Ym=()=>{const{currentEventId:e,goToNextEvent:t}=b(),n=d.find(t=>t.id===e);return n?(0,Km.jsxs)("section",{style:{marginTop:"1rem",padding:"1rem",border:"1px solid #bbb",borderRadius:"5px",backgroundColor:"#f9f9f9"},children:[(0,Km.jsx)("h2",{children:n.title}),(0,Km.jsx)("p",{children:n.description}),(0,Km.jsx)("div",{children:n.options.map((e,n)=>(0,Km.jsx)("button",{onClick:()=>t(e.text),style:{marginRight:"0.5rem",marginTop:"0.5rem",padding:"0.4rem 0.8rem",borderRadius:"4px",cursor:"pointer"},children:e.text},n))})]}):(0,Km.jsx)("div",{children:"\uc774\ubca4\ud2b8\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})},Zm=()=>{const{turn:e,setGameOver:t,setResult:n}=b();return(0,r.useEffect)(()=>{const e=function(e){return e.population<=0?{result:"\ud328\ubc30",reason:"\uc778\uad6c\uac00 \uc804\uba78\ud588\uc2b5\ub2c8\ub2e4."}:e.gold<=0?{result:"\ud328\ubc30",reason:"\uc7ac\uc815\uc774 \ubc14\ub2e5\ub0ac\uc2b5\ub2c8\ub2e4."}:e.food<=0?{result:"\ud328\ubc30",reason:"\uc2dd\ub7c9\uc774 \ubaa8\ub450 \uc18c\uc9c4\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}:e.dissatisfaction>=100?{result:"\ud328\ubc30",reason:"\uad6d\ubbfc\uc758 \ubd88\ub9cc\ub3c4\uac00 \ucd5c\uace0\uc870\uc5d0 \ub2ec\ud588\uc2b5\ub2c8\ub2e4."}:e.turn>=50?{result:"\uc2b9\ub9ac",reason:"50\ud134 \ub3d9\uc548 \uc131\uacf5\uc801\uc73c\ub85c \uc655\uad6d\uc744 \ud1b5\uce58\ud588\uc2b5\ub2c8\ub2e4."}:null}(b.getState());e&&(t(!0),n(e))},[e]),(0,Km.jsx)(Ym,{})},eg=()=>{const{history:e}=b();return(0,Km.jsxs)("section",{style:{marginTop:"2rem",padding:"1rem",borderTop:"1px solid #ddd"},children:[(0,Km.jsx)("h3",{children:"\ud50c\ub808\uc774 \ud788\uc2a4\ud1a0\ub9ac"}),(0,Km.jsxs)("ul",{style:{maxHeight:"200px",overflowY:"auto",paddingLeft:"1.2rem"},children:[0===e.length&&(0,Km.jsx)("li",{children:"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),e.map((e,t)=>(0,Km.jsxs)("li",{style:{marginBottom:"0.5rem"},children:[(0,Km.jsx)("strong",{children:e.event}),' \u2192 \uc120\ud0dd: "',e.choice,'" (\ud6a8\uacfc:'," ",Object.entries(e.effects).map(e=>{let[t,n]=e;return`${t}: ${n}`}).join(", "),")"]},t))]})]})},tg=()=>{const{territories:e,discoveredTerritories:t,selectedTerritory:n,setSelectedTerritory:i,factions:s}=b(),[a,o]=(0,r.useState)({width:1e3,height:800}),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(1),[p,g]=(0,r.useState)({x:0,y:0}),[v,y]=(0,r.useState)(!1),[_,w]=(0,r.useState)({x:0,y:0}),[k,x]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!0),[I,T]=(0,r.useState)("all"),[C,N]=(0,r.useState)("none"),A=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=()=>{const e=A.current;if(e){const t=e.clientWidth;o({width:t,height:.8*t})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const R=()=>{y(!1)},P=e=>{f(t=>Math.max(.5,Math.min(2,t+.1*e)))},j=e=>{if(!t.includes(e.id))return"#333333";if(n===e.id)return"#FFD700";if(l&&l.id===e.id)return"#AADDFF";if("none"!==C){const t=e.resources[C]||0,n=Math.min(255,Math.max(50,Math.floor(5*t)));switch(C){case"food":return`rgb(0, ${n}, 0)`;case"gold":return`rgb(${n}, ${n}, 0)`;case"wood":return`rgb(${n/2}, ${n/3}, 0)`;case"stone":return`rgb(${n}, ${n}, ${n})`;case"iron":return`rgb(${n/2}, ${n/2}, ${n})`;case"mana":return`rgb(${n/2}, 0, ${n})`}}if("all"!==I){if("player"===I&&"player"!==e.controlledBy)return"#777777";if("neutral"===I&&"neutral"!==e.controlledBy)return"#777777";if("faction"===I&&!e.controlledBy.includes("faction_"))return"#777777"}const r=s.find(t=>t.id===e.controlledBy);return r?r.color:"neutral"===e.controlledBy?"#AAAAAA":"undiscovered"===e.controlledBy?"#333333":"player"===e.controlledBy?"#4a90e2":"#CCCCCC"},O=e=>n===e.id?"#FF9900":l&&l.id===e.id?"#FFFFFF":"#000000",D=e=>{let{territory:n}=e;return n&&t.includes(n.id)?(0,Km.jsxs)("div",{className:"territory-info",children:[(0,Km.jsx)("h3",{children:n.name}),(0,Km.jsx)("p",{children:n.description}),(0,Km.jsxs)("div",{className:"territory-resources",children:[(0,Km.jsx)("h4",{children:"\uc790\uc6d0:"}),(0,Km.jsx)("ul",{children:Object.entries(n.resources).map(e=>{let[t,n]=e;return n>0&&(0,Km.jsxs)("li",{className:`resource-item ${t}`,children:[(0,Km.jsx)("span",{className:"resource-icon",children:L(t)}),(0,Km.jsxs)("span",{className:"resource-name",children:[M(t),":"]}),(0,Km.jsx)("span",{className:"resource-amount",children:n})]},t)})})]}),n.specialFeatures&&n.specialFeatures.length>0&&(0,Km.jsxs)("div",{className:"territory-features",children:[(0,Km.jsx)("h4",{children:"\ud2b9\uc218 \uc9c0\ud615:"}),(0,Km.jsx)("ul",{children:n.specialFeatures.map(e=>(0,Km.jsx)("li",{className:"feature-item",children:U(e)},e))})]}),(0,Km.jsxs)("div",{className:"territory-status",children:[(0,Km.jsxs)("p",{children:[(0,Km.jsx)("strong",{children:"\uc9c0\ud615:"})," ",F(n.type)]}),(0,Km.jsxs)("p",{children:[(0,Km.jsx)("strong",{children:"\ubc29\uc5b4 \ubcf4\ub108\uc2a4:"})," ",n.defenseBonus]}),(0,Km.jsxs)("p",{children:[(0,Km.jsx)("strong",{children:"\uac1c\ubc1c \uc218\uc900:"})," ",n.developmentLevel]}),(0,Km.jsxs)("p",{children:[(0,Km.jsx)("strong",{children:"\uc18c\uc720:"})," ",V(n.controlledBy)]})]})]}):null},L=e=>{switch(e){case"food":return"\ud83c\udf3e";case"gold":return"\ud83d\udcb0";case"wood":return"\ud83c\udf32";case"stone":return"\ud83e\udea8";case"iron":return"\u2692\ufe0f";case"mana":return"\u2728";default:return"\ud83d\udce6"}},M=e=>{switch(e){case"food":return"\uc2dd\ub7c9";case"gold":return"\uae08\ud654";case"wood":return"\ubaa9\uc7ac";case"stone":return"\uc11d\uc7ac";case"iron":return"\ucca0\uad11\uc11d";case"mana":return"\ub9c8\ub825";default:return e}},F=e=>{switch(e){case"plains":return"\ud3c9\uc6d0";case"mountains":return"\uc0b0\ub9e5";case"forest":return"\uc232";case"coast":return"\ud574\uc548";case"highlands":return"\uace0\uc6d0";case"tundra":return"\uc124\uc6d0";case"hills":return"\uad6c\ub989\uc9c0";case"wasteland":return"\ud669\ubb34\uc9c0";case"island":return"\uc12c";case"swamp":return"\uc2b5\uc9c0";case"unknown":return"\ubbf8\uc9c0\uc758 \ub545";case"lake":return"\ud638\uc218";case"vineyard":return"\ud3ec\ub3c4\uc6d0";case"mines":return"\uad11\uc0b0";case"glacier":return"\ube59\ud558";case"volcano":return"\ud654\uc0b0";case"jungle":return"\uc815\uae00";case"valley":return"\uacc4\uace1";case"desert":return"\uc0ac\ub9c9";case"cliffs":return"\uc808\ubcbd";case"savanna":return"\ucd08\uc6d0";default:return e}},U=e=>{switch(e){case"capital":return"\uc218\ub3c4";case"tradingHub":return"\uad50\uc5ed \uc911\uc2ec\uc9c0";case"miningComplex":return"\uad11\uc0b0 \ub2e8\uc9c0";case"ancientGrove":return"\uace0\ub300 \uc232";case"harbor":return"\ud56d\uad6c";case"fertileLands":return"\ube44\uc625\ud55c \ud1a0\uc9c0";case"ancientRuins":return"\uace0\ub300 \uc720\uc801";case"magicCrystals":return"\ub9c8\ubc95 \uc218\uc815";case"borderFortress":return"\uad6d\uacbd \uc694\uc0c8";case"abandonedMines":return"\ubc84\ub824\uc9c4 \uad11\uc0b0";case"tradingPort":return"\ubb34\uc5ed\ud56d";case"tradingMarket":return"\uc2dc\uc7a5";case"mysticalBog":return"\uc2e0\ube44\ud55c \ub2aa";case"watchTower":return"\uac10\uc2dc\ud0d1";case"fishingVillage":return"\uc5b4\ucd0c";case"luxuryGoods":return"\uc0ac\uce58\ud488 \uc0dd\uc0b0\uc9c0";case"deepMines":return"\uc2ec\uce35 \uad11\uc0b0";case"frozenMagic":return"\uc5bc\uc5b4\ubd99\uc740 \ub9c8\ubc95";case"volcanicForge":return"\ud654\uc0b0 \ub300\uc7a5\uac04";case"medicinalPlants":return"\uc57d\uc6a9 \uc2dd\ubb3c";case"hiddenVillage":return"\uc228\uaca8\uc9c4 \ub9c8\uc744";case"oasis":return"\uc624\uc544\uc2dc\uc2a4";case"lighthouse":return"\ub4f1\ub300";case"huntingGrounds":return"\uc0ac\ub0e5\ud130";case"vineyards":return"\ud3ec\ub3c4\uc6d0";default:return e}},V=e=>{switch(e){case"player":return"\ud50c\ub808\uc774\uc5b4";case"neutral":return"\uc911\ub9bd";case"undiscovered":return"\ubbf8\ubc1c\uacac";case"faction_east":return"\ub3d9\ubc29 \uc81c\uad6d";case"faction_west":return"\uc11c\ubc29 \uc5f0\ud569";case"faction_south":return"\ub0a8\ubd80 \uc655\uad6d";case"faction_north":return"\ubd81\ubc29 \ubd80\uc871";default:return e}},z=e=>{switch(e){case"capital":case"luxuryGoods":return"\ud83d\udc51";case"tradingHub":return"\ud83c\udfea";case"miningComplex":case"deepMines":return"\u26cf\ufe0f";case"ancientGrove":return"\ud83c\udf33";case"harbor":return"\u2693";case"fertileLands":return"\ud83c\udf3e";case"ancientRuins":return"\ud83c\udfdb\ufe0f";case"magicCrystals":return"\ud83d\udc8e";case"borderFortress":return"\ud83c\udff0";case"abandonedMines":return"\ud83d\udd73\ufe0f";case"tradingPort":return"\ud83d\udea2";case"tradingMarket":return"\ud83d\uded2";case"mysticalBog":return"\ud83c\udf2b\ufe0f";case"watchTower":return"\ud83d\uddfc";case"fishingVillage":return"\ud83d\udc1f";case"frozenMagic":return"\u2744\ufe0f";case"volcanicForge":return"\ud83c\udf0b";case"medicinalPlants":return"\ud83c\udf3f";case"hiddenVillage":return"\ud83c\udfe1";case"oasis":return"\ud83c\udf34";case"lighthouse":return"\ud83c\udfee";case"huntingGrounds":return"\ud83c\udff9";case"vineyards":return"\ud83c\udf47";default:return"\u2b50"}};return(0,Km.jsxs)("div",{className:"enhanced-map-view",children:[(0,Km.jsxs)("div",{ref:A,className:"map-container",onMouseDown:e=>{y(!0),w({x:e.clientX-p.x,y:e.clientY-p.y})},onMouseMove:e=>{v&&g({x:e.clientX-_.x,y:e.clientY-_.y})},onMouseUp:R,onMouseLeave:R,onWheel:e=>{e.preventDefault();const t=e.deltaY>0?-1:1;P(t)},children:[(0,Km.jsxs)("svg",{width:a.width,height:a.height,className:"map",children:[(0,Km.jsx)("rect",{x:0,y:0,width:a.width,height:a.height,fill:"#1a2639",className:"map-background"}),(()=>{if(!k)return null;const e=[],t=a.width*h/50,n=a.height*h/50;for(let r=0;r<=50;r++){const n=r*t+p.x;e.push((0,Km.jsx)("line",{x1:n,y1:p.y,x2:n,y2:a.height*h+p.y,stroke:"#444444",strokeWidth:"0.5",strokeDasharray:"2,2"},`v-${r}`))}for(let r=0;r<=50;r++){const t=r*n+p.y;e.push((0,Km.jsx)("line",{x1:p.x,y1:t,x2:a.width*h+p.x,y2:t,stroke:"#444444",strokeWidth:"0.5",strokeDasharray:"2,2"},`h-${r}`))}return e})(),(()=>{const e=[];return m.forEach(n=>{const{id:r,position:i,neighbors:s}=n;if(!t.includes(r))return;const o=i.x/50*a.width*h+p.x,l=i.y/50*a.height*h+p.y;s.forEach(n=>{if(r>n)return;const i=m.find(e=>e.id===n);if(!i)return;if(!t.includes(n))return;const s=i.position.x/50*a.width*h+p.x,c=i.position.y/50*a.height*h+p.y;e.push((0,Km.jsx)("line",{x1:o,y1:l,x2:s,y2:c,stroke:"#666666",strokeWidth:"1",strokeDasharray:"5,5",className:"territory-connection"},`${r}-${n}`))})}),e})(),m.map(e=>{const{id:r,position:s,name:o,type:l}=e,u=t.includes(r),f=s.x/50*a.width*h+p.x,m=s.y/50*a.height*h+p.y,g=Math.min(a.width,a.height)/30*h;let v;switch(l){case"mountains":v=(0,Km.jsx)("polygon",{points:`${f},${m-g} ${f+g},${m+g} ${f-g},${m+g}`,fill:j(e),stroke:O(e),strokeWidth:n===r?3:1});break;case"forest":v=(0,Km.jsx)("circle",{cx:f,cy:m,r:g,fill:j(e),stroke:O(e),strokeWidth:n===r?3:1});break;case"coast":case"island":v=(0,Km.jsx)("path",{d:`M${f-g},${m} C${f-g/2},${m-g/2} ${f+g/2},${m-g/2} ${f+g},${m} C${f+g/2},${m+g/2} ${f-g/2},${m+g/2} ${f-g},${m}`,fill:j(e),stroke:O(e),strokeWidth:n===r?3:1});break;case"swamp":v=(0,Km.jsx)("path",{d:`M${f-g},${m-g/2} L${f-g/2},${m-g} L${f+g/2},${m-g} L${f+g},${m-g/2} L${f+g/2},${m+g/2} L${f},${m+g} L${f-g/2},${m+g/2} Z`,fill:j(e),stroke:O(e),strokeWidth:n===r?3:1});break;default:v=(0,Km.jsx)("polygon",{points:`${f},${m-g} ${f+.866*g},${m-.5*g} ${f+.866*g},${m+.5*g} ${f},${m+g} ${f-.866*g},${m+.5*g} ${f-.866*g},${m-.5*g}`,fill:j(e),stroke:O(e),strokeWidth:n===r?3:1})}return(0,Km.jsxs)("g",{onClick:()=>(e=>{t.includes(e.id)&&(i(e.id),d(!0))})(e),onMouseEnter:()=>(e=>{c(e)})(e),onMouseLeave:()=>c(null),className:`territory ${u?"discovered":"undiscovered"} ${n===r?"selected":""}`,children:[v,u&&(0,Km.jsx)("text",{x:f,y:m,textAnchor:"middle",fill:"#FFFFFF",fontSize:12*h,className:"territory-name",style:{textShadow:"1px 1px 2px black"},children:o}),u&&e.cities&&e.cities.length>0&&(0,Km.jsx)("g",{className:"city-markers",children:e.cities.map((t,n)=>(0,Km.jsx)("circle",{cx:f+(n-e.cities.length/2+.5)*g*.4,cy:m+.6*g,r:g/5,fill:"#FFFFFF",stroke:"#000000",strokeWidth:"1",className:"city-marker"},t))}),u&&e.specialFeatures&&e.specialFeatures.length>0&&(0,Km.jsx)("text",{x:f,y:m-.7*g,textAnchor:"middle",fontSize:14*h,className:"special-feature-icon",children:z(e.specialFeatures[0])})]},r)})]}),(()=>{if(!E)return null;const e=200,n=e/Math.max(a.width,a.height),r=a.width/h,i=a.height/h,s=-p.x/h*n,o=-p.y/h*n,l=r*n,c=i*n;return(0,Km.jsx)("div",{className:"minimap-container",children:(0,Km.jsxs)("svg",{width:e,height:e,className:"minimap",children:[(0,Km.jsx)("rect",{x:0,y:0,width:e,height:e,fill:"#1a2639"}),m.map(n=>{const{id:r,position:i}=n,s=i.x/50*e,o=i.y/50*e;return(0,Km.jsx)("rect",{x:s-2,y:o-2,width:4,height:4,fill:t.includes(r)?j(n):"#333",onClick:()=>{if(t.includes(r)){const e=i.x/50*a.width*h-a.width/2,t=i.y/50*a.height*h-a.height/2;g({x:-e,y:-t})}}},r)}),(0,Km.jsx)("rect",{x:s,y:o,width:l,height:c,fill:"none",stroke:"#FFFFFF",strokeWidth:"1"})]})})})(),n&&u&&(0,Km.jsx)(D,{territory:m.find(e=>e.id===n)}),(0,Km.jsxs)("div",{className:"zoom-controls",children:[(0,Km.jsx)("button",{onClick:()=>P(1),className:"zoom-button",children:"+"}),(0,Km.jsxs)("div",{className:"zoom-level",children:[Math.round(100*h),"%"]}),(0,Km.jsx)("button",{onClick:()=>P(-1),className:"zoom-button",children:"-"})]})]}),(0,Km.jsxs)("div",{className:"map-controls",children:[(0,Km.jsxs)("div",{className:"map-filters",children:[(0,Km.jsxs)("div",{className:"filter-group",children:[(0,Km.jsx)("label",{children:"\uc601\ud1a0 \ud544\ud130:"}),(0,Km.jsxs)("select",{value:I,onChange:e=>T(e.target.value),className:"filter-select",children:[(0,Km.jsx)("option",{value:"all",children:"\ubaa8\ub4e0 \uc601\ud1a0"}),(0,Km.jsx)("option",{value:"player",children:"\ud50c\ub808\uc774\uc5b4 \uc601\ud1a0"}),(0,Km.jsx)("option",{value:"neutral",children:"\uc911\ub9bd \uc601\ud1a0"}),(0,Km.jsx)("option",{value:"faction",children:"\uc138\ub825 \uc601\ud1a0"})]})]}),(0,Km.jsxs)("div",{className:"filter-group",children:[(0,Km.jsx)("label",{children:"\uc790\uc6d0 \ud544\ud130:"}),(0,Km.jsxs)("select",{value:C,onChange:e=>N(e.target.value),className:"filter-select",children:[(0,Km.jsx)("option",{value:"none",children:"\ud544\ud130 \uc5c6\uc74c"}),(0,Km.jsx)("option",{value:"food",children:"\uc2dd\ub7c9"}),(0,Km.jsx)("option",{value:"gold",children:"\uae08\ud654"}),(0,Km.jsx)("option",{value:"wood",children:"\ubaa9\uc7ac"}),(0,Km.jsx)("option",{value:"stone",children:"\uc11d\uc7ac"}),(0,Km.jsx)("option",{value:"iron",children:"\ucca0\uad11\uc11d"}),(0,Km.jsx)("option",{value:"mana",children:"\ub9c8\ub825"})]})]})]}),(0,Km.jsxs)("div",{className:"control-buttons",children:[(0,Km.jsx)("button",{onClick:()=>d(!u),className:"control-button",children:u?"\uc815\ubcf4 \uc228\uae30\uae30":"\uc815\ubcf4 \ubcf4\uae30"}),(0,Km.jsx)("button",{onClick:()=>i(null),className:"control-button",children:"\uc120\ud0dd \ud574\uc81c"}),(0,Km.jsx)("button",{onClick:()=>x(!k),className:"control-button",children:k?"\uadf8\ub9ac\ub4dc \uc228\uae30\uae30":"\uadf8\ub9ac\ub4dc \ud45c\uc2dc"}),(0,Km.jsx)("button",{onClick:()=>S(!E),className:"control-button",children:E?"\ubbf8\ub2c8\ub9f5 \uc228\uae30\uae30":"\ubbf8\ub2c8\ub9f5 \ud45c\uc2dc"}),(0,Km.jsx)("button",{onClick:()=>{f(1),g({x:0,y:0})},className:"control-button",children:"\ub9f5 \ucd08\uae30\ud654"})]})]})]})},ng=()=>{const e=b(),[t,n]=(0,r.useState)("basic"),[i,s]=(0,r.useState)(!1),[a,o]=(0,r.useState)(null),l=[{id:"population",name:"\uc778\uad6c",icon:"\ud83d\udc65",value:e.population,trend:"+10/\ud134",color:"#3498db"},{id:"gold",name:"\uae08\ud654",icon:"\ud83d\udcb0",value:e.gold,trend:"+25/\ud134",color:"#f1c40f"},{id:"food",name:"\uc2dd\ub7c9",icon:"\ud83c\udf3e",value:e.food,trend:"+15/\ud134",color:"#2ecc71"},{id:"army",name:"\uad70\uc0ac\ub825",icon:"\u2694\ufe0f",value:e.army,trend:"+5/\ud134",color:"#e74c3c"}],c=[{id:"wood",name:"\ubaa9\uc7ac",icon:"\ud83c\udf32",value:e.wood,trend:"+8/\ud134",color:"#795548"},{id:"stone",name:"\uc11d\uc7ac",icon:"\ud83e\udea8",value:e.stone,trend:"+6/\ud134",color:"#607d8b"},{id:"iron",name:"\ucca0\uad11\uc11d",icon:"\u2692\ufe0f",value:e.iron,trend:"+4/\ud134",color:"#9e9e9e"},{id:"mana",name:"\ub9c8\ub825",icon:"\u2728",value:e.mana,trend:"+3/\ud134",color:"#9c27b0"}],u=[{id:"research_points",name:"\uc5f0\uad6c \ud3ec\uc778\ud2b8",icon:"\ud83d\udcda",value:e.research_points,trend:"+2/\ud134",color:"#3f51b5"},{id:"magical_essence",name:"\ub9c8\ubc95 \uc815\uc218",icon:"\ud83d\udd2e",value:e.magical_essence,trend:"+1/\ud134",color:"#673ab7"},{id:"arcane_crystal",name:"\ube44\uc804 \uc218\uc815",icon:"\ud83d\udc8e",value:e.arcane_crystal,trend:"+0.5/\ud134",color:"#9c27b0"},{id:"elixir",name:"\uc5d8\ub9ad\uc11c",icon:"\ud83e\uddea",value:e.elixir,trend:"+0.5/\ud134",color:"#e91e63"}],d=[{id:"trust",name:"\uc2e0\ub8b0\ub3c4",icon:"\ud83e\udd1d",value:e.trust,trend:"+1/\ud134",color:"#4caf50",max:100},{id:"dissatisfaction",name:"\ubd88\ub9cc\ub3c4",icon:"\ud83d\ude20",value:e.dissatisfaction,trend:"-0.5/\ud134",color:"#f44336",max:100},{id:"loyalty",name:"\ucda9\uc131\ub3c4",icon:"\ud83d\udc51",value:e.loyalty,trend:"+0.5/\ud134",color:"#ffc107",max:100},{id:"diplomatic_influence",name:"\uc678\uad50 \uc601\ud5a5\ub825",icon:"\ud83c\udf10",value:e.diplomatic_influence,trend:"+1/\ud134",color:"#2196f3"}],h=[{resource:"food",sources:[{name:"\ub18d\uc7a5",amount:20,icon:"\ud83c\udf3e"},{name:"\uc5b4\ucd0c",amount:10,icon:"\ud83d\udc1f"},{name:"\ubaa9\ucd95\uc9c0",amount:15,icon:"\ud83d\udc04"},{name:"\uc0ac\ub0e5\ud130",amount:5,icon:"\ud83c\udff9"}]},{resource:"gold",sources:[{name:"\uad11\uc0b0",amount:15,icon:"\u26cf\ufe0f"},{name:"\uc2dc\uc7a5",amount:20,icon:"\ud83d\uded2"},{name:"\ubb34\uc5ed\ud56d",amount:25,icon:"\ud83d\udea2"},{name:"\uc138\uae08",amount:10,icon:"\ud83d\udcdc"}]},{resource:"wood",sources:[{name:"\uc232",amount:25,icon:"\ud83c\udf32"},{name:"\ubc8c\ubaa9\uc7a5",amount:15,icon:"\ud83e\ude93"}]},{resource:"stone",sources:[{name:"\ucc44\uc11d\uc7a5",amount:20,icon:"\ud83e\udea8"},{name:"\uc0b0\ub9e5",amount:10,icon:"\u26f0\ufe0f"}]}],f=[{resource:"food",consumers:[{name:"\uc778\uad6c",amount:-15,icon:"\ud83d\udc65"},{name:"\uad70\ub300",amount:-10,icon:"\u2694\ufe0f"}]},{resource:"gold",consumers:[{name:"\uc720\uc9c0\ube44",amount:-10,icon:"\ud83c\udfdb\ufe0f"},{name:"\uad70\ube44",amount:-15,icon:"\ud83d\udee1\ufe0f"},{name:"\uc5f0\uad6c",amount:-5,icon:"\ud83d\udcda"}]},{resource:"wood",consumers:[{name:"\uac74\uc124",amount:-10,icon:"\ud83c\udfd7\ufe0f"},{name:"\ubb34\uae30 \uc81c\uc791",amount:-5,icon:"\ud83c\udff9"}]},{resource:"stone",consumers:[{name:"\uac74\uc124",amount:-15,icon:"\ud83c\udfd7\ufe0f"},{name:"\ubc29\uc5b4 \uc2dc\uc124",amount:-5,icon:"\ud83c\udff0"}]}],p={categories:[{id:"military",name:"\uad70\uc0ac",icon:"\u2694\ufe0f",allocation:30},{id:"economy",name:"\uacbd\uc81c",icon:"\ud83d\udcb0",allocation:25},{id:"research",name:"\uc5f0\uad6c",icon:"\ud83d\udcda",allocation:20},{id:"culture",name:"\ubb38\ud654",icon:"\ud83c\udfad",allocation:15},{id:"diplomacy",name:"\uc678\uad50",icon:"\ud83e\udd1d",allocation:10}],effects:{military:[{name:"\uad70\uc0ac\ub825 \uc99d\uac00",value:"+5/\ud134"},{name:"\ubc29\uc5b4\ub825 \uc99d\uac00",value:"+3/\ud134"},{name:"\uc2dd\ub7c9 \uc18c\ube44 \uc99d\uac00",value:"-3/\ud134"}],economy:[{name:"\uae08\ud654 \uc99d\uac00",value:"+10/\ud134"},{name:"\uc790\uc6d0 \uc0dd\uc0b0 \uc99d\uac00",value:"+5%"},{name:"\uc778\uad6c \uc99d\uac00",value:"+2/\ud134"}],research:[{name:"\uc5f0\uad6c \ud3ec\uc778\ud2b8 \uc99d\uac00",value:"+3/\ud134"},{name:"\uae30\uc220 \uc5f0\uad6c \uc18d\ub3c4",value:"+5%"},{name:"\ub9c8\ub825 \uc99d\uac00",value:"+1/\ud134"}],culture:[{name:"\uc2e0\ub8b0\ub3c4 \uc99d\uac00",value:"+2/\ud134"},{name:"\ubd88\ub9cc\ub3c4 \uac10\uc18c",value:"-1/\ud134"},{name:"\ubb38\ud654 \uc601\ud5a5\ub825 \uc99d\uac00",value:"+3/\ud134"}],diplomacy:[{name:"\uc678\uad50 \uc601\ud5a5\ub825 \uc99d\uac00",value:"+2/\ud134"},{name:"\ubb34\uc5ed \uc218\uc785 \uc99d\uac00",value:"+5/\ud134"},{name:"\ub3d9\ub9f9 \uad00\uacc4 \uac1c\uc120",value:"+1/\ud134"}]}},m=e=>(0,Km.jsx)("div",{className:"resource-grid",children:e.map(e=>(0,Km.jsxs)("div",{className:"resource-card "+(a===e.id?"selected":""),onClick:()=>o(e.id===a?null:e.id),style:{borderColor:e.color},children:[(0,Km.jsx)("div",{className:"resource-icon",style:{backgroundColor:e.color},children:e.icon}),(0,Km.jsxs)("div",{className:"resource-info",children:[(0,Km.jsx)("h3",{children:e.name}),(0,Km.jsx)("div",{className:"resource-value",children:e.max?(0,Km.jsxs)("div",{className:"resource-bar-container",children:[(0,Km.jsx)("div",{className:"resource-bar",style:{width:e.value/e.max*100+"%",backgroundColor:e.color}}),(0,Km.jsxs)("span",{children:[e.value," / ",e.max]})]}):(0,Km.jsx)("span",{children:e.value})}),i&&(0,Km.jsx)("div",{className:"resource-trend",children:e.trend})]})]},e.id))}),g=()=>(0,Km.jsxs)("div",{className:"production-container",children:[(0,Km.jsxs)("div",{className:"production-column",children:[(0,Km.jsx)("h3",{children:"\uc790\uc6d0 \uc0dd\uc0b0"}),h.map(e=>(0,Km.jsxs)("div",{className:"production-section",children:[(0,Km.jsxs)("h4",{children:[y(e.resource)," \uc0dd\uc0b0"]}),(0,Km.jsx)("ul",{className:"production-list",children:e.sources.map((e,t)=>(0,Km.jsxs)("li",{className:"production-item",children:[(0,Km.jsx)("span",{className:"source-icon",children:e.icon}),(0,Km.jsx)("span",{className:"source-name",children:e.name}),(0,Km.jsxs)("span",{className:"source-amount",children:["+",e.amount]})]},t))}),(0,Km.jsxs)("div",{className:"production-total",children:["\ucd1d \uc0dd\uc0b0\ub7c9: +",e.sources.reduce((e,t)=>e+t.amount,0)]})]},e.resource))]}),(0,Km.jsxs)("div",{className:"production-column",children:[(0,Km.jsx)("h3",{children:"\uc790\uc6d0 \uc18c\ube44"}),f.map(e=>(0,Km.jsxs)("div",{className:"consumption-section",children:[(0,Km.jsxs)("h4",{children:[y(e.resource)," \uc18c\ube44"]}),(0,Km.jsx)("ul",{className:"consumption-list",children:e.consumers.map((e,t)=>(0,Km.jsxs)("li",{className:"consumption-item",children:[(0,Km.jsx)("span",{className:"consumer-icon",children:e.icon}),(0,Km.jsx)("span",{className:"consumer-name",children:e.name}),(0,Km.jsx)("span",{className:"consumer-amount",children:e.amount})]},t))}),(0,Km.jsxs)("div",{className:"consumption-total",children:["\ucd1d \uc18c\ube44\ub7c9: ",e.consumers.reduce((e,t)=>e+t.amount,0)]})]},e.resource))]})]}),v=()=>(0,Km.jsxs)("div",{className:"allocation-container",children:[(0,Km.jsxs)("div",{className:"allocation-sliders",children:[(0,Km.jsx)("h3",{children:"\uc790\uc6d0 \ud560\ub2f9"}),(0,Km.jsx)("p",{className:"allocation-description",children:"\uad6d\uac00 \uc790\uc6d0\uc744 \ub2e4\uc591\ud55c \ubd84\uc57c\uc5d0 \ud560\ub2f9\ud558\uc5ec \uac01 \ubd84\uc57c\uc758 \ubc1c\uc804\uc744 \ucd09\uc9c4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ucd1d \ud560\ub2f9\ub7c9\uc740 100%\ub97c \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Km.jsxs)("div",{className:"allocation-total",children:["\ucd1d \ud560\ub2f9\ub7c9: ",p.categories.reduce((e,t)=>e+t.allocation,0),"%"]}),p.categories.map(e=>(0,Km.jsxs)("div",{className:"allocation-slider-container",children:[(0,Km.jsxs)("div",{className:"allocation-category",children:[(0,Km.jsx)("span",{className:"category-icon",children:e.icon}),(0,Km.jsx)("span",{className:"category-name",children:e.name}),(0,Km.jsxs)("span",{className:"category-value",children:[e.allocation,"%"]})]}),(0,Km.jsx)("input",{type:"range",min:"0",max:"100",value:e.allocation,className:"allocation-slider",style:{background:`linear-gradient(to right, #4caf50 0%, #4caf50 ${e.allocation}%, #e0e0e0 ${e.allocation}%, #e0e0e0 100%)`},readOnly:!0}),(0,Km.jsx)("div",{className:"allocation-effects",children:p.effects[e.id].map((e,t)=>(0,Km.jsxs)("div",{className:"allocation-effect",children:[(0,Km.jsxs)("span",{className:"effect-name",children:[e.name,":"]}),(0,Km.jsx)("span",{className:"effect-value",children:e.value})]},t))})]},e.id))]}),(0,Km.jsxs)("div",{className:"allocation-chart",children:[(0,Km.jsx)("h3",{children:"\uc790\uc6d0 \ubd84\ubc30 \ucc28\ud2b8"}),(0,Km.jsxs)("div",{className:"pie-chart-container",children:[(0,Km.jsxs)("div",{className:"pie-chart",children:[p.categories.map((e,t)=>{const n=p.categories.slice(0,t).reduce((e,t)=>e+t.allocation,0);return(0,Km.jsx)("div",{className:"pie-slice",style:{backgroundColor:_(e.id),transform:`rotate(${3.6*n}deg)`,clipPath:`polygon(50% 50%, 50% 0%, ${e.allocation>50?"0% 0%, 0% 100%, 100% 100%, 100% 0%,":""} ${50+50*Math.cos(.0628*(n+e.allocation))}% ${50+50*Math.sin(.0628*(n+e.allocation))}%)`}},e.id)}),(0,Km.jsx)("div",{className:"pie-center"})]}),(0,Km.jsx)("div",{className:"pie-legend",children:p.categories.map(e=>(0,Km.jsxs)("div",{className:"legend-item",children:[(0,Km.jsx)("div",{className:"legend-color",style:{backgroundColor:_(e.id)}}),(0,Km.jsxs)("div",{className:"legend-name",children:[e.name," (",e.allocation,"%)"]})]},e.id))})]})]})]}),y=e=>{const t=[...l,...c,...u,...d].find(t=>t.id===e);return t?t.name:e},_=e=>{switch(e){case"military":return"#e74c3c";case"economy":return"#f1c40f";case"research":return"#3498db";case"culture":return"#9b59b6";case"diplomacy":return"#2ecc71";default:return"#95a5a6"}};return(0,Km.jsxs)("div",{className:"enhanced-resource-dashboard",children:[(0,Km.jsxs)("div",{className:"dashboard-header",children:[(0,Km.jsx)("h2",{children:"\uc790\uc6d0 \uad00\ub9ac \ub300\uc2dc\ubcf4\ub4dc"}),(0,Km.jsx)("div",{className:"dashboard-controls",children:(0,Km.jsx)("button",{className:"trend-toggle "+(i?"active":""),onClick:()=>s(!i),children:i?"\ucd94\uc138 \uc228\uae30\uae30":"\ucd94\uc138 \ubcf4\uae30"})})]}),(0,Km.jsxs)("div",{className:"dashboard-tabs",children:[(0,Km.jsx)("button",{className:"tab-button "+("basic"===t?"active":""),onClick:()=>n("basic"),children:"\uae30\ubcf8 \uc790\uc6d0"}),(0,Km.jsx)("button",{className:"tab-button "+("advanced"===t?"active":""),onClick:()=>n("advanced"),children:"\uace0\uae09 \uc790\uc6d0"}),(0,Km.jsx)("button",{className:"tab-button "+("production"===t?"active":""),onClick:()=>n("production"),children:"\uc0dd\uc0b0 & \uc18c\ube44"}),(0,Km.jsx)("button",{className:"tab-button "+("allocation"===t?"active":""),onClick:()=>n("allocation"),children:"\uc790\uc6d0 \ud560\ub2f9"})]}),(0,Km.jsx)("div",{className:"dashboard-content",children:(()=>{switch(t){case"basic":return m([...l,...d]);case"advanced":return m([...c,...u]);case"production":return g();case"allocation":return v();default:return null}})()}),a&&(()=>{if(!a)return null;const e=[...l,...c,...u,...d].find(e=>e.id===a);if(!e)return null;const t=h.find(e=>e.resource===a),n=f.find(e=>e.resource===a);return(0,Km.jsxs)("div",{className:"resource-detail-panel",children:[(0,Km.jsxs)("h3",{style:{color:e.color},children:[(0,Km.jsx)("span",{className:"detail-icon",children:e.icon}),e.name," \uc138\ubd80 \uc815\ubcf4"]}),(0,Km.jsxs)("div",{className:"detail-current",children:[(0,Km.jsxs)("div",{className:"detail-value",children:["\ud604\uc7ac \ubcf4\uc720\ub7c9: ",e.value]}),(0,Km.jsxs)("div",{className:"detail-trend",children:["\ubcc0\ud654\ub7c9: ",e.trend]})]}),t&&(0,Km.jsxs)("div",{className:"detail-production",children:[(0,Km.jsx)("h4",{children:"\uc0dd\uc0b0 \uc18c\uc2a4"}),(0,Km.jsx)("ul",{children:t.sources.map((e,t)=>(0,Km.jsxs)("li",{children:[(0,Km.jsx)("span",{className:"source-icon",children:e.icon}),(0,Km.jsx)("span",{className:"source-name",children:e.name}),(0,Km.jsxs)("span",{className:"source-amount",children:["+",e.amount]})]},t))}),(0,Km.jsxs)("div",{className:"detail-total",children:["\ucd1d \uc0dd\uc0b0\ub7c9: +",t.sources.reduce((e,t)=>e+t.amount,0)]})]}),n&&(0,Km.jsxs)("div",{className:"detail-consumption",children:[(0,Km.jsx)("h4",{children:"\uc18c\ube44 \uc18c\uc2a4"}),(0,Km.jsx)("ul",{children:n.consumers.map((e,t)=>(0,Km.jsxs)("li",{children:[(0,Km.jsx)("span",{className:"consumer-icon",children:e.icon}),(0,Km.jsx)("span",{className:"consumer-name",children:e.name}),(0,Km.jsx)("span",{className:"consumer-amount",children:e.amount})]},t))}),(0,Km.jsxs)("div",{className:"detail-total",children:["\ucd1d \uc18c\ube44\ub7c9: ",n.consumers.reduce((e,t)=>e+t.amount,0)]})]}),(0,Km.jsxs)("div",{className:"detail-net",children:[(0,Km.jsx)("h4",{children:"\uc21c \ubcc0\ud654\ub7c9"}),(0,Km.jsx)("div",{className:"net-value",children:t&&n?t.sources.reduce((e,t)=>e+t.amount,0)+n.consumers.reduce((e,t)=>e+t.amount,0):e.trend})]}),(0,Km.jsx)("button",{className:"detail-close",onClick:()=>o(null),children:"\ub2eb\uae30"})]})})()]})},rg=()=>{const e=b(),{factions:t,updateFactionRelation:n,faction_east_relation:i,faction_west_relation:s,faction_south_relation:a,faction_north_relation:o,diplomatic_influence:l,gold:c}=e,[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(0),[g,v]=(0,r.useState)(0),[y,_]=(0,r.useState)(!1),w=[{id:"east",name:"\ub3d9\ubc29 \uc81c\uad6d",relation:i,description:"\uace0\ub300\ubd80\ud130 \uc774\uc5b4\uc838 \uc628 \uac15\ub825\ud55c \uc81c\uad6d\uc73c\ub85c, \ubb38\ud654\uc640 \uae30\uc220\uc774 \ubc1c\ub2ec\ud588\uc2b5\ub2c8\ub2e4.",traits:["\ubb38\ud654\uc801","\uae30\uc220\uc801","\uc804\ud1b5\uc801"],relationStatus:k(i),color:"#e74c3c",icon:"\ud83c\udfef",resources:["\ube44\ub2e8","\ub3c4\uc790\uae30","\ud5a5\uc2e0\ub8cc"],army:"\uc911\uc7a5\uac11 \ubcf4\ubcd1, \uad81\uc218",actions:x("east",i)},{id:"west",name:"\uc11c\ubc29 \uc5f0\ud569",relation:s,description:"\uc5ec\ub7ec \ub3c4\uc2dc \uad6d\uac00\uc758 \uc5f0\ud569\uccb4\ub85c, \ubb34\uc5ed\uacfc \ud574\uc0c1 \ud65c\ub3d9\uc774 \ud65c\ubc1c\ud569\ub2c8\ub2e4.",traits:["\uc0c1\uc5c5\uc801","\uc678\uad50\uc801","\uac1c\ubc29\uc801"],relationStatus:k(s),color:"#3498db",icon:"\u2693",resources:["\uae08","\ud5a5\ub8cc","\uc720\ub9ac"],army:"\uacbd\uae30\ubcd1, \ud574\uad70",actions:x("west",s)},{id:"south",name:"\ub0a8\ubd80 \uc655\uad6d",relation:a,description:"\ube44\uc625\ud55c \ud1a0\uc9c0\ub97c \uac00\uc9c4 \ub18d\uc5c5 \uc911\uc2ec \uc655\uad6d\uc73c\ub85c, \ud48d\ubd80\ud55c \uc2dd\ub7c9 \uc790\uc6d0\uc744 \ubcf4\uc720\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.",traits:["\ub18d\uc5c5\uc801","\ud3c9\ud654\uc801","\uc885\uad50\uc801"],relationStatus:k(a),color:"#2ecc71",icon:"\ud83c\udf3e",resources:["\uc2dd\ub7c9","\ubaa9\uc7ac","\uc57d\ucd08"],army:"\ubbfc\ubcd1\ub300, \ucf54\ub07c\ub9ac \uae30\ubcd1",actions:x("south",a)},{id:"north",name:"\ubd81\ubc29 \ubd80\uc871",relation:o,description:"\ud5d8\uc900\ud55c \uc0b0\ub9e5\uacfc \ucd94\uc6b4 \uae30\ud6c4\uc5d0 \uc801\uc751\ud55c \uc804\uc0ac \ubd80\uc871\uc73c\ub85c, \uac15\uc778\ud55c \uad70\uc0ac\ub825\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4.",traits:["\uc804\ud22c\uc801","\ub3c5\ub9bd\uc801","\uc2e0\ube44\uc801"],relationStatus:k(o),color:"#9b59b6",icon:"\u2744\ufe0f",resources:["\ucca0","\ubaa8\ud53c","\ub9c8\ubc95 \uc218\uc815"],army:"\uc57c\ub9cc \uc804\uc0ac, \uac70\uc778 \uae30\uc218",actions:x("north",o)}];function k(e){return e>=75?{name:"\ub3d9\ub9f9",color:"#27ae60",icon:"\ud83e\udd1d"}:e>=50?{name:"\uc6b0\ud638",color:"#2ecc71",icon:"\ud83d\ude0a"}:e>=25?{name:"\uc911\ub9bd\uc801 \uc6b0\ud638",color:"#f1c40f",icon:"\ud83d\ude42"}:e>=0?{name:"\uc911\ub9bd",color:"#95a5a6",icon:"\ud83d\ude10"}:e>=-25?{name:"\uc911\ub9bd\uc801 \uc801\ub300",color:"#e67e22",icon:"\ud83d\ude41"}:e>=-50?{name:"\uc801\ub300",color:"#e74c3c",icon:"\ud83d\ude20"}:e>=-75?{name:"\uc804\uc7c1",color:"#c0392b",icon:"\u2694\ufe0f"}:{name:"\ubd88\uad6c\ub300\ucc9c",color:"#7f0000",icon:"\ud83d\udc80"}}function x(e,t){const n=[{id:"gift",name:"\uc120\ubb3c \ubcf4\ub0b4\uae30",description:"\uae08\ud654\ub97c \uc120\ubb3c\ud558\uc5ec \uad00\uacc4\ub97c \uac1c\uc120\ud569\ub2c8\ub2e4.",cost:{type:"gold",value:100},effect:{type:"relation",value:5},minRelation:-100,maxRelation:90},{id:"trade",name:"\ubb34\uc5ed \ud611\uc815",description:"\ubb34\uc5ed \ud611\uc815\uc744 \uccb4\uacb0\ud558\uc5ec \uc0c1\ud638 \uc774\uc775\uc744 \ucd94\uad6c\ud569\ub2c8\ub2e4.",cost:{type:"gold",value:50},effect:{type:"relation",value:10},minRelation:0,maxRelation:100},{id:"embassy",name:"\ub300\uc0ac\uad00 \uc124\ub9bd",description:"\ub300\uc0ac\uad00\uc744 \uc124\ub9bd\ud558\uc5ec \uc678\uad50 \uad00\uacc4\ub97c \uac15\ud654\ud569\ub2c8\ub2e4.",cost:{type:"gold",value:200},effect:{type:"relation",value:15},minRelation:25,maxRelation:100}];return t>=50&&n.push({id:"alliance",name:"\ub3d9\ub9f9 \uccb4\uacb0",description:"\uacf5\uc2dd\uc801\uc778 \ub3d9\ub9f9\uc744 \uccb4\uacb0\ud558\uc5ec \uad70\uc0ac\uc801, \uacbd\uc81c\uc801 \ud611\ub825\uc744 \uac15\ud654\ud569\ub2c8\ub2e4.",cost:{type:"gold",value:300},effect:{type:"relation",value:25},minRelation:50,maxRelation:100}),t>=75&&n.push({id:"military_pact",name:"\uad70\uc0ac \ud611\uc57d",description:"\uad70\uc0ac \ud611\uc57d\uc744 \uccb4\uacb0\ud558\uc5ec \uc0c1\ud638 \ubc29\uc704\ub97c \uc57d\uc18d\ud569\ub2c8\ub2e4.",cost:{type:"gold",value:500},effect:{type:"relation",value:15},minRelation:75,maxRelation:100}),t<=0&&n.push({id:"threaten",name:"\uc704\ud611\ud558\uae30",description:"\uad70\uc0ac\ub825\uc744 \uacfc\uc2dc\ud558\uc5ec \uc0c1\ub300\ubc29\uc744 \uc704\ud611\ud569\ub2c8\ub2e4.",cost:{type:"diplomatic_influence",value:20},effect:{type:"relation",value:-15},minRelation:-100,maxRelation:0}),t<=-25&&n.push({id:"embargo",name:"\ud1b5\uc0c1 \uae08\uc9c0",description:"\ubaa8\ub4e0 \ubb34\uc5ed\uc744 \uc911\ub2e8\ud558\uace0 \uacbd\uc81c\uc801 \uc555\ubc15\uc744 \uac00\ud569\ub2c8\ub2e4.",cost:{type:"diplomatic_influence",value:30},effect:{type:"relation",value:-20},minRelation:-100,maxRelation:-25}),t<=-50&&n.push({id:"declare_war",name:"\uc804\uc7c1 \uc120\ud3ec",description:"\uacf5\uc2dd\uc801\uc73c\ub85c \uc804\uc7c1\uc744 \uc120\ud3ec\ud569\ub2c8\ub2e4.",cost:{type:"diplomatic_influence",value:50},effect:{type:"relation",value:-50},minRelation:-100,maxRelation:-50}),n}const E=()=>{u&&h&&("gold"===h.cost.type&&c<h.cost.value?alert("\uae08\ud654\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4!"):"diplomatic_influence"===h.cost.type&&l<h.cost.value?alert("\uc678\uad50 \uc601\ud5a5\ub825\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4!"):(n(u.id,h.effect.value),"gold"===h.cost.type?b.setState(e=>({gold:e.gold-h.cost.value})):"diplomatic_influence"===h.cost.type&&b.setState(e=>({diplomatic_influence:e.diplomatic_influence-h.cost.value})),b.setState(e=>({history:[...e.history,{event:"\uc678\uad50 \ud589\ub3d9",action:h.name,faction:u.name,effect:h.effect.value,turn:e.turn}]})),_(!1),d(null),f(null)))},S=()=>{_(!1),d(null),f(null)},I=e=>{const t=(e+100)/200*100;let n;return n=e>=75?"#27ae60":e>=50?"#2ecc71":e>=25?"#f1c40f":e>=0?"#95a5a6":e>=-25?"#e67e22":e>=-50?"#e74c3c":e>=-75?"#c0392b":"#7f0000",(0,Km.jsxs)("div",{className:"relation-bar-container",children:[(0,Km.jsx)("div",{className:"relation-bar-marker",style:{left:"50%"}}),(0,Km.jsx)("div",{className:"relation-bar",style:{width:`${t}%`,backgroundColor:n}}),(0,Km.jsx)("div",{className:"relation-value",children:e})]})};return(0,Km.jsxs)("div",{className:"diplomatic-relations",children:[(0,Km.jsxs)("div",{className:"diplomatic-header",children:[(0,Km.jsx)("h2",{children:"\uc678\uad50 \uad00\uacc4"}),(0,Km.jsxs)("div",{className:"diplomatic-stats",children:[(0,Km.jsxs)("div",{className:"diplomatic-stat",children:[(0,Km.jsx)("span",{className:"stat-icon",children:"\ud83c\udf10"}),(0,Km.jsx)("span",{className:"stat-label",children:"\uc678\uad50 \uc601\ud5a5\ub825:"}),(0,Km.jsx)("span",{className:"stat-value",children:l})]}),(0,Km.jsxs)("div",{className:"diplomatic-stat",children:[(0,Km.jsx)("span",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,Km.jsx)("span",{className:"stat-label",children:"\uae08\ud654:"}),(0,Km.jsx)("span",{className:"stat-value",children:c})]})]})]}),(0,Km.jsx)("div",{className:"factions-container",children:w.map(e=>(0,Km.jsxs)("div",{className:"faction-card",style:{borderColor:e.color},children:[(0,Km.jsxs)("div",{className:"faction-header",style:{backgroundColor:e.color},children:[(0,Km.jsx)("div",{className:"faction-icon",children:e.icon}),(0,Km.jsx)("h3",{className:"faction-name",children:e.name}),(0,Km.jsxs)("div",{className:"faction-status",children:[(0,Km.jsx)("span",{className:"status-icon",children:e.relationStatus.icon}),(0,Km.jsx)("span",{className:"status-name",children:e.relationStatus.name})]})]}),(0,Km.jsx)("div",{className:"faction-relation",children:I(e.relation)}),(0,Km.jsxs)("div",{className:"faction-info",children:[(0,Km.jsx)("p",{className:"faction-description",children:e.description}),(0,Km.jsx)("div",{className:"faction-traits",children:e.traits.map((e,t)=>(0,Km.jsx)("span",{className:"faction-trait",children:e},t))}),(0,Km.jsxs)("div",{className:"faction-resources",children:[(0,Km.jsx)("h4",{children:"\uc8fc\uc694 \uc790\uc6d0:"}),(0,Km.jsx)("div",{className:"resources-list",children:e.resources.map((e,t)=>(0,Km.jsx)("span",{className:"resource-item",children:e},t))})]}),(0,Km.jsxs)("div",{className:"faction-army",children:[(0,Km.jsx)("h4",{children:"\uad70\uc0ac\ub825:"}),(0,Km.jsx)("p",{children:e.army})]})]}),(0,Km.jsxs)("div",{className:"faction-actions",children:[(0,Km.jsx)("h4",{children:"\uc678\uad50 \ud589\ub3d9:"}),(0,Km.jsx)("div",{className:"actions-list",children:e.actions.map(t=>{const n=e.relation>=t.minRelation&&e.relation<=t.maxRelation,r="gold"===t.cost.type?c>=t.cost.value:l>=t.cost.value;return(0,Km.jsxs)("button",{className:"action-button "+(n&&r?"":"disabled"),onClick:()=>n&&r&&((e,t)=>{d(e),f(t),m(t.cost.value),v(t.effect.value),_(!0)})(e,t),disabled:!n||!r,title:n?r?t.description:`\uc790\uc6d0\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4 (${"gold"===t.cost.type?"\uae08\ud654":"\uc678\uad50 \uc601\ud5a5\ub825"} ${t.cost.value} \ud544\uc694)`:`\uad00\uacc4 \uc218\uc900\uc774 \uc801\uc808\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4 (${t.minRelation} ~ ${t.maxRelation})`,children:[(0,Km.jsx)("span",{className:"action-name",children:t.name}),(0,Km.jsxs)("span",{className:"action-cost",children:["gold"===t.cost.type?"\ud83d\udcb0":"\ud83c\udf10"," ",t.cost.value]})]},t.id)})})]})]},e.id))}),y&&u&&h?(0,Km.jsx)("div",{className:"diplomatic-modal",children:(0,Km.jsxs)("div",{className:"diplomatic-modal-content",children:[(0,Km.jsx)("h3",{children:"\uc678\uad50 \ud589\ub3d9 \ud655\uc778"}),(0,Km.jsxs)("p",{children:[(0,Km.jsx)("strong",{children:u.name}),"\uc5d0\uac8c ",(0,Km.jsx)("strong",{children:h.name})," \ud589\ub3d9\uc744 \uc2e4\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"]}),(0,Km.jsxs)("div",{className:"diplomatic-modal-details",children:[(0,Km.jsxs)("div",{className:"modal-detail",children:[(0,Km.jsx)("span",{className:"detail-label",children:"\ube44\uc6a9:"}),(0,Km.jsxs)("span",{className:"detail-value",children:["gold"===h.cost.type?"\uae08\ud654":"\uc678\uad50 \uc601\ud5a5\ub825"," ",h.cost.value]})]}),(0,Km.jsxs)("div",{className:"modal-detail",children:[(0,Km.jsx)("span",{className:"detail-label",children:"\ud6a8\uacfc:"}),(0,Km.jsxs)("span",{className:"detail-value",children:["\uad00\uacc4 ",h.effect.value>0?"+":"",h.effect.value]})]}),(0,Km.jsxs)("div",{className:"modal-detail",children:[(0,Km.jsx)("span",{className:"detail-label",children:"\ud604\uc7ac \uad00\uacc4:"}),(0,Km.jsx)("span",{className:"detail-value",children:u.relation})]}),(0,Km.jsxs)("div",{className:"modal-detail",children:[(0,Km.jsx)("span",{className:"detail-label",children:"\uc608\uc0c1 \uad00\uacc4:"}),(0,Km.jsx)("span",{className:"detail-value",children:u.relation+h.effect.value})]})]}),(0,Km.jsxs)("div",{className:"diplomatic-modal-actions",children:[(0,Km.jsx)("button",{className:"modal-button confirm",onClick:E,children:"\ud655\uc778"}),(0,Km.jsx)("button",{className:"modal-button cancel",onClick:S,children:"\ucde8\uc18c"})]})]})}):null]})},ig=()=>{const e=b(),{army:t,gold:n,iron:i,territories:s,discoveredTerritories:a,military_technology:o,military_readiness:l,military_defense:c,faction_east_relation:u,faction_west_relation:d,faction_south_relation:h,faction_north_relation:f}=e,[p,m]=(0,r.useState)("units"),[g,v]=(0,r.useState)(null),[y,_]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[x,E]=(0,r.useState)(10),[S,I]=(0,r.useState)(!1),[T,C]=(0,r.useState)(null),[N,A]=(0,r.useState)(null),R=[{id:"infantry",name:"\ubcf4\ubcd1",icon:"\u2694\ufe0f",description:"\uae30\ubcf8\uc801\uc778 \uc9c0\uc0c1 \uc804\ud22c \uc720\ub2db\uc73c\ub85c, \ubc29\uc5b4\uc5d0 \uac15\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.",attack:5,defense:8,speed:3,cost:{gold:10,iron:2},upkeep:2,techRequired:0},{id:"archer",name:"\uad81\uc218",icon:"\ud83c\udff9",description:"\uc6d0\uac70\ub9ac \uacf5\uaca9\uc774 \uac00\ub2a5\ud55c \uc720\ub2db\uc73c\ub85c, \uacf5\uaca9\uc5d0 \uac15\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.",attack:8,defense:3,speed:4,cost:{gold:15,iron:1},upkeep:3,techRequired:0},{id:"cavalry",name:"\uae30\ubcd1",icon:"\ud83d\udc0e",description:"\ube60\ub978 \uc774\ub3d9 \uc18d\ub3c4\ub97c \uac00\uc9c4 \uc720\ub2db\uc73c\ub85c, \uae30\ub3d9\uc131\uc5d0 \uac15\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.",attack:7,defense:5,speed:8,cost:{gold:25,iron:3},upkeep:5,techRequired:1},{id:"knight",name:"\uae30\uc0ac",icon:"\ud83d\udee1\ufe0f",description:"\uc911\uc7a5\uac11\uc744 \ucc29\uc6a9\ud55c \uc815\uc608 \uc720\ub2db\uc73c\ub85c, \uacf5\uaca9\uacfc \ubc29\uc5b4\uc5d0 \ubaa8\ub450 \uac15\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.",attack:10,defense:10,speed:5,cost:{gold:40,iron:8},upkeep:8,techRequired:2},{id:"siege",name:"\uacf5\uc131 \ubcd1\uae30",icon:"\ud83e\uddf1",description:"\uc131\ubcbd\uacfc \uc694\uc0c8\ub97c \uacf5\uaca9\ud558\ub294\ub370 \ud2b9\ud654\ub41c \uc720\ub2db\uc785\ub2c8\ub2e4.",attack:15,defense:2,speed:2,cost:{gold:50,iron:10},upkeep:10,techRequired:2},{id:"mage",name:"\ub9c8\ubc95\uc0ac",icon:"\u2728",description:"\ub9c8\ubc95\uc744 \uc0ac\uc6a9\ud558\ub294 \uc720\ub2db\uc73c\ub85c, \ud2b9\uc218 \uacf5\uaca9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.",attack:12,defense:4,speed:3,cost:{gold:60,iron:0,mana:10},upkeep:12,techRequired:3}],P=[{id:"army_1",name:"\uc911\uc559\uad70",location:"region_1",units:{infantry:50,archer:30,cavalry:20},commander:"\uc7a5\uad70 \uc774\uc21c\uc2e0",morale:85,experience:20,status:"\ub300\uae30 \uc911"},{id:"army_2",name:"\ubd81\ubc29 \uc218\ube44\ub300",location:"region_2",units:{infantry:30,archer:20},commander:"\uc7a5\uad70 \uae40\uc720\uc2e0",morale:70,experience:10,status:"\ubc29\uc5b4 \uc911"},{id:"army_3",name:"\ub3d9\ubd80 \uc6d0\uc815\uad70",location:"region_3",units:{infantry:40,archer:25,cavalry:15,knight:5},commander:"\uc7a5\uad70 \uac15\uac10\ucc2c",morale:90,experience:30,status:"\ud589\uad70 \uc911"}],j=[{id:"battle_1",name:"\ubd81\ubd80 \uc0b0\ub9e5 \uc804\ud22c",location:"region_2",attacker:"army_1",defender:"faction_north",status:"\uc9c4\ud589 \uc911",duration:3,casualties:{friendly:{infantry:10,archer:5},enemy:{infantry:15,archer:8}},winChance:65},{id:"battle_2",name:"\ub3d9\ubd80 \uc232 \ubc29\uc5b4\uc804",location:"region_3",attacker:"faction_east",defender:"army_3",status:"\uc2b9\ub9ac",duration:5,casualties:{friendly:{infantry:5,archer:3},enemy:{infantry:20,archer:15,cavalry:10}},winChance:100}],O=[{faction:"faction_north",level:"\ub192\uc74c",description:"\ubd81\ubc29 \ubd80\uc871\uc774 \uad6d\uacbd \uc9c0\uc5ed\uc5d0 \uad70\ub300\ub97c \uc9d1\uacb0\uc2dc\ud0a4\uace0 \uc788\uc2b5\ub2c8\ub2e4.",armySize:"\ub300\uaddc\ubaa8",timeToAttack:"2\ud134 \uc774\ub0b4"},{faction:"faction_east",level:"\uc911\uac04",description:"\ub3d9\ubc29 \uc81c\uad6d\uc774 \uad6d\uacbd \uc9c0\uc5ed\uc5d0\uc11c \uad70\uc0ac \ud6c8\ub828\uc744 \uc2e4\uc2dc\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.",armySize:"\uc911\uac04 \uaddc\ubaa8",timeToAttack:"4\ud134 \uc774\ub0b4"}],D=(e,t)=>{if(o<e.techRequired)return{canRecruit:!1,reason:`\ud544\uc694 \uae30\uc220 \uc218\uc900: ${e.techRequired}, \ud604\uc7ac \uae30\uc220 \uc218\uc900: ${o}`};const r=e.cost.gold*t,s=e.cost.iron*t;return n<r?{canRecruit:!1,reason:`\ud544\uc694 \uae08\ud654: ${r}, \ubcf4\uc720 \uae08\ud654: ${n}`}:i<s?{canRecruit:!1,reason:`\ud544\uc694 \ucca0: ${s}, \ubcf4\uc720 \ucca0: ${i}`}:{canRecruit:!0}},L=()=>{if(!g||x<=0)return;const e=R.find(e=>e.id===g);if(!e)return;const t=D(e,x);t.canRecruit?(alert(`${e.name} ${x}\uba85 \ubaa8\uc9d1 \uc644\ub8cc!`),k(!1)):alert(`\ubaa8\uc9d1 \ubd88\uac00: ${t.reason}`)},M=()=>{if(!T||!N)return;var t;e.moveArmy(T.id,N)?alert(`${T.name}\uc774(\uac00) ${(null===(t=s.find(e=>e.id===N))||void 0===t?void 0:t.name)||N}(\uc73c)\ub85c \uc774\ub3d9\ud588\uc2b5\ub2c8\ub2e4.`):alert("\uc774\ub3d9 \uc2e4\ud328: \uad70\ub300 \ub610\ub294 \ubaa9\uc801\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");I(!1),C(null),A(null)},F=e=>e>=50?"#2ecc71":e>=0?"#f1c40f":e>=-50?"#e67e22":"#e74c3c",U=e=>{switch(e){case"plains":return"\ud3c9\uc6d0";case"mountains":return"\uc0b0\ub9e5";case"forest":return"\uc232";case"coast":return"\ud574\uc548";case"highlands":return"\uace0\uc6d0";case"tundra":return"\uc124\uc6d0";case"hills":return"\uad6c\ub989\uc9c0";case"wasteland":return"\ud669\ubb34\uc9c0";case"island":return"\uc12c";case"swamp":return"\uc2b5\uc9c0";case"unknown":return"\ubbf8\uc9c0\uc758 \ub545";case"lake":return"\ud638\uc218";case"vineyard":return"\ud3ec\ub3c4\uc6d0";case"mines":return"\uad11\uc0b0";case"glacier":return"\ube59\ud558";case"volcano":return"\ud654\uc0b0";case"jungle":return"\uc815\uae00";case"valley":return"\uacc4\uace1";case"desert":return"\uc0ac\ub9c9";case"cliffs":return"\uc808\ubcbd";case"savanna":return"\ucd08\uc6d0";default:return e}},V=e=>{switch(e){case"faction_east":return"\ub3d9\ubc29 \uc81c\uad6d";case"faction_west":return"\uc11c\ubc29 \uc5f0\ud569";case"faction_south":return"\ub0a8\ubd80 \uc655\uad6d";case"faction_north":return"\ubd81\ubc29 \ubd80\uc871";default:return e}};return(0,Km.jsxs)("div",{className:"military-command",children:[(0,Km.jsxs)("div",{className:"military-header-main",children:[(0,Km.jsx)("h2",{children:"\uad70\uc0ac \uc9c0\ud718\ubd80"}),(0,Km.jsxs)("div",{className:"diplomatic-overview",children:[(0,Km.jsx)("h4",{children:"\uc678\uad50 \uad00\uacc4"}),(0,Km.jsxs)("div",{className:"faction-relations",children:[(0,Km.jsxs)("div",{className:"faction-relation-item",children:[(0,Km.jsx)("span",{className:"faction-name",children:"\ub3d9\ubc29 \uc81c\uad6d"}),(0,Km.jsx)("div",{className:"relation-indicator",style:{backgroundColor:F(u)}})]}),(0,Km.jsxs)("div",{className:"faction-relation-item",children:[(0,Km.jsx)("span",{className:"faction-name",children:"\uc11c\ubc29 \uc5f0\ud569"}),(0,Km.jsx)("div",{className:"relation-indicator",style:{backgroundColor:F(d)}})]}),(0,Km.jsxs)("div",{className:"faction-relation-item",children:[(0,Km.jsx)("span",{className:"faction-name",children:"\ub0a8\ubd80 \uc655\uad6d"}),(0,Km.jsx)("div",{className:"relation-indicator",style:{backgroundColor:F(h)}})]}),(0,Km.jsxs)("div",{className:"faction-relation-item",children:[(0,Km.jsx)("span",{className:"faction-name",children:"\ubd81\ubc29 \ubd80\uc871"}),(0,Km.jsx)("div",{className:"relation-indicator",style:{backgroundColor:F(f)}})]})]})]})]}),(0,Km.jsxs)("div",{className:"military-tabs",children:[(0,Km.jsx)("button",{className:"tab-button "+("units"===p?"active":""),onClick:()=>m("units"),children:"\uc720\ub2db"}),(0,Km.jsx)("button",{className:"tab-button "+("armies"===p?"active":""),onClick:()=>m("armies"),children:"\uad70\ub300"}),(0,Km.jsx)("button",{className:"tab-button "+("battles"===p?"active":""),onClick:()=>m("battles"),children:"\uc804\ud22c"})]}),(0,Km.jsxs)("div",{className:"military-content",children:["units"===p&&(0,Km.jsxs)("div",{className:"military-units",children:[(0,Km.jsxs)("div",{className:"military-header",children:[(0,Km.jsx)("h3",{children:"\uad70\uc0ac \uc720\ub2db"}),(0,Km.jsx)("button",{className:"recruit-button",onClick:()=>k(!0),children:"\uc720\ub2db \ubaa8\uc9d1"})]}),(0,Km.jsxs)("div",{className:"unit-stats",children:[(0,Km.jsxs)("div",{className:"stat-item",children:[(0,Km.jsx)("span",{className:"stat-icon",children:"\u2694\ufe0f"}),(0,Km.jsx)("span",{className:"stat-label",children:"\ucd1d \ubcd1\ub825:"}),(0,Km.jsx)("span",{className:"stat-value",children:t})]}),(0,Km.jsxs)("div",{className:"stat-item",children:[(0,Km.jsx)("span",{className:"stat-icon",children:"\ud83d\udee1\ufe0f"}),(0,Km.jsx)("span",{className:"stat-label",children:"\ubc29\uc5b4\ub825:"}),(0,Km.jsx)("span",{className:"stat-value",children:c})]}),(0,Km.jsxs)("div",{className:"stat-item",children:[(0,Km.jsx)("span",{className:"stat-icon",children:"\u26a1"}),(0,Km.jsx)("span",{className:"stat-label",children:"\uc804\ud22c \uc900\ube44\ub3c4:"}),(0,Km.jsxs)("span",{className:"stat-value",children:[l,"%"]})]}),(0,Km.jsxs)("div",{className:"stat-item",children:[(0,Km.jsx)("span",{className:"stat-icon",children:"\ud83d\udcda"}),(0,Km.jsx)("span",{className:"stat-label",children:"\uad70\uc0ac \uae30\uc220:"}),(0,Km.jsx)("span",{className:"stat-value",children:o})]})]}),(0,Km.jsx)("div",{className:"unit-list",children:R.map(e=>{const t=D(e,1);return(0,Km.jsxs)("div",{className:"unit-card "+(t.canRecruit?"":"locked"),onClick:()=>t.canRecruit&&v(e.id),children:[(0,Km.jsx)("div",{className:"unit-icon",children:e.icon}),(0,Km.jsxs)("div",{className:"unit-info",children:[(0,Km.jsx)("h4",{children:e.name}),(0,Km.jsx)("p",{className:"unit-description",children:e.description}),(0,Km.jsxs)("div",{className:"unit-attributes",children:[(0,Km.jsxs)("div",{className:"attribute",children:[(0,Km.jsx)("span",{className:"attribute-label",children:"\uacf5\uaca9\ub825:"}),(0,Km.jsx)("span",{className:"attribute-value",children:e.attack})]}),(0,Km.jsxs)("div",{className:"attribute",children:[(0,Km.jsx)("span",{className:"attribute-label",children:"\ubc29\uc5b4\ub825:"}),(0,Km.jsx)("span",{className:"attribute-value",children:e.defense})]}),(0,Km.jsxs)("div",{className:"attribute",children:[(0,Km.jsx)("span",{className:"attribute-label",children:"\uc18d\ub3c4:"}),(0,Km.jsx)("span",{className:"attribute-value",children:e.speed})]})]}),(0,Km.jsxs)("div",{className:"unit-cost",children:[(0,Km.jsx)("span",{className:"cost-label",children:"\ube44\uc6a9:"}),(0,Km.jsxs)("span",{className:"cost-value",children:[e.cost.gold&&(0,Km.jsxs)("span",{className:"gold-cost",children:["\ud83d\udcb0 ",e.cost.gold]}),e.cost.iron&&(0,Km.jsxs)("span",{className:"iron-cost",children:["\u2692\ufe0f ",e.cost.iron]}),e.cost.mana&&(0,Km.jsxs)("span",{className:"mana-cost",children:["\u2728 ",e.cost.mana]})]})]}),!t.canRecruit&&(0,Km.jsx)("div",{className:"unit-locked-reason",children:t.reason})]})]},e.id)})})]}),"armies"===p&&(0,Km.jsxs)("div",{className:"military-armies",children:[(0,Km.jsx)("h3",{children:"\uad70\ub300 \uad00\ub9ac"}),(0,Km.jsx)("div",{className:"armies-list",children:P.map(e=>{const t=s.find(t=>t.id===e.location),n=Object.values(e.units).reduce((e,t)=>e+t,0);return(0,Km.jsxs)("div",{className:"army-card "+(y===e.id?"selected":""),onClick:()=>_(e.id===y?null:e.id),children:[(0,Km.jsxs)("div",{className:"army-header",children:[(0,Km.jsx)("h4",{children:e.name}),(0,Km.jsx)("div",{className:"army-status",children:e.status})]}),(0,Km.jsxs)("div",{className:"army-info",children:[(0,Km.jsxs)("div",{className:"army-location",children:[(0,Km.jsx)("span",{className:"info-label",children:"\uc704\uce58:"}),(0,Km.jsx)("span",{className:"info-value",children:t?t.name:e.location})]}),(0,Km.jsxs)("div",{className:"army-commander",children:[(0,Km.jsx)("span",{className:"info-label",children:"\uc9c0\ud718\uad00:"}),(0,Km.jsx)("span",{className:"info-value",children:e.commander})]}),(0,Km.jsxs)("div",{className:"army-stats",children:[(0,Km.jsxs)("div",{className:"army-stat",children:[(0,Km.jsx)("span",{className:"stat-label",children:"\ubcd1\ub825:"}),(0,Km.jsx)("span",{className:"stat-value",children:n})]}),(0,Km.jsxs)("div",{className:"army-stat",children:[(0,Km.jsx)("span",{className:"stat-label",children:"\uc0ac\uae30:"}),(0,Km.jsxs)("span",{className:"stat-value",children:[e.morale,"%"]})]}),(0,Km.jsxs)("div",{className:"army-stat",children:[(0,Km.jsx)("span",{className:"stat-label",children:"\uacbd\ud5d8\uce58:"}),(0,Km.jsx)("span",{className:"stat-value",children:e.experience})]})]})]}),(0,Km.jsxs)("div",{className:"army-units",children:[(0,Km.jsx)("h5",{children:"\uc720\ub2db \uad6c\uc131"}),(0,Km.jsx)("div",{className:"army-unit-list",children:Object.entries(e.units).map(e=>{let[t,n]=e;const r=R.find(e=>e.id===t);return r?(0,Km.jsxs)("div",{className:"army-unit",children:[(0,Km.jsx)("span",{className:"unit-icon",children:r.icon}),(0,Km.jsx)("span",{className:"unit-name",children:r.name}),(0,Km.jsx)("span",{className:"unit-count",children:n})]},t):null})})]}),(0,Km.jsxs)("div",{className:"army-actions",children:[(0,Km.jsx)("button",{className:"action-button",onClick:t=>{t.stopPropagation(),e.id,alert("\uad70\ub300 \uac15\ud654 \uc644\ub8cc!")},children:"\uac15\ud654"}),(0,Km.jsx)("button",{className:"action-button",onClick:t=>{t.stopPropagation(),(e=>{const t=P.find(t=>t.id===e);t&&(C(t),A(null),I(!0))})(e.id)},children:"\uc774\ub3d9"}),(0,Km.jsx)("button",{className:"action-button attack",onClick:t=>{t.stopPropagation(),e.id,alert("\uc804\ud22c \uc2dc\uc791!")},children:"\uacf5\uaca9"})]})]},e.id)})})]}),"battles"===p&&(0,Km.jsxs)("div",{className:"military-battles",children:[(0,Km.jsxs)("div",{className:"battles-header",children:[(0,Km.jsx)("h3",{children:"\uc804\ud22c \uc0c1\ud669"}),(0,Km.jsxs)("div",{className:"threat-assessment",children:[(0,Km.jsx)("h4",{children:"\uc704\ud611 \ud3c9\uac00"}),(0,Km.jsx)("div",{className:"threats-list",children:O.map((e,t)=>(0,Km.jsxs)("div",{className:"threat-item",children:[(0,Km.jsx)("div",{className:"threat-faction",children:V(e.faction)}),(0,Km.jsx)("div",{className:"threat-level "+("\ub192\uc74c"===e.level?"high":"\uc911\uac04"===e.level?"medium":"low"),children:e.level}),(0,Km.jsxs)("div",{className:"threat-details",children:[(0,Km.jsx)("p",{children:e.description}),(0,Km.jsxs)("div",{className:"threat-info",children:[(0,Km.jsxs)("span",{children:["\uc608\uc0c1 \ubcd1\ub825: ",e.armySize]}),(0,Km.jsxs)("span",{children:["\uc608\uc0c1 \uacf5\uaca9 \uc2dc\uae30: ",e.timeToAttack]})]})]})]},t))})]})]}),(0,Km.jsxs)("div",{className:"battles-list",children:[(0,Km.jsx)("h4",{children:"\uc9c4\ud589 \uc911\uc778 \uc804\ud22c"}),j.map(e=>{const t=s.find(t=>t.id===e.location),n=P.find(t=>t.id===e.attacker),r=n?n.name:V(e.attacker),i=P.find(t=>t.id===e.defender),a=i?i.name:V(e.defender),o=e.casualties.friendly?Object.values(e.casualties.friendly).reduce((e,t)=>e+t,0):0,l=e.casualties.enemy?Object.values(e.casualties.enemy).reduce((e,t)=>e+t,0):0;return(0,Km.jsxs)("div",{className:"battle-card",children:[(0,Km.jsxs)("div",{className:"battle-header",children:[(0,Km.jsx)("h5",{children:e.name}),(0,Km.jsx)("div",{className:"battle-status "+("\uc9c4\ud589 \uc911"===e.status?"ongoing":"\uc2b9\ub9ac"===e.status?"victory":"defeat"),children:e.status})]}),(0,Km.jsxs)("div",{className:"battle-info",children:[(0,Km.jsxs)("div",{className:"battle-location",children:[(0,Km.jsx)("span",{className:"info-label",children:"\uc704\uce58:"}),(0,Km.jsx)("span",{className:"info-value",children:t?t.name:e.location})]}),(0,Km.jsxs)("div",{className:"battle-duration",children:[(0,Km.jsx)("span",{className:"info-label",children:"\uc9c0\uc18d \uc2dc\uac04:"}),(0,Km.jsxs)("span",{className:"info-value",children:[e.duration,"\ud134"]})]}),(0,Km.jsxs)("div",{className:"battle-win-chance",children:[(0,Km.jsx)("span",{className:"info-label",children:"\uc2b9\ub9ac \ud655\ub960:"}),(0,Km.jsxs)("span",{className:"info-value",children:[e.winChance,"%"]})]})]}),(0,Km.jsxs)("div",{className:"battle-forces",children:[(0,Km.jsxs)("div",{className:"battle-force attacker",children:[(0,Km.jsxs)("h6",{children:["\uacf5\uaca9\uc790: ",r]}),(0,Km.jsxs)("div",{className:"casualties",children:["\ud53c\ud574: ",o]})]}),(0,Km.jsx)("div",{className:"battle-vs",children:"VS"}),(0,Km.jsxs)("div",{className:"battle-force defender",children:[(0,Km.jsxs)("h6",{children:["\ubc29\uc5b4\uc790: ",a]}),(0,Km.jsxs)("div",{className:"casualties",children:["\ud53c\ud574: ",l]})]})]}),"\uc9c4\ud589 \uc911"===e.status&&(0,Km.jsxs)("div",{className:"battle-actions",children:[(0,Km.jsx)("button",{className:"action-button",children:"\uc804\uc220 \ubcc0\uacbd"}),(0,Km.jsx)("button",{className:"action-button",children:"\uc99d\uc6d0 \uc694\uccad"}),(0,Km.jsx)("button",{className:"action-button retreat",children:"\ud6c4\ud1f4"})]})]},e.id)})]})]})]}),(()=>{if(!w)return null;const t=R.find(e=>e.id===g);return(0,Km.jsx)("div",{className:"recruit-modal",children:(0,Km.jsxs)("div",{className:"recruit-modal-content",children:[(0,Km.jsx)("h3",{children:"\uc720\ub2db \ubaa8\uc9d1"}),t?(0,Km.jsxs)(Km.Fragment,{children:[(0,Km.jsxs)("div",{className:"selected-unit",children:[(0,Km.jsx)("div",{className:"unit-icon",children:t.icon}),(0,Km.jsx)("div",{className:"unit-name",children:t.name})]}),(0,Km.jsxs)("div",{className:"recruit-amount",children:[(0,Km.jsx)("label",{htmlFor:"recruit-amount",children:"\ubaa8\uc9d1\ud560 \uc218\ub7c9:"}),(0,Km.jsx)("input",{type:"number",id:"recruit-amount",min:"1",max:"100",value:x,onChange:e=>E(parseInt(e.target.value)||0)})]}),(0,Km.jsxs)("div",{className:"recruit-cost",children:[(0,Km.jsx)("h4",{children:"\ud544\uc694 \uc790\uc6d0:"}),(0,Km.jsxs)("div",{className:"cost-item",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\ud83d\udcb0"}),(0,Km.jsx)("span",{className:"cost-label",children:"\uae08\ud654:"}),(0,Km.jsx)("span",{className:"cost-value",children:t.cost.gold*x}),(0,Km.jsxs)("span",{className:"cost-available",children:["/ ",n]})]}),t.cost.iron>0&&(0,Km.jsxs)("div",{className:"cost-item",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\u2692\ufe0f"}),(0,Km.jsx)("span",{className:"cost-label",children:"\ucca0:"}),(0,Km.jsx)("span",{className:"cost-value",children:t.cost.iron*x}),(0,Km.jsxs)("span",{className:"cost-available",children:["/ ",i]})]}),t.cost.mana>0&&(0,Km.jsxs)("div",{className:"cost-item",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\u2728"}),(0,Km.jsx)("span",{className:"cost-label",children:"\ub9c8\ub098:"}),(0,Km.jsx)("span",{className:"cost-value",children:t.cost.mana*x}),(0,Km.jsxs)("span",{className:"cost-available",children:["/ ",e.mana]})]})]}),(0,Km.jsxs)("div",{className:"recruit-upkeep",children:[(0,Km.jsx)("h4",{children:"\uc720\uc9c0 \ube44\uc6a9:"}),(0,Km.jsxs)("div",{className:"upkeep-item",children:[(0,Km.jsx)("span",{className:"upkeep-icon",children:"\ud83d\udcb0"}),(0,Km.jsx)("span",{className:"upkeep-label",children:"\ud134\ub2f9 \uae08\ud654:"}),(0,Km.jsx)("span",{className:"upkeep-value",children:t.upkeep*x})]})]}),(0,Km.jsxs)("div",{className:"recruit-actions",children:[(0,Km.jsx)("button",{className:"action-button confirm",onClick:L,children:"\ubaa8\uc9d1"}),(0,Km.jsx)("button",{className:"action-button cancel",onClick:()=>k(!1),children:"\ucde8\uc18c"})]})]}):(0,Km.jsxs)("div",{className:"no-unit-selected",children:[(0,Km.jsx)("p",{children:"\ubaa8\uc9d1\ud560 \uc720\ub2db\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."}),(0,Km.jsx)("div",{className:"unit-selection",children:R.map(e=>{const t=D(e,1);return(0,Km.jsxs)("button",{className:"unit-select-button "+(t.canRecruit?"":"disabled"),onClick:()=>t.canRecruit&&v(e.id),disabled:!t.canRecruit,children:[(0,Km.jsx)("span",{className:"unit-icon",children:e.icon}),(0,Km.jsx)("span",{className:"unit-name",children:e.name})]},e.id)})}),(0,Km.jsx)("button",{className:"action-button cancel",onClick:()=>k(!1),children:"\ucde8\uc18c"})]})]})})})(),(()=>{var e;if(!S||!T)return null;const t=s.filter(e=>a.includes(e.id)&&e.id!==T.location);return(0,Km.jsx)("div",{className:"move-modal",children:(0,Km.jsxs)("div",{className:"move-modal-content",children:[(0,Km.jsx)("h3",{children:"\uad70\ub300 \uc774\ub3d9"}),(0,Km.jsxs)("div",{className:"selected-army",children:[(0,Km.jsx)("h4",{children:T.name}),(0,Km.jsxs)("div",{className:"army-info",children:[(0,Km.jsxs)("div",{className:"army-location",children:[(0,Km.jsx)("span",{className:"info-label",children:"\ud604\uc7ac \uc704\uce58:"}),(0,Km.jsx)("span",{className:"info-value",children:(null===(e=s.find(e=>e.id===T.location))||void 0===e?void 0:e.name)||T.location})]}),(0,Km.jsxs)("div",{className:"army-units-count",children:[(0,Km.jsx)("span",{className:"info-label",children:"\ubcd1\ub825:"}),(0,Km.jsx)("span",{className:"info-value",children:Object.values(T.units).reduce((e,t)=>e+t,0)})]})]})]}),(0,Km.jsxs)("div",{className:"destination-selection",children:[(0,Km.jsx)("h4",{children:"\ubaa9\uc801\uc9c0 \uc120\ud0dd:"}),t.length>0?(0,Km.jsx)("div",{className:"territories-list",children:t.map(e=>(0,Km.jsxs)("div",{className:"territory-item "+(N===e.id?"selected":""),onClick:()=>A(e.id),children:[(0,Km.jsx)("div",{className:"territory-name",children:e.name}),(0,Km.jsx)("div",{className:"territory-type",children:U(e.type)}),e.controlledBy&&(0,Km.jsxs)("div",{className:"territory-control",children:["\uc18c\uc720: ","player"===e.controlledBy?"\ud50c\ub808\uc774\uc5b4":V(e.controlledBy)]})]},e.id))}):(0,Km.jsx)("div",{className:"no-territories",children:(0,Km.jsx)("p",{children:"\uc774\ub3d9 \uac00\ub2a5\ud55c \uc601\ud1a0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})]}),(0,Km.jsxs)("div",{className:"move-actions",children:[(0,Km.jsx)("button",{className:"action-button confirm",onClick:M,disabled:!N,children:"\uc774\ub3d9"}),(0,Km.jsx)("button",{className:"action-button cancel",onClick:()=>{I(!1),C(null),A(null)},children:"\ucde8\uc18c"})]})]})})})()]})},sg=()=>{const e=b(),{research_points:t,researchTechnology:n,researchedTechnologies:i,mana:s}=e,[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)("all"),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({}),p=[{id:"all",name:"\ubaa8\ub4e0 \uae30\uc220",icon:"\ud83d\udd0d"},{id:"economy",name:"\uacbd\uc81c",icon:"\ud83d\udcb0"},{id:"military",name:"\uad70\uc0ac",icon:"\u2694\ufe0f"},{id:"science",name:"\uacfc\ud559",icon:"\ud83d\udd2c"},{id:"culture",name:"\ubb38\ud654",icon:"\ud83c\udfad"},{id:"arcane",name:"\ub9c8\ubc95",icon:"\u2728"}],m=[1,2,3];(0,r.useEffect)(()=>{const e={};p.forEach(t=>{"all"!==t.id&&(e[t.id]={},m.forEach(n=>{e[t.id][n]=v.filter(e=>e.category===t.id&&e.tier===n)}))}),f(e)},[]);const g=e=>{if(i.includes(e.id))return{canResearch:!1,reason:"\uc774\ubbf8 \uc5f0\uad6c\ub41c \uae30\uc220\uc785\ub2c8\ub2e4."};if(e.prerequisites&&e.prerequisites.length>0){const t=e.prerequisites.filter(e=>!i.includes(e));if(t.length>0){return{canResearch:!1,reason:`\uc120\ud589 \uae30\uc220\uc774 \ud544\uc694\ud569\ub2c8\ub2e4: ${t.map(e=>{const t=v.find(t=>t.id===e);return t?t.name:e}).join(", ")}`}}}return t<e.cost.research_points?{canResearch:!1,reason:`\uc5f0\uad6c \ud3ec\uc778\ud2b8\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ${e.cost.research_points}, \ubcf4\uc720: ${t})`}:e.cost.mana&&s<e.cost.mana?{canResearch:!1,reason:`\ub9c8\ub098\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4. (\ud544\uc694: ${e.cost.mana}, \ubcf4\uc720: ${s})`}:{canResearch:!0}},y=()=>{if(!a)return;const e=v.find(e=>e.id===a);if(!e)return;const t=g(e);if(!t.canResearch)return void alert(`\uc5f0\uad6c \ubd88\uac00: ${t.reason}`);n(e.id)?(d(!1),o(null)):alert("\uc5f0\uad6c \uc2e4\ud328: \uc54c \uc218 \uc5c6\ub294 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")},_=()=>{d(!1),o(null)},w=e=>{const t=v.find(t=>t.id===e);if(!t)return;if(o(e),i.includes(e))return;const n=g(t);n.canResearch?d(!0):alert(`\uc5f0\uad6c \ubd88\uac00: ${n.reason}`)},k=e=>{const t=i.includes(e.id),n=g(e),r=n.canResearch,s=a===e.id,o=Object.entries(e.effects).map(e=>{let[t,n]=e;return`${t.replace(/_/g," ")}: ${n>0?`+${n}`:n}`}).join(", ");return(0,Km.jsxs)("div",{className:`tech-node ${t?"researched":""} ${r?"researchable":""} ${s?"selected":""}`,onClick:()=>w(e.id),children:[(0,Km.jsx)("div",{className:"tech-icon",children:x(e.category)}),(0,Km.jsxs)("div",{className:"tech-info",children:[(0,Km.jsx)("h4",{className:"tech-name",children:e.name}),(0,Km.jsxs)("div",{className:"tech-cost",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\ud83d\udcda"}),(0,Km.jsx)("span",{className:"cost-value",children:e.cost.research_points}),e.cost.mana&&(0,Km.jsxs)(Km.Fragment,{children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\u2728"}),(0,Km.jsx)("span",{className:"cost-value",children:e.cost.mana})]})]})]}),(0,Km.jsxs)("div",{className:"tech-tooltip",children:[(0,Km.jsx)("h4",{children:e.name}),(0,Km.jsx)("p",{children:e.description}),(0,Km.jsxs)("div",{className:"tech-effects",children:[(0,Km.jsx)("strong",{children:"\ud6a8\uacfc:"})," ",o]}),e.prerequisites&&e.prerequisites.length>0&&(0,Km.jsxs)("div",{className:"tech-prerequisites",children:[(0,Km.jsx)("strong",{children:"\uc120\ud589 \uae30\uc220:"})," ",e.prerequisites.map(e=>{const t=v.find(t=>t.id===e);return t?t.name:e}).join(", ")]}),e.unlocksBuildings&&e.unlocksBuildings.length>0&&(0,Km.jsxs)("div",{className:"tech-unlocks",children:[(0,Km.jsx)("strong",{children:"\uac74\ubb3c \ud574\uae08:"})," ",e.unlocksBuildings.join(", ")]}),e.unlocksUnits&&e.unlocksUnits.length>0&&(0,Km.jsxs)("div",{className:"tech-unlocks",children:[(0,Km.jsx)("strong",{children:"\uc720\ub2db \ud574\uae08:"})," ",e.unlocksUnits.join(", ")]}),!t&&!r&&(0,Km.jsx)("div",{className:"tech-locked-reason",children:n.reason})]})]},e.id)},x=e=>{const t=p.find(t=>t.id===e);return t?t.icon:"\ud83d\udd0d"};return(0,Km.jsxs)("div",{className:"technology-tree",children:[(0,Km.jsxs)("div",{className:"tech-header",children:[(0,Km.jsx)("h2",{children:"\uae30\uc220 \uc5f0\uad6c"}),(0,Km.jsxs)("div",{className:"research-points",children:[(0,Km.jsx)("span",{className:"points-icon",children:"\ud83d\udcda"}),(0,Km.jsx)("span",{className:"points-label",children:"\uc5f0\uad6c \ud3ec\uc778\ud2b8:"}),(0,Km.jsx)("span",{className:"points-value",children:t})]})]}),(0,Km.jsx)("div",{className:"tech-categories",children:p.map(e=>(0,Km.jsxs)("button",{className:"category-button "+(l===e.id?"active":""),onClick:()=>c(e.id),children:[(0,Km.jsx)("span",{className:"category-icon",children:e.icon}),(0,Km.jsx)("span",{className:"category-name",children:e.name})]},e.id))}),(0,Km.jsxs)("div",{className:"tech-content",children:[(0,Km.jsx)("div",{className:"tech-tree-container",children:"all"===l?(0,Km.jsx)("div",{className:"tech-tree-all",children:p.map(e=>"all"===e.id?null:(0,Km.jsxs)("div",{className:"category-section",children:[(0,Km.jsxs)("h3",{className:"category-title",children:[(0,Km.jsx)("span",{className:"category-icon",children:e.icon}),e.name]}),(0,Km.jsx)("div",{className:"category-techs",children:m.map(t=>(0,Km.jsxs)("div",{className:"tier-section",children:[(0,Km.jsxs)("div",{className:"tier-label",children:["\ud2f0\uc5b4 ",t]}),(0,Km.jsx)("div",{className:"tier-techs",children:h[e.id]&&h[e.id][t]&&h[e.id][t].map(e=>k(e))})]},`${e.id}-${t}`))})]},e.id))}):(0,Km.jsx)("div",{className:"tech-tree-category",children:m.map(e=>(0,Km.jsxs)("div",{className:"tier-section",children:[(0,Km.jsxs)("div",{className:"tier-label",children:["\ud2f0\uc5b4 ",e]}),(0,Km.jsx)("div",{className:"tier-techs",children:h[l]&&h[l][e]&&h[l][e].map(e=>k(e))})]},`${l}-${e}`))})}),(0,Km.jsx)("div",{className:"tech-details-container",children:(()=>{if(!a)return null;const n=v.find(e=>e.id===a);if(!n)return null;const r=i.includes(n.id),s=g(n);return(0,Km.jsxs)("div",{className:"tech-details-panel",children:[(0,Km.jsxs)("div",{className:"tech-details-header",children:[(0,Km.jsx)("div",{className:"tech-icon large",children:x(n.category)}),(0,Km.jsx)("h3",{children:n.name}),(0,Km.jsxs)("div",{className:"tech-tier",children:["\ud2f0\uc5b4 ",n.tier]})]}),(0,Km.jsx)("div",{className:"tech-description",children:n.description}),(0,Km.jsxs)("div",{className:"tech-effects-list",children:[(0,Km.jsx)("h4",{children:"\ud6a8\uacfc"}),(0,Km.jsx)("ul",{children:Object.entries(n.effects).map((e,t)=>{let[n,r]=e;const i=n.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),s=r>0?`+${r}`:r;let a="\ud83d\udcc8";return n.includes("production")?a="\ud83c\udfed":n.includes("attack")?a="\u2694\ufe0f":n.includes("defense")?a="\ud83d\udee1\ufe0f":n.includes("gold")?a="\ud83d\udcb0":n.includes("food")?a="\ud83c\udf3e":n.includes("research")?a="\ud83d\udcda":n.includes("mana")&&(a="\u2728"),(0,Km.jsxs)("li",{className:"effect-item",children:[(0,Km.jsx)("span",{className:"effect-icon",children:a}),(0,Km.jsx)("span",{className:"effect-name",children:i}),(0,Km.jsx)("span",{className:"effect-value",children:s})]},t)})})]}),n.prerequisites&&n.prerequisites.length>0&&(0,Km.jsxs)("div",{className:"tech-prerequisites-list",children:[(0,Km.jsx)("h4",{children:"\uc120\ud589 \uae30\uc220"}),(0,Km.jsx)("ul",{children:n.prerequisites.map(e=>{const t=v.find(t=>t.id===e);if(!t)return null;const n=i.includes(e);return(0,Km.jsxs)("li",{className:"prerequisite-item "+(n?"researched":"missing"),onClick:()=>w(e),children:[(0,Km.jsx)("span",{className:"prereq-icon",children:n?"\u2705":"\u274c"}),(0,Km.jsx)("span",{className:"prereq-name",children:t.name})]},e)})})]}),n.unlocksBuildings&&n.unlocksBuildings.length>0||n.unlocksUnits&&n.unlocksUnits.length>0||n.unlocksResources&&n.unlocksResources.length>0?(0,Km.jsxs)("div",{className:"tech-unlocks-list",children:[(0,Km.jsx)("h4",{children:"\ud574\uae08 \ud56d\ubaa9"}),n.unlocksBuildings&&n.unlocksBuildings.length>0&&(0,Km.jsxs)("div",{className:"unlocks-section",children:[(0,Km.jsx)("h5",{children:"\uac74\ubb3c"}),(0,Km.jsx)("ul",{className:"unlocks-items",children:n.unlocksBuildings.map(e=>(0,Km.jsxs)("li",{className:"unlock-item",children:[(0,Km.jsx)("span",{className:"unlock-icon",children:"\ud83c\udfdb\ufe0f"}),(0,Km.jsx)("span",{className:"unlock-name",children:e})]},e))})]}),n.unlocksUnits&&n.unlocksUnits.length>0&&(0,Km.jsxs)("div",{className:"unlocks-section",children:[(0,Km.jsx)("h5",{children:"\uc720\ub2db"}),(0,Km.jsx)("ul",{className:"unlocks-items",children:n.unlocksUnits.map(e=>(0,Km.jsxs)("li",{className:"unlock-item",children:[(0,Km.jsx)("span",{className:"unlock-icon",children:"\u2694\ufe0f"}),(0,Km.jsx)("span",{className:"unlock-name",children:e})]},e))})]}),n.unlocksResources&&n.unlocksResources.length>0&&(0,Km.jsxs)("div",{className:"unlocks-section",children:[(0,Km.jsx)("h5",{children:"\uc790\uc6d0"}),(0,Km.jsx)("ul",{className:"unlocks-items",children:n.unlocksResources.map(e=>(0,Km.jsxs)("li",{className:"unlock-item",children:[(0,Km.jsx)("span",{className:"unlock-icon",children:"\ud83d\udce6"}),(0,Km.jsx)("span",{className:"unlock-name",children:e})]},e))})]})]}):null,(0,Km.jsx)("div",{className:"tech-status",children:r?(0,Km.jsxs)("div",{className:"researched-status",children:[(0,Km.jsx)("span",{className:"status-icon",children:"\u2705"}),(0,Km.jsx)("span",{className:"status-text",children:"\uc5f0\uad6c \uc644\ub8cc"})]}):(0,Km.jsxs)("div",{className:"research-cost",children:[(0,Km.jsx)("h4",{children:"\uc5f0\uad6c \ube44\uc6a9"}),(0,Km.jsxs)("div",{className:"cost-item",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\ud83d\udcda"}),(0,Km.jsx)("span",{className:"cost-label",children:"\uc5f0\uad6c \ud3ec\uc778\ud2b8:"}),(0,Km.jsx)("span",{className:"cost-value",children:n.cost.research_points}),(0,Km.jsxs)("span",{className:"cost-available",children:["/ ",t]})]}),n.cost.mana&&(0,Km.jsxs)("div",{className:"cost-item",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\u2728"}),(0,Km.jsx)("span",{className:"cost-label",children:"\ub9c8\ub098:"}),(0,Km.jsx)("span",{className:"cost-value",children:n.cost.mana}),(0,Km.jsxs)("span",{className:"cost-available",children:["/ ",e.mana||0]})]}),!s.canResearch&&(0,Km.jsx)("div",{className:"research-locked-reason",children:s.reason})]})}),!r&&s.canResearch&&(0,Km.jsx)("button",{className:"research-button",onClick:()=>d(!0),children:"\uc5f0\uad6c \uc2dc\uc791"})]})})()})]}),(()=>{if(!u||!a)return null;const n=v.find(e=>e.id===a);return n?(0,Km.jsx)("div",{className:"confirmation-modal",children:(0,Km.jsxs)("div",{className:"confirmation-content",children:[(0,Km.jsx)("h3",{children:"\uae30\uc220 \uc5f0\uad6c \ud655\uc778"}),(0,Km.jsxs)("p",{children:[(0,Km.jsx)("strong",{children:n.name})," \uae30\uc220\uc744 \uc5f0\uad6c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"]}),(0,Km.jsxs)("div",{className:"confirmation-cost",children:[(0,Km.jsxs)("div",{className:"cost-item",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\ud83d\udcda"}),(0,Km.jsx)("span",{className:"cost-label",children:"\uc5f0\uad6c \ud3ec\uc778\ud2b8:"}),(0,Km.jsx)("span",{className:"cost-value",children:n.cost.research_points}),(0,Km.jsxs)("span",{className:"cost-available",children:["/ ",t]})]}),n.cost.mana&&(0,Km.jsxs)("div",{className:"cost-item",children:[(0,Km.jsx)("span",{className:"cost-icon",children:"\u2728"}),(0,Km.jsx)("span",{className:"cost-label",children:"\ub9c8\ub098:"}),(0,Km.jsx)("span",{className:"cost-value",children:n.cost.mana}),(0,Km.jsxs)("span",{className:"cost-available",children:["/ ",e.mana||0]})]})]}),(0,Km.jsxs)("div",{className:"confirmation-actions",children:[(0,Km.jsx)("button",{className:"confirm-button",onClick:y,children:"\uc5f0\uad6c"}),(0,Km.jsx)("button",{className:"cancel-button",onClick:_,children:"\ucde8\uc18c"})]})]})}):null})()]})},ag=(0,r.createContext)(null);({NODE_ENV:"production",PUBLIC_URL:"/jemini",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_API_KEY&&{NODE_ENV:"production",PUBLIC_URL:"/jemini",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GROQ_API_KEY||console.warn("\ud658\uacbd \ubcc0\uc218\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c\ub294 .env \ud30c\uc77c\uc5d0 \uc2e4\uc81c API \ud0a4\ub97c \uc124\uc815\ud558\uc138\uc694.");const og=vt({apiKey:"AIzaSyBNJtmpRWzjobrY556bnHkwbZmpFJqgPX8",authDomain:"text-adventure-game-cb731.firebaseapp.com",projectId:"text-adventure-game-cb731",storageBucket:"text-adventure-game-cb731.appspot.com",messagingSenderId:"1092941614820",appId:"1:1092941614820:web:5545f36014b73c268026f1"}),lg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt();const t=ht(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ht(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(W(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Lt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Hi,persistence:[ti,Dr,Vr]}),r=A("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qi)return;const r=null===t||void 0===t?void 0:t.token;Ji!==r&&(Ji=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){ee(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){ee(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=C("auth");return s&&rr(n,`http://${s}`),n}(og),cg=function(e,t){const n="object"==typeof e?e:yt(),r="string"==typeof e?e:t||ko,i=ht(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=C(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Df(i,...e)}return i}(og);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt();e=ee(e);const t=ht(e,mm);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ht(e,mm);if(n.isInitialized()){const e=n.getImmediate();if(W(t,n.getOptions()))return e;throw ym.create("already-initialized")}const r=n.initialize({options:t})}(e)}(og);function ug(){const{gameOver:e,result:t}=b(),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!0),[v,y]=(0,r.useState)(null),[_,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=function(e,t,n,r){return ee(e).onAuthStateChanged(t,n,r)}(lg,e=>{e?(p(e),g(!1),k(e.uid)):async function(e){var t;if(ft(e.app))return Promise.reject(Ut(e));const n=Hn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Er({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await xr(n,{returnSecureToken:!0}),i=await Er._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(lg).then(e=>{p(e.user),g(!1),k(e.user.uid)}).catch(e=>{console.error("\uc775\uba85 \ub85c\uadf8\uc778 \uc2e4\ud328:",e),g(!1)})});return()=>e()},[]),(0,r.useEffect)(()=>{if(!f)return;const e=setInterval(()=>{x()},3e5);return()=>clearInterval(e)},[f]);const k=async e=>{try{const t=Uf(cg,"gameData",e),n=await function(e){e=ta(e,Mf);const t=ta(e.firestore,$f);return Cf(qf(t),e._key).then(n=>Sp(t,e,n))}(t);if(n.exists()){const e=n.data();if(e&&e.gameState){const t=JSON.parse(e.gameState);b.setState(t),console.log("\uac8c\uc784 \ub370\uc774\ud130 \ub85c\ub4dc \uc644\ub8cc")}}else console.log("\uc800\uc7a5\ub41c \uac8c\uc784 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uc0c8 \uac8c\uc784\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4.")}catch(t){console.error("\uac8c\uc784 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",t)}},x=async()=>{if(f)try{const e=b.getState();await function(e,t,n){e=ta(e,Mf);const r=ta(e.firestore,$f),i=vp(e.converter,t,n);return Ep(r,[rp(np(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,pc.none())])}(Uf(cg,"gameData",f.uid),{gameState:JSON.stringify(e),lastUpdated:(new Date).toISOString()}),console.log("\uac8c\uc784 \ub370\uc774\ud130 \uc800\uc7a5 \uc644\ub8cc")}catch(e){console.error("\uac8c\uc784 \ub370\uc774\ud130 \uc800\uc7a5 \uc2e4\ud328:",e)}},E={auth:lg,db:cg,user:f,saveGameData:x,getAIAdvice:async e=>{w(!0);try{const t=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({model:"llama3-70b-8192",messages:[{role:"system",content:"\ub2f9\uc2e0\uc740 \uc655\uad6d\uc758 \ud604\uba85\ud55c \uc870\uc5b8\uc790\uc785\ub2c8\ub2e4. \uc655\uad6d\uc758 \uc0c1\ud669\uc744 \ubd84\uc11d\ud558\uace0 \ucd5c\uc120\uc758 \uc870\uc5b8\uc744 \uc81c\uacf5\ud558\uc138\uc694."},{role:"user",content:e}],max_tokens:500,temperature:.7})}),n=await t.json();n.choices&&n.choices.length>0?y(n.choices[0].message.content):(console.error("AI \uc751\ub2f5 \ud615\uc2dd \uc624\ub958:",n),y("\uc870\uc5b8\uc744 \uc81c\uacf5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub098\uc911\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."))}catch(t){console.error("AI \uc870\uc5b8 \uc694\uccad \uc2e4\ud328:",t),y("\ub124\ud2b8\uc6cc\ud06c \uc624\ub958\ub85c \uc870\uc5b8\uc744 \uc81c\uacf5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}finally{w(!1)}},aiResponse:v,aiLoading:_,loading:m};return m?(0,Km.jsxs)("div",{style:{padding:"2rem",fontFamily:"Arial, sans-serif",textAlign:"center"},children:[(0,Km.jsx)("h1",{children:"\uc655\uad6d \ud1b5\uce58 \uc2dc\ubbac\ub808\uc774\uc158"}),(0,Km.jsx)("p",{children:"\uac8c\uc784 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."})]}):(0,Km.jsx)(ag.Provider,{value:E,children:(0,Km.jsxs)("div",{style:{padding:"2rem",fontFamily:"Arial, sans-serif"},children:[(0,Km.jsx)("h1",{children:"\uc655\uad6d \ud1b5\uce58 \uc2dc\ubbac\ub808\uc774\uc158 (\ub300\ud615 SLG \ubc84\uc804)"}),e?(0,Km.jsxs)("section",{children:[(0,Km.jsx)("h2",{children:"\uac8c\uc784 \uc885\ub8cc"}),(0,Km.jsxs)("p",{children:[t.reason," \ub54c\ubb38\uc5d0 ",(0,Km.jsx)("strong",{children:t.result}),"\ud588\uc2b5\ub2c8\ub2e4."]}),(0,Km.jsx)("button",{onClick:()=>b.getState().resetGame(),style:{padding:"0.5rem 1rem",backgroundColor:"#4a90e2",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"1rem"},children:"\uc0c8 \uac8c\uc784 \uc2dc\uc791"})]}):(0,Km.jsxs)(Km.Fragment,{children:[(0,Km.jsx)(Gm,{}),(0,Km.jsxs)("div",{className:"game-controls",style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,Km.jsx)("button",{onClick:()=>i(!n),className:"control-button",style:{padding:"0.5rem 1rem",backgroundColor:n?"#4a90e2":"#3a3a3a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:n?"\ub9f5 \uc228\uae30\uae30":"\ub9f5 \ubcf4\uae30"}),(0,Km.jsx)("button",{onClick:()=>a(!s),className:"control-button",style:{padding:"0.5rem 1rem",backgroundColor:s?"#7ed321":"#3a3a3a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:s?"\ub300\uc2dc\ubcf4\ub4dc \uc228\uae30\uae30":"\uc790\uc6d0 \ub300\uc2dc\ubcf4\ub4dc"}),(0,Km.jsx)("button",{onClick:()=>l(!o),className:"control-button",style:{padding:"0.5rem 1rem",backgroundColor:o?"#e74c3c":"#3a3a3a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:o?"\uc678\uad50 \uad00\uacc4 \uc228\uae30\uae30":"\uc678\uad50 \uad00\uacc4"}),(0,Km.jsx)("button",{onClick:()=>u(!c),className:"control-button",style:{padding:"0.5rem 1rem",backgroundColor:c?"#8e44ad":"#3a3a3a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:c?"\uad70\uc0ac \uc9c0\ud718\ubd80 \uc228\uae30\uae30":"\uad70\uc0ac \uc9c0\ud718\ubd80"}),(0,Km.jsx)("button",{onClick:()=>h(!d),className:"control-button",style:{padding:"0.5rem 1rem",backgroundColor:d?"#f39c12":"#3a3a3a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:d?"\uae30\uc220 \ud2b8\ub9ac \uc228\uae30\uae30":"\uae30\uc220 \uc5f0\uad6c"}),(0,Km.jsx)("button",{onClick:x,className:"control-button",style:{padding:"0.5rem 1rem",backgroundColor:"#27ae60",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\uac8c\uc784 \uc800\uc7a5"})]}),n&&(0,Km.jsx)(tg,{}),s&&(0,Km.jsx)(ng,{}),o&&(0,Km.jsx)(rg,{}),c&&(0,Km.jsx)(ig,{}),d&&(0,Km.jsx)(sg,{}),(0,Km.jsxs)("div",{className:"game-panels",style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,Km.jsxs)("div",{style:{flex:"1",minWidth:"300px"},children:[(0,Km.jsx)(Qm,{}),(0,Km.jsx)(Jm,{})]}),(0,Km.jsxs)("div",{style:{flex:"1",minWidth:"300px"},children:[(0,Km.jsx)(Xm,{}),(0,Km.jsx)(Zm,{})]})]})]}),(0,Km.jsx)(eg,{})]})})}const dg=document.getElementById("root");(0,i.H)(dg).render((0,Km.jsx)(r.StrictMode,{children:(0,Km.jsx)(ug,{})}))})();
//# sourceMappingURL=main.6c3a420c.js.map